<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>ImageResizer: ImageResizer.Plugins.DiskCache.Async.AsyncWriteCollection Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="resizer-icon-64.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">ImageResizer
   &#160;<span id="projectnumber">3.1.3</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Events</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespace_image_resizer.html">ImageResizer</a>      </li>
      <li class="navelem"><a class="el" href="namespace_image_resizer_1_1_plugins.html">Plugins</a>      </li>
      <li class="navelem"><a class="el" href="namespace_image_resizer_1_1_plugins_1_1_disk_cache.html">DiskCache</a>      </li>
      <li class="navelem"><a class="el" href="namespace_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async.html">Async</a>      </li>
      <li class="navelem"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write_collection.html">AsyncWriteCollection</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#properties">Properties</a>  </div>
  <div class="headertitle">
<div class="title">ImageResizer.Plugins.DiskCache.Async.AsyncWriteCollection Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="ImageResizer::Plugins::DiskCache::Async::AsyncWriteCollection" -->
<p><a href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write_collection-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write.html">AsyncWrite</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write_collection.html#a002c466579c94e379c32f7aabc675254">Get</a> (string relativePath, DateTime modifiedUtc)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">If the collection contains the specified item, it is returned. Otherwise, null is returned.  <a href="#a002c466579c94e379c32f7aabc675254"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write_collection.html#ac15496ee661c56506120dd0a5a09c16f">GetQueuedBufferBytes</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns how many bytes are allocated by buffers in the queue. May be 2x the amount of data. Represents how much ram is being used by the queue, not the amount of encoded bytes that will actually be written.  <a href="#ac15496ee661c56506120dd0a5a09c16f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write_collection.html#aa245eff15b732e3caee328ad86a278a9">Remove</a> (<a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write.html">AsyncWrite</a> w)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the specified object based on its relativepath and modifieddateutc values.  <a href="#aa245eff15b732e3caee328ad86a278a9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write_collection.html#a92b45565d75d0c9c9a0d56d5b11fcac0">Queue</a> (<a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write.html">AsyncWrite</a> w, WriterDelegate writerDelegate)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns false when (a) the specified <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write.html">AsyncWrite</a> value already exists, (b) the queue is full, or (c) the thread pool queue is full.  <a href="#a92b45565d75d0c9c9a0d56d5b11fcac0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a425e3445e864ee8ed873bdc1738198fc"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::Async::AsyncWriteCollection::WriterDelegate" ref="a425e3445e864ee8ed873bdc1738198fc" args="(AsyncWrite w)" -->
delegate void&#160;</td><td class="memItemRight" valign="bottom"><b>WriterDelegate</b> (<a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write.html">AsyncWrite</a> w)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9a2f4ff3e8e1c71a3ee0f598f1dba1c5"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::Async::AsyncWriteCollection::HashTogether" ref="a9a2f4ff3e8e1c71a3ee0f598f1dba1c5" args="(string relativePath, DateTime modifiedUtc)" -->
string&#160;</td><td class="memItemRight" valign="bottom"><b>HashTogether</b> (string relativePath, DateTime modifiedUtc)</td></tr>
<tr><td colspan="2"><h2><a name="properties"></a>
Properties</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write_collection.html#accd19b4886af197047ce6d12953157bf">MaxQueueBytes</a><code> [get, set]</code></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">How many bytes of buffered file data to hold in memory before refusing futher queue requests and forcing them to be executed synchronously.  <a href="#accd19b4886af197047ce6d12953157bf"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="_async_write_collection_8cs_source.html#l00007">7</a> of file <a class="el" href="_async_write_collection_8cs_source.html">AsyncWriteCollection.cs</a>.</p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a002c466579c94e379c32f7aabc675254"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::Async::AsyncWriteCollection::Get" ref="a002c466579c94e379c32f7aabc675254" args="(string relativePath, DateTime modifiedUtc)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write.html">AsyncWrite</a> <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write_collection.html#a002c466579c94e379c32f7aabc675254">ImageResizer.Plugins.DiskCache.Async.AsyncWriteCollection.Get</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>relativePath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DateTime&#160;</td>
          <td class="paramname"><em>modifiedUtc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>If the collection contains the specified item, it is returned. Otherwise, null is returned. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">relativePath</td><td></td></tr>
    <tr><td class="paramname">modifiedUtc</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_async_write_collection_8cs_source.html#l00032">32</a> of file <a class="el" href="_async_write_collection_8cs_source.html">AsyncWriteCollection.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                         {
            lock (_sync) {
                AsyncWrite result;
                <span class="keywordflow">return</span> c.TryGetValue(HashTogether(relativePath, modifiedUtc), out result) ? result : null;
            }
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ac15496ee661c56506120dd0a5a09c16f"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::Async::AsyncWriteCollection::GetQueuedBufferBytes" ref="ac15496ee661c56506120dd0a5a09c16f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write_collection.html#ac15496ee661c56506120dd0a5a09c16f">ImageResizer.Plugins.DiskCache.Async.AsyncWriteCollection.GetQueuedBufferBytes</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns how many bytes are allocated by buffers in the queue. May be 2x the amount of data. Represents how much ram is being used by the queue, not the amount of encoded bytes that will actually be written. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_async_write_collection_8cs_source.html#l00043">43</a> of file <a class="el" href="_async_write_collection_8cs_source.html">AsyncWriteCollection.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                           {
            lock (_sync) {
                <span class="keywordtype">long</span> total = 0;
                <span class="keywordflow">foreach</span> (AsyncWrite value <span class="keywordflow">in</span> c.Values) {
                    <span class="keywordflow">if</span> (value == null) <span class="keywordflow">continue</span>;
                    total += value.GetBufferLength();
                }
                <span class="keywordflow">return</span> total;
            }
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a92b45565d75d0c9c9a0d56d5b11fcac0"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::Async::AsyncWriteCollection::Queue" ref="a92b45565d75d0c9c9a0d56d5b11fcac0" args="(AsyncWrite w, WriterDelegate writerDelegate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write_collection.html#a92b45565d75d0c9c9a0d56d5b11fcac0">ImageResizer.Plugins.DiskCache.Async.AsyncWriteCollection.Queue</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write.html">AsyncWrite</a>&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WriterDelegate&#160;</td>
          <td class="paramname"><em>writerDelegate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns false when (a) the specified <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write.html">AsyncWrite</a> value already exists, (b) the queue is full, or (c) the thread pool queue is full. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">w</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_async_write_collection_8cs_source.html#l00068">68</a> of file <a class="el" href="_async_write_collection_8cs_source.html">AsyncWriteCollection.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                      {
            lock (_sync) {
                <span class="keywordflow">if</span> (<a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write_collection.html#ac15496ee661c56506120dd0a5a09c16f" title="Returns how many bytes are allocated by buffers in the queue. May be 2x the amount of data...">GetQueuedBufferBytes</a>() + w.GetBufferLength() &gt; <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write_collection.html#accd19b4886af197047ce6d12953157bf" title="How many bytes of buffered file data to hold in memory before refusing futher queue requests and forc...">MaxQueueBytes</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">//Because we would use too much ram.</span>
                <span class="keywordflow">if</span> (c.ContainsKey(HashTogether(w.RelativePath, w.ModifiedDateUtc))) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">//We already have a queued write for this data.</span>
                <span class="keywordflow">if</span> (!ThreadPool.QueueUserWorkItem(delegate(<span class="keywordtype">object</span> state){
                    AsyncWrite job = state as AsyncWrite;
                    writerDelegate(job);
                }, w)) <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">//thread pool refused</span>
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            }
        }
</pre></div>
</div>
</div>
<a class="anchor" id="aa245eff15b732e3caee328ad86a278a9"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::Async::AsyncWriteCollection::Remove" ref="aa245eff15b732e3caee328ad86a278a9" args="(AsyncWrite w)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write_collection.html#aa245eff15b732e3caee328ad86a278a9">ImageResizer.Plugins.DiskCache.Async.AsyncWriteCollection.Remove</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write.html">AsyncWrite</a>&#160;</td>
          <td class="paramname"><em>w</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes the specified object based on its relativepath and modifieddateutc values. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">w</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_async_write_collection_8cs_source.html#l00058">58</a> of file <a class="el" href="_async_write_collection_8cs_source.html">AsyncWriteCollection.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                         {
            lock (_sync) {
                c.Remove(HashTogether(w.RelativePath, w.ModifiedDateUtc));
            }
        }
</pre></div>
</div>
</div>
<hr/><h2>Property Documentation</h2>
<a class="anchor" id="accd19b4886af197047ce6d12953157bf"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::Async::AsyncWriteCollection::MaxQueueBytes" ref="accd19b4886af197047ce6d12953157bf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_async_1_1_async_write_collection.html#accd19b4886af197047ce6d12953157bf">ImageResizer.Plugins.DiskCache.Async.AsyncWriteCollection.MaxQueueBytes</a><code> [get, set]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>How many bytes of buffered file data to hold in memory before refusing futher queue requests and forcing them to be executed synchronously. </p>

<p>Definition at line <a class="el" href="_async_write_collection_8cs_source.html#l00021">21</a> of file <a class="el" href="_async_write_collection_8cs_source.html">AsyncWriteCollection.cs</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>C:/Users/Administrator/Documents/resizer/Plugins/DiskCache/Async/<a class="el" href="_async_write_collection_8cs_source.html">AsyncWriteCollection.cs</a></li>
</ul>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Events</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
