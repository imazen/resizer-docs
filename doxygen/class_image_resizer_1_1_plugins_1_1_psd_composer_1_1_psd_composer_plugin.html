<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ImageResizer: ImageResizer.Plugins.PsdComposer.PsdComposerPlugin Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="imageresizer-logo-00aec4.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">ImageResizer
   &#160;<span id="projectnumber">3.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Events</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_image_resizer.html">ImageResizer</a></li><li class="navelem"><a class="el" href="namespace_image_resizer_1_1_plugins.html">Plugins</a></li><li class="navelem"><a class="el" href="namespace_image_resizer_1_1_plugins_1_1_psd_composer.html">PsdComposer</a></li><li class="navelem"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html">PsdComposerPlugin</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for ImageResizer.Plugins.PsdComposer.PsdComposerPlugin:</div>
<div class="dyncontent">
<div class="center"><img src="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin__inherit__graph.png" border="0" usemap="#_image_resizer_8_plugins_8_psd_composer_8_psd_composer_plugin_inherit__map" alt="Inheritance graph"/></div>
<map name="_image_resizer_8_plugins_8_psd_composer_8_psd_composer_plugin_inherit__map" id="_image_resizer_8_plugins_8_psd_composer_8_psd_composer_plugin_inherit__map">
<area shape="rect" id="node2" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html" title="All plugins must implement this. Enables web.config addition and removal. " alt="" coords="5,6,123,53"/><area shape="rect" id="node4" href="interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider.html" title="Implement this to allow your class (or VirtualPathProvider subclass) to be used without registering i..." alt="" coords="147,6,471,53"/><area shape="rect" id="node6" href="interface_image_resizer_1_1_plugins_1_1_i_querystring_plugin.html" title="For plugins that access the query string (important!) " alt="" coords="496,6,779,53"/><area shape="rect" id="node8" href="interface_image_resizer_1_1_plugins_1_1_i_file_extension_plugin.html" title="For plugins that add support for new source file image extensions. " alt="" coords="803,6,1109,53"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for ImageResizer.Plugins.PsdComposer.PsdComposerPlugin:</div>
<div class="dyncontent">
<div class="center"><img src="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin__coll__graph.png" border="0" usemap="#_image_resizer_8_plugins_8_psd_composer_8_psd_composer_plugin_coll__map" alt="Collaboration graph"/></div>
<map name="_image_resizer_8_plugins_8_psd_composer_8_psd_composer_plugin_coll__map" id="_image_resizer_8_plugins_8_psd_composer_8_psd_composer_plugin_coll__map">
<area shape="rect" id="node2" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html" title="All plugins must implement this. Enables web.config addition and removal. " alt="" coords="1674,5,1793,51"/><area shape="rect" id="node4" href="interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider.html" title="Implement this to allow your class (or VirtualPathProvider subclass) to be used without registering i..." alt="" coords="1571,75,1895,122"/><area shape="rect" id="node6" href="interface_image_resizer_1_1_plugins_1_1_i_querystring_plugin.html" title="For plugins that access the query string (important!) " alt="" coords="109,133,392,179"/><area shape="rect" id="node12" href="class_image_resizer_1_1_image_builder.html" title="Provides methods for generating resized images, and for reading and writing them to disk..." alt="" coords="803,287,1213,334"/><area shape="rect" id="node8" href="interface_image_resizer_1_1_plugins_1_1_i_file_extension_plugin.html" title="For plugins that add support for new source file image extensions. " alt="" coords="97,203,404,250"/><area shape="rect" id="node10" href="class_image_resizer_1_1_configuration_1_1_config.html" title="ImageResizer.Configuration.\lConfig" alt="" coords="1522,275,1945,357"/><area shape="rect" id="node22" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html" title="Provides thread&#45;safe access to plugin addition, removal, and querying methods " alt="" coords="2258,469,2681,550"/><area shape="rect" id="node14" href="class_image_resizer_1_1_resizing_1_1_abstract_image_processor.html" title="Not for external use. Inherit from BuilderExtension instead. Dual&#45;purpose base class for both ImageBu..." alt="" coords="67,274,434,321"/><area shape="rect" id="node18" href="interface_image_resizer_1_1_encoding_1_1_i_encoder_provider.html" title="A provider (or selector) of IEncoder instances. " alt="" coords="5,345,496,426"/><area shape="rect" id="node20" href="interface_image_resizer_1_1_plugins_1_1_i_settings_modifier.html" title="Provides a way to modify settings before they reach the managed API. Does not execute early enough to..." alt="" coords="21,450,481,531"/><area shape="rect" id="node24" href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue_sink.html" title="IssueSink" alt="" coords="928,586,1088,633"/><area shape="rect" id="node26" href="interface_image_resizer_1_1_configuration_1_1_issues_1_1_i_issue_provider.html" title="IIssueProvider" alt="" coords="139,626,362,673"/><area shape="rect" id="node35" href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue_sink.html" title="Issues::IssueSink" alt="" coords="873,515,1143,562"/><area shape="rect" id="node28" href="interface_image_resizer_1_1_configuration_1_1_issues_1_1_i_issue_receiver.html" title="IIssueReceiver" alt="" coords="135,555,366,602"/><area shape="rect" id="node30" href="interface_image_resizer_1_1_encoding_1_1_i_encoder_provider.html" title="A provider (or selector) of IEncoder instances. " alt="" coords="1601,511,1865,558"/><area shape="rect" id="node33" href="class_image_resizer_1_1_configuration_1_1_plugins_1_1_native_dependency_manager.html" title="Provides automatic download of native dependencies (which VS doesn&#39;t see). Gets the correct bitness a..." alt="" coords="1472,406,1995,487"/><area shape="rect" id="node39" href="interface_image_resizer_1_1_configuration_1_1_logging_1_1_i_log_manager.html" title="ImageResizer.Configuration.\lLogging.ILogManager" alt="" coords="1522,634,1945,715"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae1d666e44ae1c8216214c4533a1da64f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html">IPlugin</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#ae1d666e44ae1c8216214c4533a1da64f">Install</a> (<a class="el" href="class_image_resizer_1_1_configuration_1_1_config.html">Config</a> c)</td></tr>
<tr class="memdesc:ae1d666e44ae1c8216214c4533a1da64f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Installs the plugin in the specified Config instance. The plugin must handle all the work of loading settings, registering the plugin etc.  <a href="#ae1d666e44ae1c8216214c4533a1da64f">More...</a><br/></td></tr>
<tr class="separator:ae1d666e44ae1c8216214c4533a1da64f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12fe3909ca314844788bfd46641006f2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a12fe3909ca314844788bfd46641006f2">Uninstall</a> (<a class="el" href="class_image_resizer_1_1_configuration_1_1_config.html">Config</a> c)</td></tr>
<tr class="memdesc:a12fe3909ca314844788bfd46641006f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uninstalls the plugin. Should reverse all changes made during Install  <a href="#a12fe3909ca314844788bfd46641006f2">More...</a><br/></td></tr>
<tr class="separator:a12fe3909ca314844788bfd46641006f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a4ff24e792a504fe1a8a40821ac2550"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a9a4ff24e792a504fe1a8a40821ac2550">FileExists</a> (string virtualPath, NameValueCollection queryString)</td></tr>
<tr class="memdesc:a9a4ff24e792a504fe1a8a40821ac2550"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the specified file and querystring indicate a PSD composition request  <a href="#a9a4ff24e792a504fe1a8a40821ac2550">More...</a><br/></td></tr>
<tr class="separator:a9a4ff24e792a504fe1a8a40821ac2550"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c412d8253cbbdbb6b15fd404d08db09"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_virtual_file.html">IVirtualFile</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a5c412d8253cbbdbb6b15fd404d08db09">GetFile</a> (string virtualPath, NameValueCollection queryString)</td></tr>
<tr class="memdesc:a5c412d8253cbbdbb6b15fd404d08db09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a virtual file instance for the specified specified file and querystring, if they indicate a PSD composition request. Otherwise, null is returned.  <a href="#a5c412d8253cbbdbb6b15fd404d08db09">More...</a><br/></td></tr>
<tr class="separator:a5c412d8253cbbdbb6b15fd404d08db09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a463f89727ea721c5d166f4569807de0f"><td class="memItemLeft" align="right" valign="top">IEnumerable&lt; string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a463f89727ea721c5d166f4569807de0f">GetSupportedQuerystringKeys</a> ()</td></tr>
<tr class="memdesc:a463f89727ea721c5d166f4569807de0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the plugin reads any values from the querystring, the names of the keys should be specified here. This information is required so that the HttpModule knows when to handle an image request.  <a href="#a463f89727ea721c5d166f4569807de0f">More...</a><br/></td></tr>
<tr class="separator:a463f89727ea721c5d166f4569807de0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a779a2c25fbd26f15b8122c1f4af2f2f9"><td class="memItemLeft" align="right" valign="top">IEnumerable&lt; string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a779a2c25fbd26f15b8122c1f4af2f2f9">GetSupportedFileExtensions</a> ()</td></tr>
<tr class="memdesc:a779a2c25fbd26f15b8122c1f4af2f2f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the plugin adds support for new file extensions (such as "psd"), they should be returned by this method.  <a href="#a779a2c25fbd26f15b8122c1f4af2f2f9">More...</a><br/></td></tr>
<tr class="separator:a779a2c25fbd26f15b8122c1f4af2f2f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8428f7013e42f8d4a6bc8bf847fae598"><td class="memItemLeft" align="right" valign="top">Stream&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a8428f7013e42f8d4a6bc8bf847fae598">ComposeStream</a> (string virtualPath, NameValueCollection queryString)</td></tr>
<tr class="memdesc:a8428f7013e42f8d4a6bc8bf847fae598"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a stream to the composed file, encoded in the format requested by the querystring or fake extension  <a href="#a8428f7013e42f8d4a6bc8bf847fae598">More...</a><br/></td></tr>
<tr class="separator:a8428f7013e42f8d4a6bc8bf847fae598"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08ed070326d9e4f8637a279ca7394080"><td class="memItemLeft" align="right" valign="top">System.Drawing.Bitmap&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a08ed070326d9e4f8637a279ca7394080">ComposeBitmap</a> (string virtualPath, NameValueCollection queryString)</td></tr>
<tr class="memdesc:a08ed070326d9e4f8637a279ca7394080"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a Bitmap instance of the composed result  <a href="#a08ed070326d9e4f8637a279ca7394080">More...</a><br/></td></tr>
<tr class="separator:a08ed070326d9e4f8637a279ca7394080"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a632f42fc2078294c6c7d658a155678a6"><td class="memItemLeft" align="right" valign="top">Size&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a632f42fc2078294c6c7d658a155678a6">GetPsdDimensions</a> (string virtualPath, NameValueCollection queryString)</td></tr>
<tr class="memdesc:a632f42fc2078294c6c7d658a155678a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the size of the PSD  <a href="#a632f42fc2078294c6c7d658a155678a6">More...</a><br/></td></tr>
<tr class="separator:a632f42fc2078294c6c7d658a155678a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a254fc91b19f5eac0e4bcb5e6745e120c"><td class="memItemLeft" align="right" valign="top">IList&lt; <a class="el" href="interface_image_resizer_1_1_plugins_1_1_psd_composer_1_1_i_psd_layer.html">IPsdLayer</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a254fc91b19f5eac0e4bcb5e6745e120c">GetAllLayers</a> (string virtualPath, NameValueCollection queryString)</td></tr>
<tr class="memdesc:a254fc91b19f5eac0e4bcb5e6745e120c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a collection of all the layers for the specified file (memcached)  <a href="#a254fc91b19f5eac0e4bcb5e6745e120c">More...</a><br/></td></tr>
<tr class="separator:a254fc91b19f5eac0e4bcb5e6745e120c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea2bdfcce28f129035890243ae7b3a48"><td class="memItemLeft" align="right" valign="top">IList&lt; <a class="el" href="interface_image_resizer_1_1_plugins_1_1_psd_composer_1_1_i_psd_layer.html">IPsdLayer</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#aea2bdfcce28f129035890243ae7b3a48">GetVisibleTextLayers</a> (string virtualPath, NameValueCollection queryString)</td></tr>
<tr class="memdesc:aea2bdfcce28f129035890243ae7b3a48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a collection of all visible text layers for the file (memcached). Useful for building image maps  <a href="#aea2bdfcce28f129035890243ae7b3a48">More...</a><br/></td></tr>
<tr class="separator:aea2bdfcce28f129035890243ae7b3a48"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aea7a7e651bdcdb6137e837d60441dca0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aea7a7e651bdcdb6137e837d60441dca0"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>isStrictMode</b> ()</td></tr>
<tr class="separator:aea7a7e651bdcdb6137e837d60441dca0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a081cb0470034a93aed7445bc65ed1a42"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_image_resizer_1_1_plugins_1_1_psd_composer_1_1_i_psd_renderer.html">IPsdRenderer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a081cb0470034a93aed7445bc65ed1a42">GetSelectedRenderer</a> (NameValueCollection queryString)</td></tr>
<tr class="memdesc:a081cb0470034a93aed7445bc65ed1a42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the renderer object selected in the querystring  <a href="#a081cb0470034a93aed7445bc65ed1a42">More...</a><br/></td></tr>
<tr class="separator:a081cb0470034a93aed7445bc65ed1a42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fca6874ee6f5fc7972eea04b292646b"><td class="memItemLeft" align="right" valign="top">KeyValuePair&lt; Size, IList<br class="typebreak"/>
&lt; <a class="el" href="interface_image_resizer_1_1_plugins_1_1_psd_composer_1_1_i_psd_layer.html">IPsdLayer</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a6fca6874ee6f5fc7972eea04b292646b">GetFileMetadata</a> (string virtualPath, NameValueCollection queryString)</td></tr>
<tr class="memdesc:a6fca6874ee6f5fc7972eea04b292646b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a collection of all the layers for the specified file and the size of the file (memcached)  <a href="#a6fca6874ee6f5fc7972eea04b292646b">More...</a><br/></td></tr>
<tr class="separator:a6fca6874ee6f5fc7972eea04b292646b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94eafcc1bd526d2a6a01a2263e47c6fd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a94eafcc1bd526d2a6a01a2263e47c6fd">IsPathPSDToCompose</a> (string virtualPath, NameValueCollection queryString=null)</td></tr>
<tr class="memdesc:a94eafcc1bd526d2a6a01a2263e47c6fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if the file is a .psd.jpeg, .psd.png, etc file.  <a href="#a94eafcc1bd526d2a6a01a2263e47c6fd">More...</a><br/></td></tr>
<tr class="separator:a94eafcc1bd526d2a6a01a2263e47c6fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00023">23</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a08ed070326d9e4f8637a279ca7394080"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">System.Drawing.Bitmap ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.ComposeBitmap </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>queryString</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a Bitmap instance of the composed result </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00123">123</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                                                                                                        {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <span class="comment">//Renderer object</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            IPsdRenderer renderer = <a class="code" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a081cb0470034a93aed7445bc65ed1a42">GetSelectedRenderer</a>(queryString);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="comment">//Bitmap we will render to</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            System.Drawing.Bitmap b = null;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            MemCachedFile file = MemCachedFile.GetCachedVirtualFile(StripFakeExtension(virtualPath),c.Pipeline, <span class="keyword">new</span> NameValueCollection());</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            <span class="keyword">using</span> (Stream s = file.GetStream()) {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                <span class="comment">//Time just the parsing/rendering</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                Stopwatch swRender = <span class="keyword">new</span> Stopwatch();</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                swRender.Start();</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                IList&lt;IPsdLayer&gt; layers = null;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                Size size = Size.Empty;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                <span class="comment">//Use the selected renderer to parse the file and compose the layers, using this delegate callback to determine which layers to show.</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                b = renderer.Render(s, out layers, out size, BuildLayerCallback(queryString), BuildModifyLayerCallback(queryString));</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                <span class="comment">//Save layers &amp; size for later use</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                file.SetSubkey(<span class="stringliteral">&quot;layers_&quot;</span> + renderer.ToString(), layers);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                file.SetSubkey(<span class="stringliteral">&quot;size_&quot;</span> + renderer.ToString(), size);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                <span class="comment">//How fast?</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                swRender.Stop();</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                trace(<span class="stringliteral">&quot;Using encoder &quot;</span> + renderer.ToString() + <span class="stringliteral">&quot;, rendering stream to a composed Bitmap instance took &quot;</span> + swRender.ElapsedMilliseconds.ToString() + <span class="stringliteral">&quot;ms&quot;</span>);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            <span class="keywordflow">return</span> b;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        }</div>
<div class="ttc" id="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin_html_a081cb0470034a93aed7445bc65ed1a42"><div class="ttname"><a href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a081cb0470034a93aed7445bc65ed1a42">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetSelectedRenderer</a></div><div class="ttdeci">IPsdRenderer GetSelectedRenderer(NameValueCollection queryString)</div><div class="ttdoc">Returns the renderer object selected in the querystring </div><div class="ttdef"><b>Definition:</b> <a href="_psd_composer_plugin_8cs_source.html#l00083">PsdComposerPlugin.cs:83</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8428f7013e42f8d4a6bc8bf847fae598"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Stream ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.ComposeStream </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>queryString</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a stream to the composed file, encoded in the format requested by the querystring or fake extension </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00094">94</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                                                                                         {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            Stopwatch sw = <span class="keyword">new</span> Stopwatch();</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            sw.Start();</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            System.Drawing.Bitmap b = <a class="code" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a08ed070326d9e4f8637a279ca7394080">ComposeBitmap</a>(virtualPath, queryString);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            <span class="comment">//Memory stream for encoding the file</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            MemoryStream ms = <span class="keyword">new</span> MemoryStream();</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            <span class="comment">//Encode image to memory stream, then seek the stream to byte 0</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <span class="keyword">using</span> (b) {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                <span class="comment">//Use whatever settings appear in the URL </span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                <a class="code" href="interface_image_resizer_1_1_encoding_1_1_i_encoder.html">IEncoder</a> encoder = c.Plugins.GetEncoder(<span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_resize_settings.html">ImageResizer.ResizeSettings</a>(queryString), virtualPath);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                encoder.Write(b, ms);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                ms.Seek(0, SeekOrigin.Begin); <span class="comment">//Reset stream for reading</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            }</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            sw.Stop();</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            trace(<span class="stringliteral">&quot;Total time, including encoding: &quot;</span> + sw.ElapsedMilliseconds.ToString() + <span class="stringliteral">&quot;ms&quot;</span>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <span class="keywordflow">return</span> ms;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        }</div>
<div class="ttc" id="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin_html_a08ed070326d9e4f8637a279ca7394080"><div class="ttname"><a href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a08ed070326d9e4f8637a279ca7394080">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.ComposeBitmap</a></div><div class="ttdeci">System.Drawing.Bitmap ComposeBitmap(string virtualPath, NameValueCollection queryString)</div><div class="ttdoc">Returns a Bitmap instance of the composed result </div><div class="ttdef"><b>Definition:</b> <a href="_psd_composer_plugin_8cs_source.html#l00123">PsdComposerPlugin.cs:123</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_resize_settings_html"><div class="ttname"><a href="class_image_resizer_1_1_resize_settings.html">ImageResizer.ResizeSettings</a></div><div class="ttdoc">Represents the settings which will be used to process the image. Extends NameValueCollection to provi...</div><div class="ttdef"><b>Definition:</b> <a href="_resize_settings_8cs_source.html#l00020">ResizeSettings.cs:20</a></div></div>
<div class="ttc" id="interface_image_resizer_1_1_encoding_1_1_i_encoder_html"><div class="ttname"><a href="interface_image_resizer_1_1_encoding_1_1_i_encoder.html">ImageResizer.Encoding.IEncoder</a></div><div class="ttdoc">An image encoder. Exposes methods for suitability checking, encoding, transparency compatibility chec...</div><div class="ttdef"><b>Definition:</b> <a href="_i_encoder_8cs_source.html#l00013">IEncoder.cs:13</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9a4ff24e792a504fe1a8a40821ac2550"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.FileExists </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>queryString</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns true if the specified file and querystring indicate a PSD composition request </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">virtualPath</td><td></td></tr>
    <tr><td class="paramname">queryString</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Implements <a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider.html#adc1f2caa76c242e3c0bb8ed2d824f9c3">ImageResizer.Plugins.IVirtualImageProvider</a>.</p>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00046">46</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                                                                                    {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a94eafcc1bd526d2a6a01a2263e47c6fd">IsPathPSDToCompose</a>(virtualPath,queryString) &amp;&amp; c.Pipeline.FileExists(StripFakeExtension(virtualPath),<span class="keyword">new</span> NameValueCollection());</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        }</div>
<div class="ttc" id="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin_html_a94eafcc1bd526d2a6a01a2263e47c6fd"><div class="ttname"><a href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a94eafcc1bd526d2a6a01a2263e47c6fd">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.IsPathPSDToCompose</a></div><div class="ttdeci">bool IsPathPSDToCompose(string virtualPath, NameValueCollection queryString=null)</div><div class="ttdoc">True if the file is a .psd.jpeg, .psd.png, etc file. </div><div class="ttdef"><b>Definition:</b> <a href="_psd_composer_plugin_8cs_source.html#l00364">PsdComposerPlugin.cs:364</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a254fc91b19f5eac0e4bcb5e6745e120c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">IList&lt;<a class="el" href="interface_image_resizer_1_1_plugins_1_1_psd_composer_1_1_i_psd_layer.html">IPsdLayer</a>&gt; ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetAllLayers </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>queryString</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a collection of all the layers for the specified file (memcached) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">virtualPath</td><td></td></tr>
    <tr><td class="paramname">queryString</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00170">170</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                                                                                  {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a6fca6874ee6f5fc7972eea04b292646b">GetFileMetadata</a>(virtualPath, queryString).Value;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        }</div>
<div class="ttc" id="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin_html_a6fca6874ee6f5fc7972eea04b292646b"><div class="ttname"><a href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a6fca6874ee6f5fc7972eea04b292646b">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetFileMetadata</a></div><div class="ttdeci">KeyValuePair&lt; Size, IList&lt; IPsdLayer &gt; &gt; GetFileMetadata(string virtualPath, NameValueCollection queryString)</div><div class="ttdoc">Returns a collection of all the layers for the specified file and the size of the file (memcached) ...</div><div class="ttdef"><b>Definition:</b> <a href="_psd_composer_plugin_8cs_source.html#l00179">PsdComposerPlugin.cs:179</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5c412d8253cbbdbb6b15fd404d08db09"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_virtual_file.html">IVirtualFile</a> ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetFile </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>queryString</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a virtual file instance for the specified specified file and querystring, if they indicate a PSD composition request. Otherwise, null is returned. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">virtualPath</td><td></td></tr>
    <tr><td class="paramname">queryString</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Implements <a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider.html#aa3bb3191e4ed5cbf957c961d607d611b">ImageResizer.Plugins.IVirtualImageProvider</a>.</p>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00057">57</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                                                                                         {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a94eafcc1bd526d2a6a01a2263e47c6fd">IsPathPSDToCompose</a>(virtualPath, queryString) &amp;&amp; c.<a class="code" href="class_image_resizer_1_1_configuration_1_1_config.html#ab7d8e32249817ef77f91508c087140d9">Pipeline</a>.<a class="code" href="class_image_resizer_1_1_configuration_1_1_pipeline_config.html#a1abc7d07064e5c4e583406be7a3ebcab">FileExists</a>(StripFakeExtension(virtualPath), <span class="keyword">new</span> NameValueCollection()))</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> PsdVirtualFile(virtualPath, queryString, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        }</div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_pipeline_config_html_a1abc7d07064e5c4e583406be7a3ebcab"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_pipeline_config.html#a1abc7d07064e5c4e583406be7a3ebcab">ImageResizer.Configuration.PipelineConfig.FileExists</a></div><div class="ttdeci">bool FileExists(string virtualPath, NameValueCollection queryString)</div><div class="ttdoc">Returns true if (a) A registered IVirtualImageProvider says it exists, or (b) if the VirtualPathProvi...</div><div class="ttdef"><b>Definition:</b> <a href="_pipeline_config_8cs_source.html#l00298">PipelineConfig.cs:298</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_config_html_ab7d8e32249817ef77f91508c087140d9"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_config.html#ab7d8e32249817ef77f91508c087140d9">ImageResizer.Configuration.Config.Pipeline</a></div><div class="ttdeci">PipelineConfig Pipeline</div><div class="ttdoc">Access and modify settings related to the HttpModule pipline. Register URL rewriting hooks...</div><div class="ttdef"><b>Definition:</b> <a href="_config_8cs_source.html#l00093">Config.cs:93</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin_html_a94eafcc1bd526d2a6a01a2263e47c6fd"><div class="ttname"><a href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a94eafcc1bd526d2a6a01a2263e47c6fd">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.IsPathPSDToCompose</a></div><div class="ttdeci">bool IsPathPSDToCompose(string virtualPath, NameValueCollection queryString=null)</div><div class="ttdoc">True if the file is a .psd.jpeg, .psd.png, etc file. </div><div class="ttdef"><b>Definition:</b> <a href="_psd_composer_plugin_8cs_source.html#l00364">PsdComposerPlugin.cs:364</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6fca6874ee6f5fc7972eea04b292646b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">KeyValuePair&lt;Size,IList&lt;<a class="el" href="interface_image_resizer_1_1_plugins_1_1_psd_composer_1_1_i_psd_layer.html">IPsdLayer</a>&gt; &gt; ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetFileMetadata </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>queryString</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a collection of all the layers for the specified file and the size of the file (memcached) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">virtualPath</td><td></td></tr>
    <tr><td class="paramname">queryString</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00179">179</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                                                                                                                           {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            Stopwatch sw = <span class="keyword">new</span> Stopwatch();</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            sw.Start();</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <span class="comment">//Renderer object</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            IPsdRenderer renderer = <a class="code" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a081cb0470034a93aed7445bc65ed1a42">GetSelectedRenderer</a>(queryString);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            <span class="comment">//File</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            MemCachedFile file = MemCachedFile.GetCachedVirtualFile(StripFakeExtension(virtualPath), c.Pipeline, <span class="keyword">new</span> NameValueCollection());</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <span class="comment">//key</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            <span class="keywordtype">string</span> layersKey = <span class="stringliteral">&quot;layers_&quot;</span> + renderer.ToString();</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            <span class="keywordtype">string</span> sizeKey = <span class="stringliteral">&quot;size_&quot;</span> + renderer.ToString();</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="comment">//Try getting from the cache first</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            IList&lt;IPsdLayer&gt; layers = file.GetSubkey(layersKey) as IList&lt;IPsdLayer&gt;;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            Size size = file.GetSubkey(sizeKey) is Size ? (Size)file.GetSubkey(sizeKey) : Size.Empty;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            if (layers == null) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                <span class="comment">//Time just the parsing</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                Stopwatch swRender = <span class="keyword">new</span> Stopwatch();</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                swRender.Start();</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                layers = renderer.GetLayersAndSize(file.GetStream(), out size);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                <span class="comment">//Save to cache for later</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                file.SetSubkey(layersKey, layers);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                file.SetSubkey(sizeKey, size);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                <span class="comment">//How fast?</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                swRender.Stop();</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                trace(<span class="stringliteral">&quot;Using decoder &quot;</span> + renderer.ToString() + <span class="stringliteral">&quot;,parsing file and enumerating layers took &quot;</span> + swRender.ElapsedMilliseconds.ToString() + <span class="stringliteral">&quot;ms&quot;</span>);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            sw.Stop();</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            trace(<span class="stringliteral">&quot;Total time for enumerating, including file reading: &quot;</span> + sw.ElapsedMilliseconds.ToString(NumberFormatInfo.InvariantInfo) + <span class="stringliteral">&quot;ms&quot;</span>);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> KeyValuePair&lt;Size,IList&lt;IPsdLayer&gt;&gt;(size,layers);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        }</div>
<div class="ttc" id="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin_html_a081cb0470034a93aed7445bc65ed1a42"><div class="ttname"><a href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a081cb0470034a93aed7445bc65ed1a42">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetSelectedRenderer</a></div><div class="ttdeci">IPsdRenderer GetSelectedRenderer(NameValueCollection queryString)</div><div class="ttdoc">Returns the renderer object selected in the querystring </div><div class="ttdef"><b>Definition:</b> <a href="_psd_composer_plugin_8cs_source.html#l00083">PsdComposerPlugin.cs:83</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a632f42fc2078294c6c7d658a155678a6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Size ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetPsdDimensions </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>queryString</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the size of the PSD </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">virtualPath</td><td></td></tr>
    <tr><td class="paramname">queryString</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00160">160</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                                                                                          {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a6fca6874ee6f5fc7972eea04b292646b">GetFileMetadata</a>(virtualPath, queryString).Key;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        }</div>
<div class="ttc" id="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin_html_a6fca6874ee6f5fc7972eea04b292646b"><div class="ttname"><a href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a6fca6874ee6f5fc7972eea04b292646b">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetFileMetadata</a></div><div class="ttdeci">KeyValuePair&lt; Size, IList&lt; IPsdLayer &gt; &gt; GetFileMetadata(string virtualPath, NameValueCollection queryString)</div><div class="ttdoc">Returns a collection of all the layers for the specified file and the size of the file (memcached) ...</div><div class="ttdef"><b>Definition:</b> <a href="_psd_composer_plugin_8cs_source.html#l00179">PsdComposerPlugin.cs:179</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a081cb0470034a93aed7445bc65ed1a42"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_image_resizer_1_1_plugins_1_1_psd_composer_1_1_i_psd_renderer.html">IPsdRenderer</a> ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetSelectedRenderer </td>
          <td>(</td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>queryString</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the renderer object selected in the querystring </p>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00083">83</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> PsdPluginRenderer(); <span class="comment">//There is only ONE renderer now - The Agurigma one was horrible</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a779a2c25fbd26f15b8122c1f4af2f2f9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">IEnumerable&lt;string&gt; ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetSupportedFileExtensions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the plugin adds support for new file extensions (such as "psd"), they should be returned by this method. </p>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Implements <a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_file_extension_plugin.html#a53672fd2aee854a01f313f099c95b330">ImageResizer.Plugins.IFileExtensionPlugin</a>.</p>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00069">69</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                                                                {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[] { <span class="stringliteral">&quot;psd&quot;</span> };</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a463f89727ea721c5d166f4569807de0f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">IEnumerable&lt;string&gt; ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetSupportedQuerystringKeys </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If the plugin reads any values from the querystring, the names of the keys should be specified here. This information is required so that the HttpModule knows when to handle an image request. </p>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Implements <a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_querystring_plugin.html#aaa1c43be9b92caf1f1caa81dc9e9f4bf">ImageResizer.Plugins.IQuerystringPlugin</a>.</p>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00065">65</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                                                                 {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            <span class="keywordflow">return</span> PsdCommandBuilder.GetSupportedQuerystringKeys();</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aea2bdfcce28f129035890243ae7b3a48"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">IList&lt;<a class="el" href="interface_image_resizer_1_1_plugins_1_1_psd_composer_1_1_i_psd_layer.html">IPsdLayer</a>&gt; ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetVisibleTextLayers </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>queryString</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a collection of all visible text layers for the file (memcached). Useful for building image maps </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">virtualPath</td><td></td></tr>
    <tr><td class="paramname">queryString</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00222">222</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                                                                                                          {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="comment">//Get all layers</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            IList&lt;IPsdLayer&gt; layers = <a class="code" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a254fc91b19f5eac0e4bcb5e6745e120c">GetAllLayers</a>(virtualPath, queryString);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            Stopwatch sw = <span class="keyword">new</span> Stopwatch();</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            sw.Start();</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            <span class="comment">//Now, time to filter layers to those that would be showing on the image right now.</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            IList&lt;IPsdLayer&gt; filtered = <span class="keyword">new</span> List&lt;IPsdLayer&gt;();</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <span class="comment">//Generate a callback just like the one used in the renderer for filtering</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            ShowLayerDelegate callback = BuildLayerCallback(queryString);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; layers.Count; i++) {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                <span class="keywordflow">if</span> (layers[i].IsTextLayer &amp;&amp; callback(layers[i].Index, layers[i].Name, layers[i].Visible)) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                    filtered.Add(layers[i]);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            sw.Stop();</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            trace(<span class="stringliteral">&quot;Time for filtering layers: &quot;</span> + sw.ElapsedMilliseconds.ToString() + <span class="stringliteral">&quot;ms&quot;</span>);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="keywordflow">return</span> filtered;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        }</div>
<div class="ttc" id="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin_html_a254fc91b19f5eac0e4bcb5e6745e120c"><div class="ttname"><a href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a254fc91b19f5eac0e4bcb5e6745e120c">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetAllLayers</a></div><div class="ttdeci">IList&lt; IPsdLayer &gt; GetAllLayers(string virtualPath, NameValueCollection queryString)</div><div class="ttdoc">Returns a collection of all the layers for the specified file (memcached) </div><div class="ttdef"><b>Definition:</b> <a href="_psd_composer_plugin_8cs_source.html#l00170">PsdComposerPlugin.cs:170</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae1d666e44ae1c8216214c4533a1da64f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html">IPlugin</a> ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.Install </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_image_resizer_1_1_configuration_1_1_config.html">Config</a>&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Installs the plugin in the specified Config instance. The plugin must handle all the work of loading settings, registering the plugin etc. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Implements <a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html#acca01a73bba24037b9b3ade1b4e3c134">ImageResizer.Plugins.IPlugin</a>.</p>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00029">29</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;                                         {</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;            this.c = c;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;            this.c.Plugins.add_plugin(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">this</span>;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a94eafcc1bd526d2a6a01a2263e47c6fd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.IsPathPSDToCompose </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>queryString</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>True if the file is a .psd.jpeg, .psd.png, etc file. </p>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00364">364</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <span class="keywordtype">string</span> fileName = System.IO.Path.GetFileName(virtualPath); <span class="comment">//Exclude the folders, just looking at the filename here.</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <span class="keywordtype">int</span> psd = fileName.IndexOf(<span class="stringliteral">&quot;.psd&quot;</span>,StringComparison.OrdinalIgnoreCase);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <span class="keywordflow">if</span> (psd &gt; -1){</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                <span class="comment">//We always take the .psd. syntax</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                <span class="keywordflow">if</span> (fileName.IndexOf(<span class="stringliteral">&quot;.psd.&quot;</span>,StringComparison.OrdinalIgnoreCase) &gt; -1) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                <span class="keywordflow">if</span> (queryString == null) queryString = c.Pipeline.ModifiedQueryString;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                <span class="comment">//But we only grab the .psd syntax if we detect our commands</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                <span class="keywordflow">foreach</span>(<span class="keywordtype">string</span> s <span class="keywordflow">in</span> PsdCommandBuilder.GetSupportedQuerystringKeys()){</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                    <span class="keywordflow">if</span> (!<span class="keywordtype">string</span>.IsNullOrEmpty(queryString[s])) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a12fe3909ca314844788bfd46641006f2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.Uninstall </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_image_resizer_1_1_configuration_1_1_config.html">Config</a>&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Uninstalls the plugin. Should reverse all changes made during Install </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Implements <a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html#a047c1f46ce451fefc5f2ba3c16b64e8f">ImageResizer.Plugins.IPlugin</a>.</p>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00035">35</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                                        {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            c.Plugins.remove_plugin(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>C:/Users/nathanael/Documents/resizer/Plugins/PsdComposer/<a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
