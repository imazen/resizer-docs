<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>ImageResizer: ImageResizer.Plugins.PsdComposer.PsdComposerPlugin Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="resizer-icon-64.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">ImageResizer
   &#160;<span id="projectnumber">3.1.3</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Events</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespace_image_resizer.html">ImageResizer</a>      </li>
      <li class="navelem"><a class="el" href="namespace_image_resizer_1_1_plugins.html">Plugins</a>      </li>
      <li class="navelem"><a class="el" href="namespace_image_resizer_1_1_plugins_1_1_psd_composer.html">PsdComposer</a>      </li>
      <li class="navelem"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html">PsdComposerPlugin</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="ImageResizer::Plugins::PsdComposer::PsdComposerPlugin" --><!-- doxytag: inherits="ImageResizer::Plugins::IPlugin,ImageResizer::Plugins::IVirtualImageProvider,ImageResizer::Plugins::IQuerystringPlugin,ImageResizer::Plugins::IFileExtensionPlugin" --><div class="dynheader">
Inheritance diagram for ImageResizer.Plugins.PsdComposer.PsdComposerPlugin:</div>
<div class="dyncontent">
<div class="center"><img src="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin__inherit__graph.png" border="0" usemap="#_image_resizer_8_plugins_8_psd_composer_8_psd_composer_plugin_inherit__map" alt="Inheritance graph"/></div>
<map name="_image_resizer_8_plugins_8_psd_composer_8_psd_composer_plugin_inherit__map" id="_image_resizer_8_plugins_8_psd_composer_8_psd_composer_plugin_inherit__map">
<area shape="rect" id="node2" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html" title="All plugins must implement this. Enables web.config addition and removal." alt="" coords="5,6,123,53"/><area shape="rect" id="node4" href="interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider.html" title="Implement this to allow your class (or VirtualPathProvider subclass) to be used without registering i..." alt="" coords="147,6,471,53"/><area shape="rect" id="node6" href="interface_image_resizer_1_1_plugins_1_1_i_querystring_plugin.html" title="For plugins that access the query string (important!)" alt="" coords="496,6,779,53"/><area shape="rect" id="node8" href="interface_image_resizer_1_1_plugins_1_1_i_file_extension_plugin.html" title="For plugins that add support for new source file image extensions." alt="" coords="803,6,1109,53"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for ImageResizer.Plugins.PsdComposer.PsdComposerPlugin:</div>
<div class="dyncontent">
<div class="center"><img src="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin__coll__graph.png" border="0" usemap="#_image_resizer_8_plugins_8_psd_composer_8_psd_composer_plugin_coll__map" alt="Collaboration graph"/></div>
<map name="_image_resizer_8_plugins_8_psd_composer_8_psd_composer_plugin_coll__map" id="_image_resizer_8_plugins_8_psd_composer_8_psd_composer_plugin_coll__map">
<area shape="rect" id="node2" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html" title="All plugins must implement this. Enables web.config addition and removal." alt="" coords="5,6,123,53"/><area shape="rect" id="node4" href="interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider.html" title="Implement this to allow your class (or VirtualPathProvider subclass) to be used without registering i..." alt="" coords="147,6,471,53"/><area shape="rect" id="node6" href="interface_image_resizer_1_1_plugins_1_1_i_querystring_plugin.html" title="For plugins that access the query string (important!)" alt="" coords="496,6,779,53"/><area shape="rect" id="node8" href="interface_image_resizer_1_1_plugins_1_1_i_file_extension_plugin.html" title="For plugins that add support for new source file image extensions." alt="" coords="803,6,1109,53"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html">IPlugin</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#ae1d666e44ae1c8216214c4533a1da64f">Install</a> (<a class="el" href="class_image_resizer_1_1_configuration_1_1_config.html">Config</a> c)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Installs the plugin in the specified Config instance. The plugin must handle all the work of loading settings, registering the plugin etc.  <a href="#ae1d666e44ae1c8216214c4533a1da64f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a12fe3909ca314844788bfd46641006f2">Uninstall</a> (<a class="el" href="class_image_resizer_1_1_configuration_1_1_config.html">Config</a> c)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Uninstalls the plugin. Should reverse all changes made during Install.  <a href="#a12fe3909ca314844788bfd46641006f2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a9a4ff24e792a504fe1a8a40821ac2550">FileExists</a> (string virtualPath, NameValueCollection queryString)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the specified file and querystring indicate a PSD composition request.  <a href="#a9a4ff24e792a504fe1a8a40821ac2550"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_virtual_file.html">IVirtualFile</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a5c412d8253cbbdbb6b15fd404d08db09">GetFile</a> (string virtualPath, NameValueCollection queryString)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a virtual file instance for the specified specified file and querystring, if they indicate a PSD composition request. Otherwise, null is returned.  <a href="#a5c412d8253cbbdbb6b15fd404d08db09"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">IEnumerable&lt; string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a463f89727ea721c5d166f4569807de0f">GetSupportedQuerystringKeys</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">If the plugin reads any values from the querystring, the names of the keys should be specified here. This information is required so that the HttpModule knows when to handle an image request.  <a href="#a463f89727ea721c5d166f4569807de0f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">IEnumerable&lt; string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a779a2c25fbd26f15b8122c1f4af2f2f9">GetSupportedFileExtensions</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">If the plugin adds support for new file extensions (such as "psd"), they should be returned by this method.  <a href="#a779a2c25fbd26f15b8122c1f4af2f2f9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Stream&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a8428f7013e42f8d4a6bc8bf847fae598">ComposeStream</a> (string virtualPath, NameValueCollection queryString)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a stream to the composed file, encoded in the format requested by the querystring or fake extension.  <a href="#a8428f7013e42f8d4a6bc8bf847fae598"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">System.Drawing.Bitmap&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a08ed070326d9e4f8637a279ca7394080">ComposeBitmap</a> (string virtualPath, NameValueCollection queryString)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a Bitmap instance of the composed result.  <a href="#a08ed070326d9e4f8637a279ca7394080"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Size&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a632f42fc2078294c6c7d658a155678a6">GetPsdDimensions</a> (string virtualPath, NameValueCollection queryString)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the size of the PSD.  <a href="#a632f42fc2078294c6c7d658a155678a6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">IList&lt; <a class="el" href="interface_image_resizer_1_1_plugins_1_1_psd_composer_1_1_i_psd_layer.html">IPsdLayer</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a254fc91b19f5eac0e4bcb5e6745e120c">GetAllLayers</a> (string virtualPath, NameValueCollection queryString)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a collection of all the layers for the specified file (memcached)  <a href="#a254fc91b19f5eac0e4bcb5e6745e120c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">IList&lt; <a class="el" href="interface_image_resizer_1_1_plugins_1_1_psd_composer_1_1_i_psd_layer.html">IPsdLayer</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#aea2bdfcce28f129035890243ae7b3a48">GetVisibleTextLayers</a> (string virtualPath, NameValueCollection queryString)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a collection of all visible text layers for the file (memcached). Useful for building image maps.  <a href="#aea2bdfcce28f129035890243ae7b3a48"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">override bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a13024ab1a94ec975993798ff59bbcee9">FileExists</a> (string virtualPath)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">For internal VPP use only.  <a href="#a13024ab1a94ec975993798ff59bbcee9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">override VirtualFile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a79c4222fe7cade07b3d792b42ac844d3">GetFile</a> (string virtualPath)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">For internal VPP use only.  <a href="#a79c4222fe7cade07b3d792b42ac844d3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">override CacheDependency&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a66e6f630ae3fd204a54f1d677497db44">GetCacheDependency</a> (string virtualPath, System.Collections.IEnumerable virtualPathDependencies, DateTime utcStart)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">For internal VPP use only.  <a href="#a66e6f630ae3fd204a54f1d677497db44"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aea7a7e651bdcdb6137e837d60441dca0"></a><!-- doxytag: member="ImageResizer::Plugins::PsdComposer::PsdComposerPlugin::isStrictMode" ref="aea7a7e651bdcdb6137e837d60441dca0" args="()" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>isStrictMode</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_image_resizer_1_1_plugins_1_1_psd_composer_1_1_i_psd_renderer.html">IPsdRenderer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a081cb0470034a93aed7445bc65ed1a42">GetSelectedRenderer</a> (NameValueCollection queryString)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the renderer object selected in the querystring.  <a href="#a081cb0470034a93aed7445bc65ed1a42"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">KeyValuePair&lt; Size, IList<br class="typebreak"/>
&lt; <a class="el" href="interface_image_resizer_1_1_plugins_1_1_psd_composer_1_1_i_psd_layer.html">IPsdLayer</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a6fca6874ee6f5fc7972eea04b292646b">GetFileMetadata</a> (string virtualPath, NameValueCollection queryString)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a collection of all the layers for the specified file and the size of the file (memcached)  <a href="#a6fca6874ee6f5fc7972eea04b292646b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a94eafcc1bd526d2a6a01a2263e47c6fd"></a><!-- doxytag: member="ImageResizer::Plugins::PsdComposer::PsdComposerPlugin::IsPathPSDToCompose" ref="a94eafcc1bd526d2a6a01a2263e47c6fd" args="(string virtualPath, NameValueCollection queryString=null)" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a94eafcc1bd526d2a6a01a2263e47c6fd">IsPathPSDToCompose</a> (string virtualPath, NameValueCollection queryString=null)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">True if the file is a .psd.jpeg, .psd.png, etc file. <br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00022">22</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a08ed070326d9e4f8637a279ca7394080"></a><!-- doxytag: member="ImageResizer::Plugins::PsdComposer::PsdComposerPlugin::ComposeBitmap" ref="a08ed070326d9e4f8637a279ca7394080" args="(string virtualPath, NameValueCollection queryString)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">System.Drawing.Bitmap <a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a08ed070326d9e4f8637a279ca7394080">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.ComposeBitmap</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>queryString</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a Bitmap instance of the composed result. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00125">125</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                                        {
            <span class="comment">//Renderer object</span>
            IPsdRenderer renderer = <a class="code" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a081cb0470034a93aed7445bc65ed1a42" title="Returns the renderer object selected in the querystring.">GetSelectedRenderer</a>(queryString);

            <span class="comment">//Bitmap we will render to</span>
            System.Drawing.Bitmap b = null;

            MemCachedFile file = MemCachedFile.GetCachedFile(GetPhysicalPath(virtualPath));
            <span class="keyword">using</span> (Stream s = file.GetStream()) {
                <span class="comment">//Time just the parsing/rendering</span>
                Stopwatch swRender = <span class="keyword">new</span> Stopwatch();
                swRender.Start();

                IList&lt;IPsdLayer&gt; layers = null;
                Size size = Size.Empty;
                <span class="comment">//Use the selected renderer to parse the file and compose the layers, using this delegate callback to determine which layers to show.</span>
                b = renderer.Render(s, out layers, out size, BuildLayerCallback(queryString), BuildModifyLayerCallback(queryString));

                <span class="comment">//Save layers &amp; size for later use</span>
                file.SetSubkey(<span class="stringliteral">&quot;layers_&quot;</span> + renderer.ToString(), layers);
                file.SetSubkey(<span class="stringliteral">&quot;size_&quot;</span> + renderer.ToString(), size);


                <span class="comment">//How fast?</span>
                swRender.Stop();
                trace(<span class="stringliteral">&quot;Using encoder &quot;</span> + renderer.ToString() + <span class="stringliteral">&quot;, rendering stream to a composed Bitmap instance took &quot;</span> + swRender.ElapsedMilliseconds.ToString() + <span class="stringliteral">&quot;ms&quot;</span>);
            }
            <span class="keywordflow">return</span> b;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a8428f7013e42f8d4a6bc8bf847fae598"></a><!-- doxytag: member="ImageResizer::Plugins::PsdComposer::PsdComposerPlugin::ComposeStream" ref="a8428f7013e42f8d4a6bc8bf847fae598" args="(string virtualPath, NameValueCollection queryString)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Stream <a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a8428f7013e42f8d4a6bc8bf847fae598">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.ComposeStream</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>queryString</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a stream to the composed file, encoded in the format requested by the querystring or fake extension. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00098">98</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                         {

            Stopwatch sw = <span class="keyword">new</span> Stopwatch();
            sw.Start();

            System.Drawing.Bitmap b = <a class="code" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a08ed070326d9e4f8637a279ca7394080" title="Returns a Bitmap instance of the composed result.">ComposeBitmap</a>(virtualPath, queryString);
            <span class="comment">//Memory stream for encoding the file</span>
            MemoryStream ms = <span class="keyword">new</span> MemoryStream();
            <span class="comment">//Encode image to memory stream, then seek the stream to byte 0</span>
            <span class="keyword">using</span> (b) {
                <span class="comment">//Use whatever settings appear in the URL </span>
                <a class="code" href="interface_image_resizer_1_1_encoding_1_1_i_encoder.html" title="An image encoder. Exposes methods for suitability checking, encoding, transparency compatibility chec...">IEncoder</a> encoder = c.<a class="code" href="class_image_resizer_1_1_configuration_1_1_config.html#aa8cdada7d657ec3078e5d16310f198f7" title="Access and modify plugins.">Plugins</a>.<a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a2e4ab3b7cd725d4048be67bc21725eb4" title="Returns an instance of the first encoder that claims to be able to handle the specified settings...">GetEncoder</a>(<span class="keyword">new</span> ImageResizer.ResizeSettings(queryString), virtualPath);
                encoder.<a class="code" href="interface_image_resizer_1_1_encoding_1_1_i_encoder.html#a9cf9397f4528608e91785410afb73eb6" title="Encodes the image to the specified stream.">Write</a>(b, ms);
                ms.Seek(0, SeekOrigin.Begin); <span class="comment">//Reset stream for reading</span>
            }

            sw.Stop();
            trace(<span class="stringliteral">&quot;Total time, including encoding: &quot;</span> + sw.ElapsedMilliseconds.ToString() + <span class="stringliteral">&quot;ms&quot;</span>);

            <span class="keywordflow">return</span> ms;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a9a4ff24e792a504fe1a8a40821ac2550"></a><!-- doxytag: member="ImageResizer::Plugins::PsdComposer::PsdComposerPlugin::FileExists" ref="a9a4ff24e792a504fe1a8a40821ac2550" args="(string virtualPath, NameValueCollection queryString)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a9a4ff24e792a504fe1a8a40821ac2550">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.FileExists</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>queryString</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if the specified file and querystring indicate a PSD composition request. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">virtualPath</td><td></td></tr>
    <tr><td class="paramname">queryString</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Implements <a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider.html#adc1f2caa76c242e3c0bb8ed2d824f9c3">ImageResizer.Plugins.IVirtualImageProvider</a>.</p>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00046">46</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                    {
            <span class="keywordflow">return</span> <a class="code" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a94eafcc1bd526d2a6a01a2263e47c6fd" title="True if the file is a .psd.jpeg, .psd.png, etc file. ">IsPathPSDToCompose</a>(virtualPath,queryString) &amp;&amp; System.IO.File.Exists(GetPhysicalPath(virtualPath));
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a13024ab1a94ec975993798ff59bbcee9"></a><!-- doxytag: member="ImageResizer::Plugins::PsdComposer::PsdComposerPlugin::FileExists" ref="a13024ab1a94ec975993798ff59bbcee9" args="(string virtualPath)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">override bool <a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a9a4ff24e792a504fe1a8a40821ac2550">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.FileExists</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>For internal VPP use only. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">virtualPath</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00403">403</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <span class="keywordflow">if</span> (<a class="code" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a94eafcc1bd526d2a6a01a2263e47c6fd" title="True if the file is a .psd.jpeg, .psd.png, etc file. ">IsPathPSDToCompose</a>(virtualPath))
                <span class="keywordflow">return</span> System.IO.File.Exists(GetPhysicalPath(virtualPath));
            <span class="keywordflow">else</span>
                <span class="keywordflow">return</span> Previous.FileExists(virtualPath);
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a254fc91b19f5eac0e4bcb5e6745e120c"></a><!-- doxytag: member="ImageResizer::Plugins::PsdComposer::PsdComposerPlugin::GetAllLayers" ref="a254fc91b19f5eac0e4bcb5e6745e120c" args="(string virtualPath, NameValueCollection queryString)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IList&lt;<a class="el" href="interface_image_resizer_1_1_plugins_1_1_psd_composer_1_1_i_psd_layer.html">IPsdLayer</a>&gt; <a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a254fc91b19f5eac0e4bcb5e6745e120c">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetAllLayers</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>queryString</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a collection of all the layers for the specified file (memcached) </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">virtualPath</td><td></td></tr>
    <tr><td class="paramname">queryString</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00171">171</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                                  {
            <span class="keywordflow">return</span> <a class="code" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a6fca6874ee6f5fc7972eea04b292646b" title="Returns a collection of all the layers for the specified file and the size of the file (memcached)...">GetFileMetadata</a>(virtualPath, queryString).Value;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a66e6f630ae3fd204a54f1d677497db44"></a><!-- doxytag: member="ImageResizer::Plugins::PsdComposer::PsdComposerPlugin::GetCacheDependency" ref="a66e6f630ae3fd204a54f1d677497db44" args="(string virtualPath, System.Collections.IEnumerable virtualPathDependencies, DateTime utcStart)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">override CacheDependency <a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a66e6f630ae3fd204a54f1d677497db44">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetCacheDependency</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">System.Collections.IEnumerable&#160;</td>
          <td class="paramname"><em>virtualPathDependencies</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DateTime&#160;</td>
          <td class="paramname"><em>utcStart</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>For internal VPP use only. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">virtualPath</td><td></td></tr>
    <tr><td class="paramname">virtualPathDependencies</td><td></td></tr>
    <tr><td class="paramname">utcStart</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00430">430</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <span class="comment">//Maybe the database is also involved? </span>
            <span class="keywordflow">return</span> Previous.GetCacheDependency(virtualPath, virtualPathDependencies, utcStart);
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a5c412d8253cbbdbb6b15fd404d08db09"></a><!-- doxytag: member="ImageResizer::Plugins::PsdComposer::PsdComposerPlugin::GetFile" ref="a5c412d8253cbbdbb6b15fd404d08db09" args="(string virtualPath, NameValueCollection queryString)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_virtual_file.html">IVirtualFile</a> <a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a5c412d8253cbbdbb6b15fd404d08db09">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetFile</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>queryString</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a virtual file instance for the specified specified file and querystring, if they indicate a PSD composition request. Otherwise, null is returned. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">virtualPath</td><td></td></tr>
    <tr><td class="paramname">queryString</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Implements <a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider.html#aa3bb3191e4ed5cbf957c961d607d611b">ImageResizer.Plugins.IVirtualImageProvider</a>.</p>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00057">57</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                         {
            <span class="keywordflow">if</span> (<a class="code" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a94eafcc1bd526d2a6a01a2263e47c6fd" title="True if the file is a .psd.jpeg, .psd.png, etc file. ">IsPathPSDToCompose</a>(virtualPath,queryString) &amp;&amp; System.IO.File.Exists(GetPhysicalPath(virtualPath)))
                <span class="keywordflow">return</span> <span class="keyword">new</span> PsdVirtualFile(virtualPath, <span class="keyword">this</span>);
            <span class="keywordflow">else</span>
                <span class="keywordflow">return</span> null;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a79c4222fe7cade07b3d792b42ac844d3"></a><!-- doxytag: member="ImageResizer::Plugins::PsdComposer::PsdComposerPlugin::GetFile" ref="a79c4222fe7cade07b3d792b42ac844d3" args="(string virtualPath)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">override VirtualFile <a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a5c412d8253cbbdbb6b15fd404d08db09">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetFile</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>For internal VPP use only. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">virtualPath</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00415">415</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <span class="keywordflow">if</span> (<a class="code" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a94eafcc1bd526d2a6a01a2263e47c6fd" title="True if the file is a .psd.jpeg, .psd.png, etc file. ">IsPathPSDToCompose</a>(virtualPath) &amp;&amp; System.IO.File.Exists(GetPhysicalPath(virtualPath)))
                <span class="keywordflow">return</span> <span class="keyword">new</span> PsdVirtualFile(virtualPath, <span class="keyword">this</span>);
            <span class="keywordflow">else</span>
                <span class="keywordflow">return</span> Previous.GetFile(virtualPath);
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a6fca6874ee6f5fc7972eea04b292646b"></a><!-- doxytag: member="ImageResizer::Plugins::PsdComposer::PsdComposerPlugin::GetFileMetadata" ref="a6fca6874ee6f5fc7972eea04b292646b" args="(string virtualPath, NameValueCollection queryString)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">KeyValuePair&lt;Size,IList&lt;<a class="el" href="interface_image_resizer_1_1_plugins_1_1_psd_composer_1_1_i_psd_layer.html">IPsdLayer</a>&gt; &gt; <a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a6fca6874ee6f5fc7972eea04b292646b">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetFileMetadata</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>queryString</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a collection of all the layers for the specified file and the size of the file (memcached) </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">virtualPath</td><td></td></tr>
    <tr><td class="paramname">queryString</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00180">180</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                                                           {
            Stopwatch sw = <span class="keyword">new</span> Stopwatch();
            sw.Start();

            <span class="comment">//Renderer object</span>
            IPsdRenderer renderer = <a class="code" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a081cb0470034a93aed7445bc65ed1a42" title="Returns the renderer object selected in the querystring.">GetSelectedRenderer</a>(queryString);
            <span class="comment">//File</span>
            MemCachedFile file = MemCachedFile.GetCachedFile(GetPhysicalPath(virtualPath));
            <span class="comment">//key</span>
            <span class="keywordtype">string</span> layersKey = <span class="stringliteral">&quot;layers_&quot;</span> + renderer.ToString();
            <span class="keywordtype">string</span> sizeKey = <span class="stringliteral">&quot;size_&quot;</span> + renderer.ToString();

            <span class="comment">//Try getting from the cache first</span>
            IList&lt;IPsdLayer&gt; layers = file.GetSubkey(layersKey) as IList&lt;IPsdLayer&gt;;
            Size size = file.GetSubkey(sizeKey) is Size ? (Size)file.GetSubkey(sizeKey) : Size.Empty;
            <span class="keywordflow">if</span> (layers == null) {
                <span class="comment">//Time just the parsing</span>
                Stopwatch swRender = <span class="keyword">new</span> Stopwatch();
                swRender.Start();

                layers = renderer.GetLayersAndSize(file.GetStream(), out size);

                <span class="comment">//Save to cache for later</span>
                file.SetSubkey(layersKey, layers);
                file.SetSubkey(sizeKey, size);
                <span class="comment">//How fast?</span>
                swRender.Stop();
                trace(<span class="stringliteral">&quot;Using decoder &quot;</span> + renderer.ToString() + <span class="stringliteral">&quot;,parsing file and enumerating layers took &quot;</span> + swRender.ElapsedMilliseconds.ToString() + <span class="stringliteral">&quot;ms&quot;</span>);
            }


            sw.Stop();
            trace(<span class="stringliteral">&quot;Total time for enumerating, including file reading: &quot;</span> + sw.ElapsedMilliseconds.ToString() + <span class="stringliteral">&quot;ms&quot;</span>);
            <span class="keywordflow">return</span> <span class="keyword">new</span> KeyValuePair&lt;Size,IList&lt;IPsdLayer&gt;&gt;(size,layers);
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a632f42fc2078294c6c7d658a155678a6"></a><!-- doxytag: member="ImageResizer::Plugins::PsdComposer::PsdComposerPlugin::GetPsdDimensions" ref="a632f42fc2078294c6c7d658a155678a6" args="(string virtualPath, NameValueCollection queryString)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Size <a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a632f42fc2078294c6c7d658a155678a6">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetPsdDimensions</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>queryString</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the size of the PSD. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">virtualPath</td><td></td></tr>
    <tr><td class="paramname">queryString</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00161">161</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                          {
            <span class="keywordflow">return</span> <a class="code" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a6fca6874ee6f5fc7972eea04b292646b" title="Returns a collection of all the layers for the specified file and the size of the file (memcached)...">GetFileMetadata</a>(virtualPath, queryString).Key;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a081cb0470034a93aed7445bc65ed1a42"></a><!-- doxytag: member="ImageResizer::Plugins::PsdComposer::PsdComposerPlugin::GetSelectedRenderer" ref="a081cb0470034a93aed7445bc65ed1a42" args="(NameValueCollection queryString)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_image_resizer_1_1_plugins_1_1_psd_composer_1_1_i_psd_renderer.html">IPsdRenderer</a> <a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a081cb0470034a93aed7445bc65ed1a42">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetSelectedRenderer</a> </td>
          <td>(</td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>queryString</em></td><td>)</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the renderer object selected in the querystring. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00083">83</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><pre class="fragment">        {
            <span class="comment">//Renderer object</span>
            IPsdRenderer renderer = null;
            <span class="comment">//There is only ONE renderer now - The Agurigma one was horrible</span>
            renderer = <span class="keyword">new</span> PsdPluginRenderer();
            <span class="keywordflow">return</span> renderer;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a779a2c25fbd26f15b8122c1f4af2f2f9"></a><!-- doxytag: member="ImageResizer::Plugins::PsdComposer::PsdComposerPlugin::GetSupportedFileExtensions" ref="a779a2c25fbd26f15b8122c1f4af2f2f9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IEnumerable&lt;string&gt; <a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a779a2c25fbd26f15b8122c1f4af2f2f9">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetSupportedFileExtensions</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>If the plugin adds support for new file extensions (such as "psd"), they should be returned by this method. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Implements <a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_file_extension_plugin.html#a53672fd2aee854a01f313f099c95b330">ImageResizer.Plugins.IFileExtensionPlugin</a>.</p>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00069">69</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                {
            <span class="keywordflow">return</span> <span class="keyword">new</span> <span class="keywordtype">string</span>[] { <span class="stringliteral">&quot;psd&quot;</span> };
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a463f89727ea721c5d166f4569807de0f"></a><!-- doxytag: member="ImageResizer::Plugins::PsdComposer::PsdComposerPlugin::GetSupportedQuerystringKeys" ref="a463f89727ea721c5d166f4569807de0f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IEnumerable&lt;string&gt; <a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a463f89727ea721c5d166f4569807de0f">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetSupportedQuerystringKeys</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>If the plugin reads any values from the querystring, the names of the keys should be specified here. This information is required so that the HttpModule knows when to handle an image request. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Implements <a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_querystring_plugin.html#aaa1c43be9b92caf1f1caa81dc9e9f4bf">ImageResizer.Plugins.IQuerystringPlugin</a>.</p>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00065">65</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                 {
            <span class="keywordflow">return</span> PsdCommandBuilder.GetSupportedQuerystringKeys();
        }
</pre></div>
</div>
</div>
<a class="anchor" id="aea2bdfcce28f129035890243ae7b3a48"></a><!-- doxytag: member="ImageResizer::Plugins::PsdComposer::PsdComposerPlugin::GetVisibleTextLayers" ref="aea2bdfcce28f129035890243ae7b3a48" args="(string virtualPath, NameValueCollection queryString)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IList&lt;<a class="el" href="interface_image_resizer_1_1_plugins_1_1_psd_composer_1_1_i_psd_layer.html">IPsdLayer</a>&gt; <a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#aea2bdfcce28f129035890243ae7b3a48">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.GetVisibleTextLayers</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>queryString</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a collection of all visible text layers for the file (memcached). Useful for building image maps. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">virtualPath</td><td></td></tr>
    <tr><td class="paramname">queryString</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00222">222</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                                          {

            <span class="comment">//Get all layers</span>
            IList&lt;IPsdLayer&gt; layers = <a class="code" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a254fc91b19f5eac0e4bcb5e6745e120c" title="Returns a collection of all the layers for the specified file (memcached)">GetAllLayers</a>(virtualPath, queryString);


            Stopwatch sw = <span class="keyword">new</span> Stopwatch();
            sw.Start();
            <span class="comment">//Now, time to filter layers to those that would be showing on the image right now.</span>
            IList&lt;IPsdLayer&gt; filtered = <span class="keyword">new</span> List&lt;IPsdLayer&gt;();

            <span class="comment">//Generate a callback just like the one used in the renderer for filtering</span>
            ShowLayerDelegate callback = BuildLayerCallback(queryString);

            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; layers.Count; i++) {
                <span class="keywordflow">if</span> (layers[i].IsTextLayer &amp;&amp; callback(layers[i].Index, layers[i].Name, layers[i].Visible)) {
                    filtered.Add(layers[i]);
                }
            }

            sw.Stop();
            trace(<span class="stringliteral">&quot;Time for filtering layers: &quot;</span> + sw.ElapsedMilliseconds.ToString() + <span class="stringliteral">&quot;ms&quot;</span>);
            <span class="keywordflow">return</span> filtered;

        }
</pre></div>
</div>
</div>
<a class="anchor" id="ae1d666e44ae1c8216214c4533a1da64f"></a><!-- doxytag: member="ImageResizer::Plugins::PsdComposer::PsdComposerPlugin::Install" ref="ae1d666e44ae1c8216214c4533a1da64f" args="(Config c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html">IPlugin</a> <a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#ae1d666e44ae1c8216214c4533a1da64f">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.Install</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_image_resizer_1_1_configuration_1_1_config.html">Config</a>&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Installs the plugin in the specified Config instance. The plugin must handle all the work of loading settings, registering the plugin etc. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Implements <a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html#acca01a73bba24037b9b3ade1b4e3c134">ImageResizer.Plugins.IPlugin</a>.</p>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00029">29</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                         {
            this.c = c;
            this.c.<a class="code" href="class_image_resizer_1_1_configuration_1_1_config.html#aa8cdada7d657ec3078e5d16310f198f7" title="Access and modify plugins.">Plugins</a>.<a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a24a5d36dc59eee7d980a8e9b4d00ead1" title="Only for use by plugins during IPlugin.Install. Call Plugin.Install instead of this method...">add_plugin</a>(<span class="keyword">this</span>);
            <span class="keywordflow">return</span> <span class="keyword">this</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a12fe3909ca314844788bfd46641006f2"></a><!-- doxytag: member="ImageResizer::Plugins::PsdComposer::PsdComposerPlugin::Uninstall" ref="a12fe3909ca314844788bfd46641006f2" args="(Config c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_image_resizer_1_1_plugins_1_1_psd_composer_1_1_psd_composer_plugin.html#a12fe3909ca314844788bfd46641006f2">ImageResizer.Plugins.PsdComposer.PsdComposerPlugin.Uninstall</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_image_resizer_1_1_configuration_1_1_config.html">Config</a>&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Uninstalls the plugin. Should reverse all changes made during Install. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Implements <a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html#a047c1f46ce451fefc5f2ba3c16b64e8f">ImageResizer.Plugins.IPlugin</a>.</p>

<p>Definition at line <a class="el" href="_psd_composer_plugin_8cs_source.html#l00035">35</a> of file <a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                        {
            c.<a class="code" href="class_image_resizer_1_1_configuration_1_1_config.html#aa8cdada7d657ec3078e5d16310f198f7" title="Access and modify plugins.">Plugins</a>.<a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a0aae69c8ce761b0b5869fd63e2bcb863" title="For use only by plugins during .Uninstall. Removes the specified plugin from AllPlugins, QuerystringPlugins, CachingSystems, ImageEncoders, and ImageBuiderExtensions, based on which interfaces the instance implements. Plugins may register event handlers and modify settings - thus you should use the plugin&#39;s method to uninstall them vs. using this method.">remove_plugin</a>(<span class="keyword">this</span>);
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>C:/Users/Administrator/Documents/resizer/Plugins/PsdComposer/<a class="el" href="_psd_composer_plugin_8cs_source.html">PsdComposerPlugin.cs</a></li>
</ul>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Events</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
