<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ImageResizer: C:/Users/nathanael/Documents/resizer/Core/Plugins/Basic/ImageHandlerSyntax.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="imageresizer-logo-00aec4.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">ImageResizer
   &#160;<span id="projectnumber">3.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Events</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_c6310732a22f63c0c2fc5595561e68f1.html">Core</a></li><li class="navelem"><a class="el" href="dir_364894e5d93bffffc1006b71d92cbe0f.html">Plugins</a></li><li class="navelem"><a class="el" href="dir_60328e56982a9e41f408510e21651238.html">Basic</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ImageHandlerSyntax.cs</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">using</span> System;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">using</span> System.Collections.Generic;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">using</span> System.Text;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">using</span> ImageResizer.Configuration;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">using</span> System.Web.Hosting;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">using</span> System.Collections.Specialized;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">namespace </span>ImageResizer.Plugins.Basic {<span class="comment"></span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">    /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">    /// Adds URL syntax support for legacy projects:</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">    /// http://webimageresizer.codeplex.com/, </span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">    /// http://imagehandler.codeplex.com/, </span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">    /// http://bbimagehandler.codeplex.com/, </span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">    /// DAMP: http://our.umbraco.org/projects/backoffice-extensions/digibiz-advanced-media-picker,</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">    /// Support for http://bip.codeplex.com/ and http://dynamicimageprocess.codeplex.com/ urls is default since w/h are supported.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">    /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_plugins_1_1_basic_1_1_image_handler_syntax.html">   17</a></span>&#160;<span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="class_image_resizer_1_1_plugins_1_1_basic_1_1_image_handler_syntax.html">ImageHandlerSyntax</a>:<a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html">IPlugin</a> {</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        <a class="code" href="class_image_resizer_1_1_configuration_1_1_config.html">Config</a> c; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_plugins_1_1_basic_1_1_image_handler_syntax.html#a22e64888fff4c1df8a11bef266c19183">   21</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html">IPlugin</a> <a class="code" href="class_image_resizer_1_1_plugins_1_1_basic_1_1_image_handler_syntax.html#a22e64888fff4c1df8a11bef266c19183">Install</a>(<a class="code" href="class_image_resizer_1_1_configuration_1_1_config.html">Config</a> c) {</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;            this.c = c;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;            c.Plugins.add_plugin(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;            c.Pipeline.PostAuthorizeRequestStart += Pipeline_PostAuthorizeRequestStart;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">this</span>;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        }</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        <span class="keywordtype">void</span> Pipeline_PostAuthorizeRequestStart(System.Web.IHttpModule sender, System.Web.HttpContext context) {</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;            <span class="keywordtype">string</span> prefix = HostingEnvironment.ApplicationVirtualPath.TrimEnd(<span class="charliteral">&#39;/&#39;</span>) + <span class="charliteral">&#39;/&#39;</span>;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;            <span class="keywordflow">if</span> (c.Pipeline.PreRewritePath.Equals(prefix + <span class="stringliteral">&quot;ImageHandler.ashx&quot;</span>, StringComparison.OrdinalIgnoreCase) &amp;&amp;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;                !string.IsNullOrEmpty(context.Request.QueryString[<span class="stringliteral">&quot;src&quot;</span>])) {</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                <span class="comment">//WebImageResizer: http://webimageresizer.codeplex.com/</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                <span class="comment">/*src: Key to an image, can be a relative url, guid or whatever you want</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">                width: Width in pixels without any unit specification</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">                height: Height in pixels without any unit specification</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">                format: Formats to output to one of the image formats: png, gif, jpg, tif</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">                greyscale: any non empty value triggers grey scaling</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">                rotate: Invariant Culture floating point number in degrees where 360 is a complete rotation.</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">                zoom: Invariant Culture floating point number indicating scale value. If 2 is specified the output will be double the original size.*/</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                <span class="comment">//Fix path</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                c.Pipeline.PreRewritePath = prefix + c.Pipeline.ModifiedQueryString[<span class="stringliteral">&quot;src&quot;</span>];</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                c.Pipeline.ModifiedQueryString.Remove(<span class="stringliteral">&quot;src&quot;</span>);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                <span class="comment">//Grayscale and zoom not supported yet</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrEmpty(c.Pipeline.ModifiedQueryString[<span class="stringliteral">&quot;s.grayscale&quot;</span>]) &amp;&amp;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                    !string.IsNullOrEmpty(c.Pipeline.ModifiedQueryString[<span class="stringliteral">&quot;greyscale&quot;</span>])) c.Pipeline.ModifiedQueryString[<span class="stringliteral">&quot;s.grayscale&quot;</span>] = <span class="stringliteral">&quot;true&quot;</span>;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrEmpty(c.Pipeline.ModifiedQueryString[<span class="stringliteral">&quot;s.invert&quot;</span>]) &amp;&amp;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                    !string.IsNullOrEmpty(c.Pipeline.ModifiedQueryString[<span class="stringliteral">&quot;invert&quot;</span>])) c.Pipeline.ModifiedQueryString[<span class="stringliteral">&quot;s.invert&quot;</span>] = <span class="stringliteral">&quot;true&quot;</span>;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                <span class="comment">//Mimic aspect-ratio destruction</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrEmpty(c.Pipeline.ModifiedQueryString[<span class="stringliteral">&quot;stretch&quot;</span>]) &amp;&amp; string.IsNullOrEmpty(c.Pipeline.ModifiedQueryString[<span class="stringliteral">&quot;mode&quot;</span>]))</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                    c.Pipeline.ModifiedQueryString[<span class="stringliteral">&quot;mode&quot;</span>] = <span class="stringliteral">&quot;stretch&quot;</span>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> ((c.Pipeline.PreRewritePath.Equals(prefix + <span class="stringliteral">&quot;imghandler.ashx&quot;</span>, StringComparison.OrdinalIgnoreCase) ||</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                       c.Pipeline.PreRewritePath.EndsWith(<span class="stringliteral">&quot;DAMP_ImagePreview.ashx&quot;</span>, StringComparison.OrdinalIgnoreCase)) &amp;&amp; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                !string.IsNullOrEmpty(context.Request.QueryString[<span class="stringliteral">&quot;img&quot;</span>])) {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                <span class="comment">//Image handler for ASP.NET 2.0: http://www.yoursite.com/imghandler.ashx?h=100&amp;w=100&amp;img=yourfolder/yourimage.jpg </span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                <span class="comment">// DAMP: http://our.umbraco.org/projects/backoffice-extensions/digibiz-advanced-media-picker</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                <span class="keywordtype">bool</span> isDAMP = c.Pipeline.PreRewritePath.EndsWith(<span class="stringliteral">&quot;DAMP_ImagePreview.ashx&quot;</span>, StringComparison.OrdinalIgnoreCase);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                <span class="comment">//Fix path</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                c.Pipeline.PreRewritePath = prefix + c.Pipeline.ModifiedQueryString[<span class="stringliteral">&quot;img&quot;</span>];</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                <span class="comment">//Edit querystring</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                c.Pipeline.ModifiedQueryString[<span class="stringliteral">&quot;width&quot;</span>] = c.Pipeline.ModifiedQueryString[<span class="stringliteral">&quot;w&quot;</span>];</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                c.Pipeline.ModifiedQueryString[<span class="stringliteral">&quot;height&quot;</span>] = c.Pipeline.ModifiedQueryString[<span class="stringliteral">&quot;h&quot;</span>];</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                c.Pipeline.ModifiedQueryString.Remove(<span class="stringliteral">&quot;w&quot;</span>);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                c.Pipeline.ModifiedQueryString.Remove(<span class="stringliteral">&quot;h&quot;</span>);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                c.Pipeline.ModifiedQueryString.Remove(<span class="stringliteral">&quot;img&quot;</span>);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                <span class="comment">//Mimic aspect-ratio destruction (imghandler only)</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                <span class="keywordflow">if</span> (!isDAMP &amp;&amp; <span class="keywordtype">string</span>.IsNullOrEmpty(c.Pipeline.ModifiedQueryString[<span class="stringliteral">&quot;mode&quot;</span>]) &amp;&amp; string.IsNullOrEmpty(c.Pipeline.ModifiedQueryString[<span class="stringliteral">&quot;stretch&quot;</span>]))</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                    c.Pipeline.ModifiedQueryString[<span class="stringliteral">&quot;mode&quot;</span>] = <span class="stringliteral">&quot;stretch&quot;</span>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c.Pipeline.PreRewritePath.Equals(prefix + <span class="stringliteral">&quot;bbimagehandler.ashx&quot;</span>, StringComparison.OrdinalIgnoreCase) &amp;&amp;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                 !string.IsNullOrEmpty(context.Request.QueryString[<span class="stringliteral">&quot;file&quot;</span>])) {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                <span class="comment">//Only file requests for bbimagehandler are supported. SQL and website thumbnails are not.</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                <span class="comment">//bbimagehandler.ashx?File=Winter.jpg&amp;width=150&amp;ResizeMode=FitSquare&amp;BackColor=#F58719&amp;border=10&quot;</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                <span class="comment">/*width: width in pixel of resulting image</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">                height: height in pixel of resulting image</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">                resizemode:</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">                fit: Fit mode maintains the aspect ratio of the original image while ensuring that the dimensions of the result do not exceed the maximum values for the resize transformation. (Needs width or height parameter)</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">                fitsquare: Resizes the image with the given width as its longest side (depending on image direction) and maintains the aspect ratio. The image will be centered in a square area of the chosen background color (Needs width parameter, backcolor optional)</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">                crop: Crop resizes the image and removes parts of it to ensure that the dimensions of the result are exactly as specified by the transformation.(Needs width and height parameter)</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">                backcolor: color of background or/and  border when resizemode is fitsquare or fit.</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">                border: border width in pixels around the image (added to width / height) when resizemode is fitsquare or fit.</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">                format: jpg,png,bmp or gif, defines the format of the resulting image</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">                 */</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                NameValueCollection q = c.Pipeline.ModifiedQueryString;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                <span class="comment">//Fix path</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                c.Pipeline.PreRewritePath = prefix + q[<span class="stringliteral">&quot;file&quot;</span>];</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                q.Remove(<span class="stringliteral">&quot;file&quot;</span>);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                <span class="keywordflow">if</span> (<span class="stringliteral">&quot;fit&quot;</span>.Equals(q[<span class="stringliteral">&quot;resizemode&quot;</span>])) {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                    q[<span class="stringliteral">&quot;maxwidth&quot;</span>] = q[<span class="stringliteral">&quot;width&quot;</span>];</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                    q[<span class="stringliteral">&quot;maxheight&quot;</span>] = q[<span class="stringliteral">&quot;height&quot;</span>];</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                    q.Remove(<span class="stringliteral">&quot;width&quot;</span>);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                    q.Remove(<span class="stringliteral">&quot;height&quot;</span>);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                    q.Remove(<span class="stringliteral">&quot;resizemode&quot;</span>);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="stringliteral">&quot;fitsquare&quot;</span>.Equals(q[<span class="stringliteral">&quot;resizemode&quot;</span>])) {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                    q[<span class="stringliteral">&quot;height&quot;</span>] = q[<span class="stringliteral">&quot;width&quot;</span>]; <span class="comment">//Copy width, make it a square</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="stringliteral">&quot;crop&quot;</span>.Equals(q[<span class="stringliteral">&quot;resizemode&quot;</span>])) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                    q[<span class="stringliteral">&quot;crop&quot;</span>] = <span class="stringliteral">&quot;auto&quot;</span>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                }</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                <span class="keywordflow">if</span> (!<span class="keywordtype">string</span>.IsNullOrEmpty(q[<span class="stringliteral">&quot;backcolor&quot;</span>])) {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                    q[<span class="stringliteral">&quot;bgcolor&quot;</span>] = q[<span class="stringliteral">&quot;backcolor&quot;</span>];</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                    q.Remove(<span class="stringliteral">&quot;backcolor&quot;</span>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                }</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                <span class="keywordflow">if</span> (!<span class="keywordtype">string</span>.IsNullOrEmpty(q[<span class="stringliteral">&quot;border&quot;</span>])) {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                    q[<span class="stringliteral">&quot;borderWidth&quot;</span>] = q[<span class="stringliteral">&quot;border&quot;</span>];</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                    q.Remove(<span class="stringliteral">&quot;border&quot;</span>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            }</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;       </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> Uninstall(Configuration.Config c) {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            c.Plugins.remove_plugin(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            c.Pipeline.PostAuthorizeRequestStart -= Pipeline_PostAuthorizeRequestStart;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_config_html"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_config.html">ImageResizer.Configuration.Config</a></div><div class="ttdef"><b>Definition:</b> <a href="_config_8cs_source.html#l00022">Config.cs:22</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_plugins_1_1_basic_1_1_image_handler_syntax_html_a22e64888fff4c1df8a11bef266c19183"><div class="ttname"><a href="class_image_resizer_1_1_plugins_1_1_basic_1_1_image_handler_syntax.html#a22e64888fff4c1df8a11bef266c19183">ImageResizer.Plugins.Basic.ImageHandlerSyntax.Install</a></div><div class="ttdeci">IPlugin Install(Config c)</div><div class="ttdoc">Installs the plugin in the specified Config instance. The plugin must handle all the work of loading ...</div><div class="ttdef"><b>Definition:</b> <a href="_image_handler_syntax_8cs_source.html#l00021">ImageHandlerSyntax.cs:21</a></div></div>
<div class="ttc" id="interface_image_resizer_1_1_plugins_1_1_i_plugin_html"><div class="ttname"><a href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html">ImageResizer.Plugins.IPlugin</a></div><div class="ttdoc">All plugins must implement this. Enables web.config addition and removal. </div><div class="ttdef"><b>Definition:</b> <a href="_i_plugin_8cs_source.html#l00011">IPlugin.cs:11</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_plugins_1_1_basic_1_1_image_handler_syntax_html"><div class="ttname"><a href="class_image_resizer_1_1_plugins_1_1_basic_1_1_image_handler_syntax.html">ImageResizer.Plugins.Basic.ImageHandlerSyntax</a></div><div class="ttdoc">Adds URL syntax support for legacy projects: http://webimageresizer.codeplex.com/, http://imagehandler.codeplex.com/, http://bbimagehandler.codeplex.com/, DAMP: http://our.umbraco.org/projects/backoffice-extensions/digibiz-advanced-media-picker, Support for http://bip.codeplex.com/ and http://dynamicimageprocess.codeplex.com/ urls is default since w/h are supported. </div><div class="ttdef"><b>Definition:</b> <a href="_image_handler_syntax_8cs_source.html#l00017">ImageHandlerSyntax.cs:17</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
