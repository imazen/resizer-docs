<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ImageResizer: ImageResizer.Plugins.S3Reader2.S3VirtualPathProvider Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="imageresizer-logo-00aec4.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">ImageResizer
   &#160;<span id="projectnumber">3.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Events</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_image_resizer.html">ImageResizer</a></li><li class="navelem"><a class="el" href="namespace_image_resizer_1_1_plugins.html">Plugins</a></li><li class="navelem"><a class="el" href="namespace_image_resizer_1_1_plugins_1_1_s3_reader2.html">S3Reader2</a></li><li class="navelem"><a class="el" href="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider.html">S3VirtualPathProvider</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="#events">Events</a> &#124;
<a href="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ImageResizer.Plugins.S3Reader2.S3VirtualPathProvider Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Allows clients to request objects located on another amazon S3 server through this server. Allows URL rewriting.  
 <a href="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for ImageResizer.Plugins.S3Reader2.S3VirtualPathProvider:</div>
<div class="dyncontent">
<div class="center"><img src="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider__inherit__graph.png" border="0" usemap="#_image_resizer_8_plugins_8_s3_reader2_8_s3_virtual_path_provider_inherit__map" alt="Inheritance graph"/></div>
<map name="_image_resizer_8_plugins_8_s3_reader2_8_s3_virtual_path_provider_inherit__map" id="_image_resizer_8_plugins_8_s3_reader2_8_s3_virtual_path_provider_inherit__map">
<area shape="rect" id="node4" href="interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider.html" title="Implement this to allow your class (or VirtualPathProvider subclass) to be used without registering i..." alt="" coords="323,6,647,53"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for ImageResizer.Plugins.S3Reader2.S3VirtualPathProvider:</div>
<div class="dyncontent">
<div class="center"><img src="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider__coll__graph.png" border="0" usemap="#_image_resizer_8_plugins_8_s3_reader2_8_s3_virtual_path_provider_coll__map" alt="Collaboration graph"/></div>
<map name="_image_resizer_8_plugins_8_s3_reader2_8_s3_virtual_path_provider_coll__map" id="_image_resizer_8_plugins_8_s3_reader2_8_s3_virtual_path_provider_coll__map">
<area shape="rect" id="node4" href="interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider.html" title="Implement this to allow your class (or VirtualPathProvider subclass) to be used without registering i..." alt="" coords="323,6,647,53"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acf62e5af074bea845229dc77154d7958"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acf62e5af074bea845229dc77154d7958"></a>
delegate void&#160;</td><td class="memItemRight" valign="bottom"><b>RewriteBucketAndKeyPath</b> (<a class="el" href="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider.html">S3VirtualPathProvider</a> sender, <a class="el" href="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_path_event_args.html">S3PathEventArgs</a> e)</td></tr>
<tr class="separator:acf62e5af074bea845229dc77154d7958"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70b0adf99b0f8527d84af3125629748e"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider.html#a70b0adf99b0f8527d84af3125629748e">FilterPath</a> (string path)</td></tr>
<tr class="memdesc:a70b0adf99b0f8527d84af3125629748e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execites the PreS3RequestFilter event and returns the result.  <a href="#a70b0adf99b0f8527d84af3125629748e">More...</a><br/></td></tr>
<tr class="separator:a70b0adf99b0f8527d84af3125629748e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3613567bc9f0406ea7400af231474929"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider.html#a3613567bc9f0406ea7400af231474929">S3VirtualPathProvider</a> (AmazonS3Client s3client, String virtualFilesystemPrefix, TimeSpan absoluteMetadataExpiration, TimeSpan slidingMetadataExpiration, RewriteBucketAndKeyPath bucketFilterCallback, Boolean fastMode)</td></tr>
<tr class="memdesc:a3613567bc9f0406ea7400af231474929"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create and configure a virtual path provider.  <a href="#a3613567bc9f0406ea7400af231474929">More...</a><br/></td></tr>
<tr class="separator:a3613567bc9f0406ea7400af231474929"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23ba66a3faecabdef3d3a9fc8a221eab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider.html#a23ba66a3faecabdef3d3a9fc8a221eab">S3VirtualPathProvider</a> (RewriteBucketAndKeyPath bucketFilterCallback, Boolean fastMode)</td></tr>
<tr class="memdesc:a23ba66a3faecabdef3d3a9fc8a221eab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default settings: CommunicationProtocol=HTTP, VirtualFileSystemPrefix = "~/s3", SlidingExpiration = 1h, AbsoluteExpiration = maxvalue No bucket filtering is performed, so any amazon-hosted bucket can be accessed through this provider unless you add a bucket filter.  <a href="#a23ba66a3faecabdef3d3a9fc8a221eab">More...</a><br/></td></tr>
<tr class="separator:a23ba66a3faecabdef3d3a9fc8a221eab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa190381f47773114a6508f9bef201539"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider.html#aa190381f47773114a6508f9bef201539">IsPathVirtual</a> (string virtualPath)</td></tr>
<tr class="memdesc:aa190381f47773114a6508f9bef201539"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether a specified virtual path is within the virtual file system.  <a href="#aa190381f47773114a6508f9bef201539">More...</a><br/></td></tr>
<tr class="separator:aa190381f47773114a6508f9bef201539"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab54146de2846fb257676c4192e724ebe"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab54146de2846fb257676c4192e724ebe"></a>
override bool&#160;</td><td class="memItemRight" valign="bottom"><b>FileExists</b> (string virtualPath)</td></tr>
<tr class="separator:ab54146de2846fb257676c4192e724ebe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b808534047feaed741355961c0f6893"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9b808534047feaed741355961c0f6893"></a>
override VirtualFile&#160;</td><td class="memItemRight" valign="bottom"><b>GetFile</b> (string virtualPath)</td></tr>
<tr class="separator:a9b808534047feaed741355961c0f6893"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab363c034ba6bc2bab49c24290d950bf1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab363c034ba6bc2bab49c24290d950bf1"></a>
override CacheDependency&#160;</td><td class="memItemRight" valign="bottom"><b>GetCacheDependency</b> (string virtualPath, System.Collections.IEnumerable virtualPathDependencies, DateTime utcStart)</td></tr>
<tr class="separator:ab363c034ba6bc2bab49c24290d950bf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b6d11b17781e0de00f1d6509fadd004"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7b6d11b17781e0de00f1d6509fadd004"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>FileExists</b> (string virtualPath, System.Collections.Specialized.NameValueCollection queryString)</td></tr>
<tr class="separator:a7b6d11b17781e0de00f1d6509fadd004"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4f2b3aa9db738c74435293a308b0af2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af4f2b3aa9db738c74435293a308b0af2"></a>
<a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_virtual_file.html">IVirtualFile</a>&#160;</td><td class="memItemRight" valign="bottom"><b>GetFile</b> (string virtualPath, System.Collections.Specialized.NameValueCollection queryString)</td></tr>
<tr class="separator:af4f2b3aa9db738c74435293a308b0af2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider.html">ImageResizer.Plugins.IVirtualImageProvider</a></td></tr>
<tr class="memitem:adc1f2caa76c242e3c0bb8ed2d824f9c3 inherit pub_methods_interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider.html#adc1f2caa76c242e3c0bb8ed2d824f9c3">FileExists</a> (string virtualPath, NameValueCollection queryString)</td></tr>
<tr class="memdesc:adc1f2caa76c242e3c0bb8ed2d824f9c3 inherit pub_methods_interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the specified file exists.  <a href="#adc1f2caa76c242e3c0bb8ed2d824f9c3">More...</a><br/></td></tr>
<tr class="separator:adc1f2caa76c242e3c0bb8ed2d824f9c3 inherit pub_methods_interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3bb3191e4ed5cbf957c961d607d611b inherit pub_methods_interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider"><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_virtual_file.html">IVirtualFile</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider.html#aa3bb3191e4ed5cbf957c961d607d611b">GetFile</a> (string virtualPath, NameValueCollection queryString)</td></tr>
<tr class="memdesc:aa3bb3191e4ed5cbf957c961d607d611b inherit pub_methods_interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a virtual file instance for the specified path and querystring.  <a href="#aa3bb3191e4ed5cbf957c961d607d611b">More...</a><br/></td></tr>
<tr class="separator:aa3bb3191e4ed5cbf957c961d607d611b inherit pub_methods_interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ad30cd286f6e5393213327d51b5ea5ca9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad30cd286f6e5393213327d51b5ea5ca9"></a>
override void&#160;</td><td class="memItemRight" valign="bottom"><b>Initialize</b> ()</td></tr>
<tr class="separator:ad30cd286f6e5393213327d51b5ea5ca9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:a365ebcbaeb0973cd292e7d0530341c19"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider.html#a365ebcbaeb0973cd292e7d0530341c19">VirtualFilesystemPrefix</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a365ebcbaeb0973cd292e7d0530341c19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Requests starting with this path will be handled by this virtual path provider. Should be in app-relative form: "~/s3/". Will be converted to root-relative form upon assigment. Trailing slash required, auto-added.  <a href="#a365ebcbaeb0973cd292e7d0530341c19">More...</a><br/></td></tr>
<tr class="separator:a365ebcbaeb0973cd292e7d0530341c19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22a81d9e50c807a40d66a20f076dcada"><td class="memItemLeft" align="right" valign="top">TimeSpan&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider.html#a22a81d9e50c807a40d66a20f076dcada">MetadataAbsoluteExpiration</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a22a81d9e50c807a40d66a20f076dcada"><td class="mdescLeft">&#160;</td><td class="mdescRight">Existence and modified date metadata about files is cached for, at longest, this amount of time after it is first stored.  <a href="#a22a81d9e50c807a40d66a20f076dcada">More...</a><br/></td></tr>
<tr class="separator:a22a81d9e50c807a40d66a20f076dcada"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63d79e2d635a531f1342425c530dcfb5"><td class="memItemLeft" align="right" valign="top">TimeSpan&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider.html#a63d79e2d635a531f1342425c530dcfb5">MetadataSlidingExpiration</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a63d79e2d635a531f1342425c530dcfb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Existence and modified date metadata about files is cached for this long after it is last accessed.  <a href="#a63d79e2d635a531f1342425c530dcfb5">More...</a><br/></td></tr>
<tr class="separator:a63d79e2d635a531f1342425c530dcfb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a159f084887581ffa5eca2786389f826e"><td class="memItemLeft" align="right" valign="top">AmazonS3Client&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider.html#a159f084887581ffa5eca2786389f826e">S3Client</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a159f084887581ffa5eca2786389f826e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets and sets the AmazonS3Client object that specifies connection details such as authentication, encryption, etc.  <a href="#a159f084887581ffa5eca2786389f826e">More...</a><br/></td></tr>
<tr class="separator:a159f084887581ffa5eca2786389f826e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f1f806ec8b4f67acfbd32cde3787543"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider.html#a7f1f806ec8b4f67acfbd32cde3787543">FastMode</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a7f1f806ec8b4f67acfbd32cde3787543"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, existence of bucket and key is assumed as long as prefix is present. Defaults to true. Also, no modified date information is provided, so the cache never gets updated. Requires 1 request instead of 2 to download the image.  <a href="#a7f1f806ec8b4f67acfbd32cde3787543">More...</a><br/></td></tr>
<tr class="separator:a7f1f806ec8b4f67acfbd32cde3787543"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="events"></a>
Events</h2></td></tr>
<tr class="memitem:a2956fc717b2261da3942ad8719bcd4ce"><td class="memItemLeft" align="right" valign="top">RewriteBucketAndKeyPath&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider.html#a2956fc717b2261da3942ad8719bcd4ce">PreS3RequestFilter</a></td></tr>
<tr class="memdesc:a2956fc717b2261da3942ad8719bcd4ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Important! You should handle this event and throw an exception if a bucket that you do not own is requested. Otherwise other people's buckets could be accessed using your server.  <a href="#a2956fc717b2261da3942ad8719bcd4ce">More...</a><br/></td></tr>
<tr class="separator:a2956fc717b2261da3942ad8719bcd4ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Allows clients to request objects located on another amazon S3 server through this server. Allows URL rewriting. </p>

<p>Definition at line <a class="el" href="_2_s3_virtual_path_provider_8cs_source.html#l00018">18</a> of file <a class="el" href="_2_s3_virtual_path_provider_8cs_source.html">S3VirtualPathProvider.cs</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a3613567bc9f0406ea7400af231474929"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ImageResizer.Plugins.S3Reader2.S3VirtualPathProvider.S3VirtualPathProvider </td>
          <td>(</td>
          <td class="paramtype">AmazonS3Client&#160;</td>
          <td class="paramname"><em>s3client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>virtualFilesystemPrefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TimeSpan&#160;</td>
          <td class="paramname"><em>absoluteMetadataExpiration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TimeSpan&#160;</td>
          <td class="paramname"><em>slidingMetadataExpiration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RewriteBucketAndKeyPath&#160;</td>
          <td class="paramname"><em>bucketFilterCallback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Boolean&#160;</td>
          <td class="paramname"><em>fastMode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create and configure a virtual path provider. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s3client</td><td>Provide the authentication and ecryption settings. For public buckets, no settings are required. Use AmazonS3Config.CommunicationProtocol=HTTP for best performance. </td></tr>
    <tr><td class="paramname">virtualFilesystemPrefix</td><td>The virtual folder to allow client access of s3 from.</td></tr>
    <tr><td class="paramname">absoluteMetadataExpiration</td><td></td></tr>
    <tr><td class="paramname">slidingMetadataExpiration</td><td></td></tr>
    <tr><td class="paramname">bucketFilterCallback</td><td>You should validate that the requested bucket is your own. If you only want one bucket, just prefix your bucket to the path.</td></tr>
    <tr><td class="paramname">fastMode</td><td>If true, existence of bucket and key is assumed as long as prefix is present. Also, no modified date information is provided to the image resizer, so the cache never gets updated. Requires 1 request instead of 2 to download the image.</td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_2_s3_virtual_path_provider_8cs_source.html#l00109">109</a> of file <a class="el" href="_2_s3_virtual_path_provider_8cs_source.html">S3VirtualPathProvider.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            : base()</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            this.s3Client = s3client;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            this.VirtualFilesystemPrefix = virtualFilesystemPrefix;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            this.MetadataAbsoluteExpiration = absoluteMetadataExpiration;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            this.MetadataSlidingExpiration = slidingMetadataExpiration;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            this.PreS3RequestFilter += bucketFilterCallback;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            this.FastMode = fastMode;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a23ba66a3faecabdef3d3a9fc8a221eab"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ImageResizer.Plugins.S3Reader2.S3VirtualPathProvider.S3VirtualPathProvider </td>
          <td>(</td>
          <td class="paramtype">RewriteBucketAndKeyPath&#160;</td>
          <td class="paramname"><em>bucketFilterCallback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Boolean&#160;</td>
          <td class="paramname"><em>fastMode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default settings: CommunicationProtocol=HTTP, VirtualFileSystemPrefix = "~/s3", SlidingExpiration = 1h, AbsoluteExpiration = maxvalue No bucket filtering is performed, so any amazon-hosted bucket can be accessed through this provider unless you add a bucket filter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bucketFilterCallback</td><td>You should validate that the requested bucket is your own. If you only want one bucket, just prefix your bucket to the path.</td></tr>
    <tr><td class="paramname">fastMode</td><td>If true, existence of bucket and key is assumed as long as prefix is present. Also, no modified date information is provided to the image resizer, so the cache never gets updated. Requires 1 request instead of 2 to download the image.</td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_2_s3_virtual_path_provider_8cs_source.html#l00126">126</a> of file <a class="el" href="_2_s3_virtual_path_provider_8cs_source.html">S3VirtualPathProvider.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            : base()</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            this.s3Client = <span class="keyword">new</span> AmazonS3Client(null,<span class="keyword">new</span> AmazonS3Config() { UseHttp = <span class="keyword">true</span> });</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            this.PreS3RequestFilter += bucketFilterCallback;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            this.FastMode = fastMode;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a70b0adf99b0f8527d84af3125629748e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string ImageResizer.Plugins.S3Reader2.S3VirtualPathProvider.FilterPath </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Execites the PreS3RequestFilter event and returns the result. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_2_s3_virtual_path_provider_8cs_source.html#l00033">33</a> of file <a class="el" href="_2_s3_virtual_path_provider_8cs_source.html">S3VirtualPathProvider.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        {</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;            S3PathEventArgs e = <span class="keyword">new</span> S3PathEventArgs(path);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider.html#a2956fc717b2261da3942ad8719bcd4ce">PreS3RequestFilter</a> != null) <a class="code" href="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider.html#a2956fc717b2261da3942ad8719bcd4ce">PreS3RequestFilter</a>(<span class="keyword">this</span>,e);</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            <span class="keywordflow">return</span> e.Path;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        }</div>
<div class="ttc" id="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider_html_a2956fc717b2261da3942ad8719bcd4ce"><div class="ttname"><a href="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider.html#a2956fc717b2261da3942ad8719bcd4ce">ImageResizer.Plugins.S3Reader2.S3VirtualPathProvider.PreS3RequestFilter</a></div><div class="ttdeci">RewriteBucketAndKeyPath PreS3RequestFilter</div><div class="ttdoc">Important! You should handle this event and throw an exception if a bucket that you do not own is req...</div><div class="ttdef"><b>Definition:</b> <a href="_2_s3_virtual_path_provider_8cs_source.html#l00026">S3VirtualPathProvider.cs:26</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa190381f47773114a6508f9bef201539"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ImageResizer.Plugins.S3Reader2.S3VirtualPathProvider.IsPathVirtual </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determines whether a specified virtual path is within the virtual file system. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">virtualPath</td><td>An absolute virtual path.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the virtual path is within the virtual file sytem; otherwise, false. </dd></dl>

<p>Definition at line <a class="el" href="_2_s3_virtual_path_provider_8cs_source.html#l00148">148</a> of file <a class="el" href="_2_s3_virtual_path_provider_8cs_source.html">S3VirtualPathProvider.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <span class="keywordflow">return</span> virtualPath.StartsWith(<a class="code" href="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider.html#a365ebcbaeb0973cd292e7d0530341c19">VirtualFilesystemPrefix</a>, StringComparison.OrdinalIgnoreCase);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        }</div>
<div class="ttc" id="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider_html_a365ebcbaeb0973cd292e7d0530341c19"><div class="ttname"><a href="class_image_resizer_1_1_plugins_1_1_s3_reader2_1_1_s3_virtual_path_provider.html#a365ebcbaeb0973cd292e7d0530341c19">ImageResizer.Plugins.S3Reader2.S3VirtualPathProvider.VirtualFilesystemPrefix</a></div><div class="ttdeci">string VirtualFilesystemPrefix</div><div class="ttdoc">Requests starting with this path will be handled by this virtual path provider. Should be in app-rela...</div><div class="ttdef"><b>Definition:</b> <a href="_2_s3_virtual_path_provider_8cs_source.html#l00045">S3VirtualPathProvider.cs:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Property Documentation</h2>
<a class="anchor" id="a7f1f806ec8b4f67acfbd32cde3787543"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ImageResizer.Plugins.S3Reader2.S3VirtualPathProvider.FastMode</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">set</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If true, existence of bucket and key is assumed as long as prefix is present. Defaults to true. Also, no modified date information is provided, so the cache never gets updated. Requires 1 request instead of 2 to download the image. </p>

<p>Definition at line <a class="el" href="_2_s3_virtual_path_provider_8cs_source.html#l00099">99</a> of file <a class="el" href="_2_s3_virtual_path_provider_8cs_source.html">S3VirtualPathProvider.cs</a>.</p>

</div>
</div>
<a class="anchor" id="a22a81d9e50c807a40d66a20f076dcada"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TimeSpan ImageResizer.Plugins.S3Reader2.S3VirtualPathProvider.MetadataAbsoluteExpiration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">set</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Existence and modified date metadata about files is cached for, at longest, this amount of time after it is first stored. </p>

<p>Definition at line <a class="el" href="_2_s3_virtual_path_provider_8cs_source.html#l00054">54</a> of file <a class="el" href="_2_s3_virtual_path_provider_8cs_source.html">S3VirtualPathProvider.cs</a>.</p>

</div>
</div>
<a class="anchor" id="a63d79e2d635a531f1342425c530dcfb5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">TimeSpan ImageResizer.Plugins.S3Reader2.S3VirtualPathProvider.MetadataSlidingExpiration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">set</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Existence and modified date metadata about files is cached for this long after it is last accessed. </p>

<p>Definition at line <a class="el" href="_2_s3_virtual_path_provider_8cs_source.html#l00070">70</a> of file <a class="el" href="_2_s3_virtual_path_provider_8cs_source.html">S3VirtualPathProvider.cs</a>.</p>

</div>
</div>
<a class="anchor" id="a159f084887581ffa5eca2786389f826e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AmazonS3Client ImageResizer.Plugins.S3Reader2.S3VirtualPathProvider.S3Client</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">set</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets and sets the AmazonS3Client object that specifies connection details such as authentication, encryption, etc. </p>

<p>Definition at line <a class="el" href="_2_s3_virtual_path_provider_8cs_source.html#l00089">89</a> of file <a class="el" href="_2_s3_virtual_path_provider_8cs_source.html">S3VirtualPathProvider.cs</a>.</p>

</div>
</div>
<a class="anchor" id="a365ebcbaeb0973cd292e7d0530341c19"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string ImageResizer.Plugins.S3Reader2.S3VirtualPathProvider.VirtualFilesystemPrefix</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">set</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Requests starting with this path will be handled by this virtual path provider. Should be in app-relative form: "~/s3/". Will be converted to root-relative form upon assigment. Trailing slash required, auto-added. </p>

<p>Definition at line <a class="el" href="_2_s3_virtual_path_provider_8cs_source.html#l00045">45</a> of file <a class="el" href="_2_s3_virtual_path_provider_8cs_source.html">S3VirtualPathProvider.cs</a>.</p>

</div>
</div>
<h2 class="groupheader">Event Documentation</h2>
<a class="anchor" id="a2956fc717b2261da3942ad8719bcd4ce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RewriteBucketAndKeyPath ImageResizer.Plugins.S3Reader2.S3VirtualPathProvider.PreS3RequestFilter</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Important! You should handle this event and throw an exception if a bucket that you do not own is requested. Otherwise other people's buckets could be accessed using your server. </p>

<p>Definition at line <a class="el" href="_2_s3_virtual_path_provider_8cs_source.html#l00026">26</a> of file <a class="el" href="_2_s3_virtual_path_provider_8cs_source.html">S3VirtualPathProvider.cs</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>C:/Users/nathanael/Documents/resizer/Plugins/S3Reader2/<a class="el" href="_2_s3_virtual_path_provider_8cs_source.html">S3VirtualPathProvider.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
