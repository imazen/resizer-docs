<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>ImageResizer: ImageResizer.Util.PathUtils Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="resizer-icon-64.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">ImageResizer
   &#160;<span id="projectnumber">3.1.3</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Events</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespace_image_resizer.html">ImageResizer</a>      </li>
      <li class="navelem"><a class="el" href="namespace_image_resizer_1_1_util.html">Util</a>      </li>
      <li class="navelem"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html">PathUtils</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#properties">Properties</a>  </div>
  <div class="headertitle">
<div class="title">ImageResizer.Util.PathUtils Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="ImageResizer::Util::PathUtils" -->
<p><a href="class_image_resizer_1_1_util_1_1_path_utils-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">delegate string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a0ffdf593f69e69f70a16c35d5124b4c2">VariableResolverCallback</a> (string variableName)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">A method that resolves variable names to values for the ResolveVariablesInPath method.  <a href="#a0ffdf593f69e69f70a16c35d5124b4c2"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a6e47130783374c72a73f97760843bb07">SetExtension</a> (string path, string newExtension)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the file extension of the specified path to the specified value, returning the result. If an extension has multiple parts, it will replace all of them. Leading dots will be stripped from 'newExtension' and re-addd as required.  <a href="#a6e47130783374c72a73f97760843bb07"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#aa95b20ca2e860fd2b869be26bf8ad816">RemoveFullExtension</a> (string path)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes all extension segments from the filename or URL, leaving the querystring intact. I.e, image.jpg.bmp.tiff?hi would be image?hi.  <a href="#aa95b20ca2e860fd2b869be26bf8ad816"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a0bf1e4b4833b6ca62efc0ff7c72c93c9">RemoveExtension</a> (string path)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the extension from the filename or URL, leaving the querystring intact, where the extension is only the last extension segment. I.e, image.jpg.bmp.tiff?hi would be image.jpg.bmp?hi after this call.  <a href="#a0bf1e4b4833b6ca62efc0ff7c72c93c9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a3ba9afa48f4fa28456bcb247921a075a">AddExtension</a> (string path, string newExtension)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds the specified extension to path, returning the result. Multiple calls will result in "path.ext.ext.ext.ext". maintains the querystring as-is.  <a href="#a3ba9afa48f4fa28456bcb247921a075a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a3b381221fbb1e4bd0d5d299c7f0dc550">GetFullExtension</a> (string path)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Will return the full extension, like ".jpg.ashx", not just the last bit. Ignores the querystring part. Excludes extensions containing spaces or slashes.  <a href="#a3b381221fbb1e4bd0d5d299c7f0dc550"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a56cb53d101d364eb3b434a89af918335">GetExtension</a> (string path)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Ignores the querystring. Grabs the last segment of the filename extension. Returns an empty string if there is no extension, or if the extension contains a space. Includes the leading '.'.  <a href="#a56cb53d101d364eb3b434a89af918335"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#adafb4cd7d85a3567782842873c1a5176">ResolveAppRelative</a> (string virtualPath)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a1a7e4faaa93c5b4d1f3652ccfc4dae82">ResolveAppRelativeAssumeAppRelative</a> (string virtualPath)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Turns relative paths into domain-relative paths. Turns app-relative paths into domain relative paths.  <a href="#a1a7e4faaa93c5b4d1f3652ccfc4dae82"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a213e5ba499d364b9f2e2bce592a09af7">AddQueryString</a> (string virtualPath, string querystring)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Joins the path and querystring. If the path already contains a querystring, they are 'append joined' with the correct character.  <a href="#a213e5ba499d364b9f2e2bce592a09af7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#ae552f710cc6327b8508ab4111f75d8c9">MergeOverwriteQueryString</a> (string path, NameValueCollection newQuerystring)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Overwrites exisisting querystring values in 'path' with the values in 'newQuerystring'. Doesn't support ; querystrings.  <a href="#ae552f710cc6327b8508ab4111f75d8c9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a08767ea3c8bee6716bb5484ae78df1da">MergeQueryString</a> (string path, NameValueCollection newQuerystring)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds the querystring values in 'newQuerystring' to the querystring in Path, but does not overwrite values. Doesn't support ; querystrings.  <a href="#a08767ea3c8bee6716bb5484ae78df1da"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#ac50e452cbcb5cea21318669c89632755">BuildQueryString</a> (NameValueCollection QueryString)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a string querystring in the form "?key=value&amp;amp;key=value". Keys and values are UrlEncoded as they should be.  <a href="#ac50e452cbcb5cea21318669c89632755"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#ae7550f4618ccb5395462c3fb72ea83ab">BuildQueryString</a> (NameValueCollection QueryString, bool urlEncode)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a string querystring in the form "?key=value&amp;amp;key=value". Keys and values are UrlEncoded if urlEncode=true.  <a href="#ae7550f4618ccb5395462c3fb72ea83ab"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#aac9a36962f98bb9a948ee41411323ebf">RemoveQueryString</a> (string path)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the query string from the specifed path. If the path is only a querystring, an empty string is returned.  <a href="#aac9a36962f98bb9a948ee41411323ebf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static NameValueCollection&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a4f54b6e4e17f239fc70eaafd766fc101">ParseQueryStringFriendly</a> (string path)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Like ParseQueryString, but permits the leading '?' to be omitted.  <a href="#a4f54b6e4e17f239fc70eaafd766fc101"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static NameValueCollection&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a75ce76cbe824eb05eb74c8ea09883ed1">ParseQueryStringFriendlyAllowSemicolons</a> (string path)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Like ParseQueryString, but permits the leading '?' to be omitted, and semicolons can be substituted for '&amp;'.  <a href="#a75ce76cbe824eb05eb74c8ea09883ed1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static NameValueCollection&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a32087fab410ab49c140bb773f48bb86d">ParseQueryString</a> (string path)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses the querystring from the given path into a NameValueCollection. accepts "file?key=value" and "?key=value&amp;amp;key2=value2" formats. (no path is required) UrlDecodes keys and values.  <a href="#a32087fab410ab49c140bb773f48bb86d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#acc45f67bc1e770b2971878b809d3a98e">ToBase64U</a> (byte[] data)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts aribtrary bytes to a URL-safe version of base64 (no = padding, with - instead of + and _ instead of /)  <a href="#acc45f67bc1e770b2971878b809d3a98e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static byte[]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#aefb5e8343a4b516f0b74814f6970ca74">FromBase64UToButes</a> (string data)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a URL-safe version of base64 to a byte array. (no = padding, with - instead of + and _ instead of /)  <a href="#aefb5e8343a4b516f0b74814f6970ca74"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#abf274218eee80708f27069549777bc38">ToBase64U</a> (string data)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts aribtrary strings to a URL-safe version of base64 (no = padding, with - instead of + and _ instead of /)  <a href="#abf274218eee80708f27069549777bc38"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a5ffc6a49feee3133b31fdd4adeaef151">FromBase64UToString</a> (string data)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a URL-safe version of base64 to a string. 64U is (no = padding, with - instead of + and _ instead of /)  <a href="#a5ffc6a49feee3133b31fdd4adeaef151"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#acb4e92f50556202cd20d914384a1965d">MapPathIfAppRelative</a> (string path)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the physcial mapped path for the specified virtual path if it starts with ~, otherwise retuns the original path.  <a href="#acb4e92f50556202cd20d914384a1965d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a1a798c6c5aceaaefed3f3822ceba5876">GenerateImageUrl</a> (string path, NameValueCollection query)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a resized image url for the specified physical or virtual path. Not CloudFront compatible. Does not support remote URLs, use RemoteReader for that. If you're running in IIS classic, add ".ashx" to the 'path' parameter.  <a href="#a1a798c6c5aceaaefed3f3822ceba5876"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a2a48f8c7b7dcb8481d09468986076a0b">GuessVirtualPath</a> (string path)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to guess the virtual path from physical path. Will be thrwarted if the path is mapped as a virtual folder inside the application. If the path is a non-physical path, it will be returned as is. Returns null if the physical path isn't a subfolder of the application's physical path.  <a href="#a2a48f8c7b7dcb8481d09468986076a0b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a9be7ad795b3c8b14fea7e566806f597b">ResolveVariablesInPath</a> (string pathWithVars, <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a0ffdf593f69e69f70a16c35d5124b4c2">VariableResolverCallback</a> resolver)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Replaces variables in paths with their values. Ex. ~/uploads/thumbs/&lt;guid&gt;.&lt;ext&gt;. Standard variables are &lt;ext&gt; (the default extension for the final file type), &lt;guid&gt;, a randomly generated GUID, &lt;filename&gt;, the original filename without it's extension, &lt;path&gt;, the original path and filename without extension, &lt;settings.width&gt;, (any specified settings value except preset), &lt;width&gt; (final width), and &lt;height&gt; (final height).  <a href="#a9be7ad795b3c8b14fea7e566806f597b"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="properties"></a>
Properties</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a210e3c7584b66cf195a0b81ff74e3b2c">AppVirtualPath</a><code> [get]</code></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns HostingEnvironment.ApplicationVirtualPath or "/", if asp.net is not running.  <a href="#a210e3c7584b66cf195a0b81ff74e3b2c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a3a5c9196381928db82048058cb62dc19">AppPhysicalPath</a><code> [get]</code></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">If not running in ASP.NET, returns the folder containing the DLL.  <a href="#a3a5c9196381928db82048058cb62dc19"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00010">10</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a3ba9afa48f4fa28456bcb247921a075a"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::AddExtension" ref="a3ba9afa48f4fa28456bcb247921a075a" args="(string path, string newExtension)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a3ba9afa48f4fa28456bcb247921a075a">ImageResizer.Util.PathUtils.AddExtension</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>newExtension</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds the specified extension to path, returning the result. Multiple calls will result in "path.ext.ext.ext.ext". maintains the querystring as-is. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td></td></tr>
    <tr><td class="paramname">newExtension</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00090">90</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                            {
            <span class="keywordtype">int</span> query = path.IndexOf(<span class="charliteral">&#39;?&#39;</span>);
            <span class="keywordflow">if</span> (query &lt; 0) query = path.Length;
            <span class="keywordflow">return</span> path.Substring(0, query) + <span class="stringliteral">&quot;.&quot;</span> + newExtension.TrimStart(<span class="charliteral">&#39;.&#39;</span>) + path.Substring(query);
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a213e5ba499d364b9f2e2bce592a09af7"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::AddQueryString" ref="a213e5ba499d364b9f2e2bce592a09af7" args="(string virtualPath, string querystring)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a213e5ba499d364b9f2e2bce592a09af7">ImageResizer.Util.PathUtils.AddQueryString</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>querystring</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Joins the path and querystring. If the path already contains a querystring, they are 'append joined' with the correct character. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">virtualPath</td><td></td></tr>
    <tr><td class="paramname">querystring</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00161">161</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                    {
            <span class="keywordflow">if</span> (virtualPath.IndexOf(<span class="charliteral">&#39;?&#39;</span>) &gt; -1) virtualPath = virtualPath.TrimEnd(<span class="charliteral">&#39;&amp;&#39;</span>) + <span class="charliteral">&#39;&amp;&#39;</span>;
            <span class="keywordflow">else</span> virtualPath += <span class="charliteral">&#39;?&#39;</span>;

            <span class="keywordflow">return</span> virtualPath + querystring.TrimStart(<span class="charliteral">&#39;&amp;&#39;</span>, <span class="charliteral">&#39;?&#39;</span>);
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ac50e452cbcb5cea21318669c89632755"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::BuildQueryString" ref="ac50e452cbcb5cea21318669c89632755" args="(NameValueCollection QueryString)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#ac50e452cbcb5cea21318669c89632755">ImageResizer.Util.PathUtils.BuildQueryString</a> </td>
          <td>(</td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>QueryString</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a string querystring in the form "?key=value&amp;amp;key=value". Keys and values are UrlEncoded as they should be. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">QueryString</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00203">203</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>

<p>Referenced by <a class="el" href="_remote_reader_plugin_8cs_source.html#l00118">ImageResizer.Plugins.RemoteReader.RemoteReaderPlugin.CreateSignedUrl()</a>, <a class="el" href="_image_request_action_8cs_source.html#l00140">ImageResizer.Mvc.ImageRequestAction.ExecuteVirtualFileResult()</a>, <a class="el" href="_intercept_module_8cs_source.html#l00168">ImageResizer.InterceptModule.HandleRequest()</a>, <a class="el" href="_resize_settings_8cs_source.html#l00406">ImageResizer.ResizeSettings.ToString()</a>, and <a class="el" href="_resize_settings_8cs_source.html#l00413">ImageResizer.ResizeSettings.ToStringEncoded()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                               {
            <span class="keywordflow">return</span> <a class="code" href="class_image_resizer_1_1_util_1_1_path_utils.html#ac50e452cbcb5cea21318669c89632755" title="Returns a string querystring in the form &quot;?key=value&amp;amp;key=value&quot;. Keys and values are UrlEncoded a...">BuildQueryString</a>(QueryString, <span class="keyword">true</span>);
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ae7550f4618ccb5395462c3fb72ea83ab"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::BuildQueryString" ref="ae7550f4618ccb5395462c3fb72ea83ab" args="(NameValueCollection QueryString, bool urlEncode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#ac50e452cbcb5cea21318669c89632755">ImageResizer.Util.PathUtils.BuildQueryString</a> </td>
          <td>(</td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>QueryString</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>urlEncode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a string querystring in the form "?key=value&amp;amp;key=value". Keys and values are UrlEncoded if urlEncode=true. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">QueryString</td><td></td></tr>
    <tr><td class="paramname">urlEncode</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00213">213</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                               {
            StringBuilder path = <span class="keyword">new</span> StringBuilder();
            <span class="keywordflow">if</span> (QueryString.Count &gt; 0) {
                path.Append(<span class="charliteral">&#39;?&#39;</span>);
                <span class="keywordflow">foreach</span> (<span class="keywordtype">string</span> key <span class="keywordflow">in</span> QueryString.Keys) {
                    <span class="keywordflow">if</span> (key == null) <span class="keywordflow">continue</span>; <span class="comment">//Skip null keys</span>
                    <span class="keywordtype">string</span> value = QueryString[key];

                    path.Append(urlEncode ? HttpUtility.UrlEncode(key) : key);
                    path.Append(<span class="charliteral">&#39;=&#39;</span>);
                    path.Append(urlEncode ? HttpUtility.UrlEncode(value) : value);
                    path.Append(<span class="charliteral">&#39;&amp;&#39;</span>);
                }
                <span class="keywordflow">if</span> (path[path.Length - 1] == <span class="charliteral">&#39;&amp;&#39;</span>) path.Remove(path.Length - 1, 1);
            }
            <span class="keywordflow">return</span> path.ToString();
        }
</pre></div>
</div>
</div>
<a class="anchor" id="aefb5e8343a4b516f0b74814f6970ca74"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::FromBase64UToButes" ref="aefb5e8343a4b516f0b74814f6970ca74" args="(string data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static byte [] <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#aefb5e8343a4b516f0b74814f6970ca74">ImageResizer.Util.PathUtils.FromBase64UToButes</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Converts a URL-safe version of base64 to a byte array. (no = padding, with - instead of + and _ instead of /) </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00313">313</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                             {
            data = data.PadRight(data.Length + ((4 - data.Length % 4) % 4), <span class="charliteral">&#39;=&#39;</span>); <span class="comment">//if there is 1 leftover octet, add ==, if 2, add =. 3 octects = 4 chars. </span>
            <span class="keywordflow">return</span> Convert.FromBase64String(data.Replace(<span class="charliteral">&#39;-&#39;</span>, <span class="charliteral">&#39;+&#39;</span>).Replace(<span class="charliteral">&#39;_&#39;</span>, <span class="charliteral">&#39;/&#39;</span>));
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a5ffc6a49feee3133b31fdd4adeaef151"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::FromBase64UToString" ref="a5ffc6a49feee3133b31fdd4adeaef151" args="(string data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a5ffc6a49feee3133b31fdd4adeaef151">ImageResizer.Util.PathUtils.FromBase64UToString</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Converts a URL-safe version of base64 to a string. 64U is (no = padding, with - instead of + and _ instead of /) </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00330">330</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>

<p>Referenced by <a class="el" href="_remote_reader_plugin_8cs_source.html#l00158">ImageResizer.Plugins.RemoteReader.RemoteReaderPlugin.ParseRequest()</a>.</p>
<div class="fragment"><pre class="fragment">                                                              {
            <span class="keywordflow">return</span> UTF8Encoding.UTF8.GetString(<a class="code" href="class_image_resizer_1_1_util_1_1_path_utils.html#aefb5e8343a4b516f0b74814f6970ca74" title="Converts a URL-safe version of base64 to a byte array. (no = padding, with - instead of + and _ inste...">FromBase64UToButes</a>(data));
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a1a798c6c5aceaaefed3f3822ceba5876"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::GenerateImageUrl" ref="a1a798c6c5aceaaefed3f3822ceba5876" args="(string path, NameValueCollection query)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a1a798c6c5aceaaefed3f3822ceba5876">ImageResizer.Util.PathUtils.GenerateImageUrl</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>query</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generates a resized image url for the specified physical or virtual path. Not CloudFront compatible. Does not support remote URLs, use RemoteReader for that. If you're running in IIS classic, add ".ashx" to the 'path' parameter. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td></td></tr>
    <tr><td class="paramname">query</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00351">351</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                      {
            <span class="keywordflow">return</span> <a class="code" href="class_image_resizer_1_1_util_1_1_path_utils.html#adafb4cd7d85a3567782842873c1a5176">ResolveAppRelative</a>(<a class="code" href="class_image_resizer_1_1_util_1_1_path_utils.html#a2a48f8c7b7dcb8481d09468986076a0b" title="Attempts to guess the virtual path from physical path. Will be thrwarted if the path is mapped as a v...">GuessVirtualPath</a>(path)) + <a class="code" href="class_image_resizer_1_1_util_1_1_path_utils.html#ac50e452cbcb5cea21318669c89632755" title="Returns a string querystring in the form &quot;?key=value&amp;amp;key=value&quot;. Keys and values are UrlEncoded a...">BuildQueryString</a>(query); 
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a56cb53d101d364eb3b434a89af918335"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::GetExtension" ref="a56cb53d101d364eb3b434a89af918335" args="(string path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a56cb53d101d364eb3b434a89af918335">ImageResizer.Util.PathUtils.GetExtension</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Ignores the querystring. Grabs the last segment of the filename extension. Returns an empty string if there is no extension, or if the extension contains a space. Includes the leading '.'. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00118">118</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>

<p>Referenced by <a class="el" href="_image_job_8cs_source.html#l00171">ImageResizer.ImageJob.ResolveTemplatedPath()</a>.</p>
<div class="fragment"><pre class="fragment">                                                       {
            <span class="keywordtype">int</span> query = path.IndexOf(<span class="charliteral">&#39;?&#39;</span>);
            <span class="keywordflow">if</span> (query &lt; 0) query = path.Length;
            <span class="comment">//Finds the first character that could possibly be part of the extension (before the query)</span>
            <span class="keywordtype">int</span> firstPossibleExtensionChar = path.LastIndexOfAny(<span class="keyword">new</span> <span class="keywordtype">char</span>[] { <span class="charliteral">&#39; &#39;</span>, <span class="charliteral">&#39;/&#39;</span>, <span class="charliteral">&#39;\\&#39;</span> }, query - 1) + 1;
            <span class="keywordtype">int</span> extensionStarts = path.LastIndexOf(<span class="charliteral">&#39;.&#39;</span>, query -1, query - firstPossibleExtensionChar );
            <span class="keywordflow">if</span> (extensionStarts &lt; 0) extensionStarts = query;

            <span class="keywordflow">return</span> path.Substring(extensionStarts, query - extensionStarts);

        }
</pre></div>
</div>
</div>
<a class="anchor" id="a3b381221fbb1e4bd0d5d299c7f0dc550"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::GetFullExtension" ref="a3b381221fbb1e4bd0d5d299c7f0dc550" args="(string path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a3b381221fbb1e4bd0d5d299c7f0dc550">ImageResizer.Util.PathUtils.GetFullExtension</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Will return the full extension, like ".jpg.ashx", not just the last bit. Ignores the querystring part. Excludes extensions containing spaces or slashes. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00101">101</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>

<p>Referenced by <a class="el" href="_image_request_action_8cs_source.html#l00140">ImageResizer.Mvc.ImageRequestAction.ExecuteVirtualFileResult()</a>, and <a class="el" href="_intercept_module_8cs_source.html#l00168">ImageResizer.InterceptModule.HandleRequest()</a>.</p>
<div class="fragment"><pre class="fragment">                                                           {
            <span class="keywordtype">int</span> query = path.IndexOf(<span class="charliteral">&#39;?&#39;</span>);
            <span class="keywordflow">if</span> (query &lt; 0) query = path.Length;
            <span class="comment">//Finds the first character that could possibly be part of the extension (before the query)</span>
            <span class="keywordtype">int</span> firstPossibleExtensionChar = path.LastIndexOfAny(<span class="keyword">new</span> <span class="keywordtype">char</span>[] { <span class="charliteral">&#39; &#39;</span>, <span class="charliteral">&#39;/&#39;</span>, <span class="charliteral">&#39;\\&#39;</span> }, query -1) + 1;
            <span class="keywordtype">int</span> extensionStarts = path.IndexOf(<span class="charliteral">&#39;.&#39;</span>, firstPossibleExtensionChar, query - firstPossibleExtensionChar);
            <span class="keywordflow">if</span> (extensionStarts &lt; 0) extensionStarts = query;

            <span class="keywordflow">return</span> path.Substring(extensionStarts, query - extensionStarts);

        }
</pre></div>
</div>
</div>
<a class="anchor" id="a2a48f8c7b7dcb8481d09468986076a0b"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::GuessVirtualPath" ref="a2a48f8c7b7dcb8481d09468986076a0b" args="(string path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a2a48f8c7b7dcb8481d09468986076a0b">ImageResizer.Util.PathUtils.GuessVirtualPath</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Attempts to guess the virtual path from physical path. Will be thrwarted if the path is mapped as a virtual folder inside the application. If the path is a non-physical path, it will be returned as is. Returns null if the physical path isn't a subfolder of the application's physical path. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00362">362</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                           {
            <span class="comment">//If there&#39;s no windows slashes, it&#39;s probably virtual.</span>
            <span class="keywordflow">if</span> (path.IndexOf(<span class="charliteral">&#39;\\&#39;</span>) &lt; 0)
                <span class="keywordflow">return</span> path;
            
            <span class="keywordtype">string</span> appPath = HostingEnvironment.ApplicationPhysicalPath;
            <span class="comment">//Otherwise, try to get the full path so we can compare it.</span>
            <span class="keywordflow">if</span> (!Path.IsPathRooted(path)) path = Path.Combine(appPath, path);
            path = Path.GetFullPath(path);
            <span class="comment">//If it&#39;s a match, strip it and convert it to a virtual path.</span>
            <span class="keywordflow">if</span> (path.StartsWith(appPath, StringComparison.OrdinalIgnoreCase)) {
                <span class="comment">//Convert to app-relative path missing the ~/</span>
                path = path.Remove(0, appPath.Length).TrimStart(<span class="keyword">new</span> <span class="keywordtype">char</span>[] { <span class="charliteral">&#39;/&#39;</span>, <span class="charliteral">&#39;\\&#39;</span>, <span class="charliteral">&#39;~&#39;</span> }).Replace(<span class="charliteral">&#39;\\&#39;</span>, <span class="charliteral">&#39;/&#39;</span>);
                <span class="keywordflow">return</span> PathUtils.ResolveAppRelativeAssumeAppRelative(path);
                
            }
            <span class="keywordflow">return</span> null;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="acb4e92f50556202cd20d914384a1965d"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::MapPathIfAppRelative" ref="acb4e92f50556202cd20d914384a1965d" args="(string path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#acb4e92f50556202cd20d914384a1965d">ImageResizer.Util.PathUtils.MapPathIfAppRelative</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the physcial mapped path for the specified virtual path if it starts with ~, otherwise retuns the original path. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00338">338</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>

<p>Referenced by <a class="el" href="_image_job_8cs_source.html#l00171">ImageResizer.ImageJob.ResolveTemplatedPath()</a>.</p>
<div class="fragment"><pre class="fragment">                                                               {
            <span class="keywordflow">return</span> (path.StartsWith(<span class="stringliteral">&quot;~&quot;</span>, StringComparison.OrdinalIgnoreCase)) ? HostingEnvironment.MapPath(path) : path;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ae552f710cc6327b8508ab4111f75d8c9"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::MergeOverwriteQueryString" ref="ae552f710cc6327b8508ab4111f75d8c9" args="(string path, NameValueCollection newQuerystring)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#ae552f710cc6327b8508ab4111f75d8c9">ImageResizer.Util.PathUtils.MergeOverwriteQueryString</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>newQuerystring</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Overwrites exisisting querystring values in 'path' with the values in 'newQuerystring'. Doesn't support ; querystrings. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td></td></tr>
    <tr><td class="paramname">newQuerystring</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00174">174</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                                        {
            NameValueCollection oldQuery = <a class="code" href="class_image_resizer_1_1_util_1_1_path_utils.html#a32087fab410ab49c140bb773f48bb86d" title="Parses the querystring from the given path into a NameValueCollection. accepts &quot;file?key=value&quot; and &quot;?key=value&amp;amp;key2=value2&quot; formats. (no path is required) UrlDecodes keys and values.">ParseQueryString</a>(path);
            <span class="comment">//Overwrite old with new</span>
            <span class="keywordflow">foreach</span> (<span class="keywordtype">string</span> key <span class="keywordflow">in</span> newQuerystring.Keys)
                <span class="keywordflow">if</span> (key != null) oldQuery[key] = newQuerystring[key];

            <span class="keywordflow">return</span> <a class="code" href="class_image_resizer_1_1_util_1_1_path_utils.html#a213e5ba499d364b9f2e2bce592a09af7" title="Joins the path and querystring. If the path already contains a querystring, they are &#39;append joined&#39; ...">AddQueryString</a>(<a class="code" href="class_image_resizer_1_1_util_1_1_path_utils.html#aac9a36962f98bb9a948ee41411323ebf" title="Removes the query string from the specifed path. If the path is only a querystring, an empty string is returned.">RemoveQueryString</a>(path), <a class="code" href="class_image_resizer_1_1_util_1_1_path_utils.html#ac50e452cbcb5cea21318669c89632755" title="Returns a string querystring in the form &quot;?key=value&amp;amp;key=value&quot;. Keys and values are UrlEncoded a...">BuildQueryString</a>(oldQuery));
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a08767ea3c8bee6716bb5484ae78df1da"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::MergeQueryString" ref="a08767ea3c8bee6716bb5484ae78df1da" args="(string path, NameValueCollection newQuerystring)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a08767ea3c8bee6716bb5484ae78df1da">ImageResizer.Util.PathUtils.MergeQueryString</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NameValueCollection&#160;</td>
          <td class="paramname"><em>newQuerystring</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds the querystring values in 'newQuerystring' to the querystring in Path, but does not overwrite values. Doesn't support ; querystrings. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td></td></tr>
    <tr><td class="paramname">newQuerystring</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00188">188</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                               {
            NameValueCollection oldQuery = <a class="code" href="class_image_resizer_1_1_util_1_1_path_utils.html#a32087fab410ab49c140bb773f48bb86d" title="Parses the querystring from the given path into a NameValueCollection. accepts &quot;file?key=value&quot; and &quot;?key=value&amp;amp;key2=value2&quot; formats. (no path is required) UrlDecodes keys and values.">ParseQueryString</a>(path);
            <span class="comment">//Overwrite new with old</span>
            <span class="keywordflow">foreach</span> (<span class="keywordtype">string</span> key <span class="keywordflow">in</span> oldQuery.Keys)
                newQuerystring[key] = oldQuery[key];

            <span class="keywordflow">return</span> <a class="code" href="class_image_resizer_1_1_util_1_1_path_utils.html#a213e5ba499d364b9f2e2bce592a09af7" title="Joins the path and querystring. If the path already contains a querystring, they are &#39;append joined&#39; ...">AddQueryString</a>(<a class="code" href="class_image_resizer_1_1_util_1_1_path_utils.html#aac9a36962f98bb9a948ee41411323ebf" title="Removes the query string from the specifed path. If the path is only a querystring, an empty string is returned.">RemoveQueryString</a>(path), <a class="code" href="class_image_resizer_1_1_util_1_1_path_utils.html#ac50e452cbcb5cea21318669c89632755" title="Returns a string querystring in the form &quot;?key=value&amp;amp;key=value&quot;. Keys and values are UrlEncoded a...">BuildQueryString</a>(newQuerystring));
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a32087fab410ab49c140bb773f48bb86d"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::ParseQueryString" ref="a32087fab410ab49c140bb773f48bb86d" args="(string path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static NameValueCollection <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a32087fab410ab49c140bb773f48bb86d">ImageResizer.Util.PathUtils.ParseQueryString</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Parses the querystring from the given path into a NameValueCollection. accepts "file?key=value" and "?key=value&amp;amp;key2=value2" formats. (no path is required) UrlDecodes keys and values. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00272">272</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                        {
            NameValueCollection c = <span class="keyword">new</span> NameValueCollection();
            <span class="keywordtype">int</span> firstdelimiter = path.IndexOf(<span class="charliteral">&#39;?&#39;</span>);
            <span class="keywordflow">if</span> (firstdelimiter &lt; 0) <span class="keywordflow">return</span> c;<span class="comment">//Nothing to parse.</span>

            <span class="keywordtype">string</span> querystring = <span class="stringliteral">&quot;&quot;</span>;
            <span class="keywordflow">if</span> (firstdelimiter &lt; path.Length) querystring = path.Substring(firstdelimiter, path.Length - firstdelimiter);
            <span class="keywordflow">if</span> (querystring.Length &gt; 0) {
                <span class="keywordtype">string</span>[] pairs = querystring.Split(<span class="keyword">new</span> <span class="keywordtype">char</span>[] { <span class="charliteral">&#39;?&#39;</span>, <span class="charliteral">&#39;&amp;&#39;</span> }, StringSplitOptions.RemoveEmptyEntries);
                <span class="keywordflow">foreach</span> (<span class="keywordtype">string</span> s <span class="keywordflow">in</span> pairs) {
                    <span class="keywordtype">string</span>[] namevalue = s.Split(<span class="keyword">new</span> <span class="keywordtype">char</span>[] { <span class="charliteral">&#39;=&#39;</span> }, StringSplitOptions.RemoveEmptyEntries);
                    <span class="keywordflow">if</span> (namevalue.Length == 2) {
                        c[HttpUtility.UrlDecode(namevalue[0])] =
                            HttpUtility.UrlDecode(namevalue[1]);
                    } <span class="keywordflow">else</span> {
                        <span class="comment">//No value, so we set a blank value</span>
                        <span class="comment">//Setting a null value would be confusing, as that is how we determine</span>
                        <span class="comment">//whether a certain paramater exists</span>
                        c[HttpUtility.UrlDecode(namevalue[0])] = <span class="stringliteral">&quot;&quot;</span>;

                    }
                }
            }
            <span class="keywordflow">return</span> c;

        }
</pre></div>
</div>
</div>
<a class="anchor" id="a4f54b6e4e17f239fc70eaafd766fc101"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::ParseQueryStringFriendly" ref="a4f54b6e4e17f239fc70eaafd766fc101" args="(string path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static NameValueCollection <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a4f54b6e4e17f239fc70eaafd766fc101">ImageResizer.Util.PathUtils.ParseQueryStringFriendly</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Like ParseQueryString, but permits the leading '?' to be omitted. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00250">250</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                {
            <span class="keywordflow">if</span> (path.IndexOf(<span class="charliteral">&#39;?&#39;</span>) &lt; 0) path = <span class="charliteral">&#39;?&#39;</span> + path;
            <span class="keywordflow">return</span> <a class="code" href="class_image_resizer_1_1_util_1_1_path_utils.html#a32087fab410ab49c140bb773f48bb86d" title="Parses the querystring from the given path into a NameValueCollection. accepts &quot;file?key=value&quot; and &quot;?key=value&amp;amp;key2=value2&quot; formats. (no path is required) UrlDecodes keys and values.">ParseQueryString</a>(path);
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a75ce76cbe824eb05eb74c8ea09883ed1"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::ParseQueryStringFriendlyAllowSemicolons" ref="a75ce76cbe824eb05eb74c8ea09883ed1" args="(string path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static NameValueCollection <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a75ce76cbe824eb05eb74c8ea09883ed1">ImageResizer.Util.PathUtils.ParseQueryStringFriendlyAllowSemicolons</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Like ParseQueryString, but permits the leading '?' to be omitted, and semicolons can be substituted for '&amp;'. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00260">260</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                               {
            <span class="keywordflow">if</span> (path.IndexOf(<span class="charliteral">&#39;?&#39;</span>) &lt; 0 &amp;&amp; path.IndexOf(<span class="charliteral">&#39;;&#39;</span>) != 0) path = <span class="charliteral">&#39;?&#39;</span> + path;
            <span class="keywordflow">return</span> <a class="code" href="class_image_resizer_1_1_util_1_1_path_utils.html#a32087fab410ab49c140bb773f48bb86d" title="Parses the querystring from the given path into a NameValueCollection. accepts &quot;file?key=value&quot; and &quot;?key=value&amp;amp;key2=value2&quot; formats. (no path is required) UrlDecodes keys and values.">ParseQueryString</a>(path.Replace(<span class="charliteral">&#39;;&#39;</span>,<span class="charliteral">&#39;?&#39;</span>));
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a0bf1e4b4833b6ca62efc0ff7c72c93c9"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::RemoveExtension" ref="a0bf1e4b4833b6ca62efc0ff7c72c93c9" args="(string path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a0bf1e4b4833b6ca62efc0ff7c72c93c9">ImageResizer.Util.PathUtils.RemoveExtension</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes the extension from the filename or URL, leaving the querystring intact, where the extension is only the last extension segment. I.e, image.jpg.bmp.tiff?hi would be image.jpg.bmp?hi after this call. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00071">71</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>

<p>Referenced by <a class="el" href="_image_job_8cs_source.html#l00171">ImageResizer.ImageJob.ResolveTemplatedPath()</a>.</p>
<div class="fragment"><pre class="fragment">                                                          {
            <span class="keywordtype">int</span> query = path.IndexOf(<span class="charliteral">&#39;?&#39;</span>);
            <span class="keywordflow">if</span> (query &lt; 0) query = path.Length;
            <span class="comment">//Finds the first character that could possibly be part of the extension (before the query)</span>
            <span class="keywordtype">int</span> firstPossibleExtensionChar = path.LastIndexOfAny(<span class="keyword">new</span> <span class="keywordtype">char</span>[] { <span class="charliteral">&#39; &#39;</span>, <span class="charliteral">&#39;/&#39;</span>, <span class="charliteral">&#39;\\&#39;</span> }, query - 1) + 1;
            <span class="keywordtype">int</span> extensionStarts = path.LastIndexOf(<span class="charliteral">&#39;.&#39;</span>, query - 1, query - firstPossibleExtensionChar);
            <span class="keywordflow">if</span> (extensionStarts &lt; 0) extensionStarts = query;

            <span class="keywordflow">return</span> path.Substring(0, extensionStarts) + path.Substring(query);

        }
</pre></div>
</div>
</div>
<a class="anchor" id="aa95b20ca2e860fd2b869be26bf8ad816"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::RemoveFullExtension" ref="aa95b20ca2e860fd2b869be26bf8ad816" args="(string path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#aa95b20ca2e860fd2b869be26bf8ad816">ImageResizer.Util.PathUtils.RemoveFullExtension</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes all extension segments from the filename or URL, leaving the querystring intact. I.e, image.jpg.bmp.tiff?hi would be image?hi. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00053">53</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                              {
            <span class="keywordtype">int</span> query = path.IndexOf(<span class="charliteral">&#39;?&#39;</span>);
            <span class="keywordflow">if</span> (query &lt; 0) query = path.Length;
            <span class="comment">//Finds the first character that could possibly be part of the extension (before the query)</span>
            <span class="keywordtype">int</span> firstPossibleExtensionChar = path.LastIndexOfAny(<span class="keyword">new</span> <span class="keywordtype">char</span>[] { <span class="charliteral">&#39; &#39;</span>, <span class="charliteral">&#39;/&#39;</span>, <span class="charliteral">&#39;\\&#39;</span> }, query - 1) + 1;
            <span class="keywordtype">int</span> extensionStarts = path.IndexOf(<span class="charliteral">&#39;.&#39;</span>, firstPossibleExtensionChar, query - firstPossibleExtensionChar);
            <span class="keywordflow">if</span> (extensionStarts &lt; 0) extensionStarts = query;

            <span class="keywordflow">return</span> path.Substring(0, extensionStarts) + path.Substring(query);

        }
</pre></div>
</div>
</div>
<a class="anchor" id="aac9a36962f98bb9a948ee41411323ebf"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::RemoveQueryString" ref="aac9a36962f98bb9a948ee41411323ebf" args="(string path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#aac9a36962f98bb9a948ee41411323ebf">ImageResizer.Util.PathUtils.RemoveQueryString</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes the query string from the specifed path. If the path is only a querystring, an empty string is returned. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00238">238</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                            {
            <span class="keywordtype">int</span> delimiter = path.IndexOf(<span class="charliteral">&#39;?&#39;</span>);
            <span class="keywordflow">return</span> delimiter &gt; -1 ? path.Substring(0, delimiter) : path;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="adafb4cd7d85a3567782842873c1a5176"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::ResolveAppRelative" ref="adafb4cd7d85a3567782842873c1a5176" args="(string virtualPath)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#adafb4cd7d85a3567782842873c1a5176">ImageResizer.Util.PathUtils.ResolveAppRelative</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">virtualPath</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00134">134</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>

<p>Referenced by <a class="el" href="_image_builder_8cs_source.html#l00217">ImageResizer.ImageBuilder.GetStreamFromSource()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                    {
            <span class="comment">//resolve tilde</span>
            <span class="keywordflow">if</span> (virtualPath.StartsWith(<span class="stringliteral">&quot;~&quot;</span>, StringComparison.OrdinalIgnoreCase)) <span class="keywordflow">return</span> HostingEnvironment.ApplicationVirtualPath.TrimEnd(<span class="charliteral">&#39;/&#39;</span>) + <span class="charliteral">&#39;/&#39;</span> + virtualPath.TrimStart(<span class="charliteral">&#39;~&#39;</span>, <span class="charliteral">&#39;/&#39;</span>);
            <span class="keywordflow">return</span> virtualPath;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a1a7e4faaa93c5b4d1f3652ccfc4dae82"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::ResolveAppRelativeAssumeAppRelative" ref="a1a7e4faaa93c5b4d1f3652ccfc4dae82" args="(string virtualPath)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a1a7e4faaa93c5b4d1f3652ccfc4dae82">ImageResizer.Util.PathUtils.ResolveAppRelativeAssumeAppRelative</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualPath</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Turns relative paths into domain-relative paths. Turns app-relative paths into domain relative paths. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">virtualPath</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00146">146</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>

<p>Referenced by <a class="el" href="_intercept_module_8cs_source.html#l00061">ImageResizer.InterceptModule.CheckRequest_PostAuthorizeRequest()</a>, <a class="el" href="_image_request_action_8cs_source.html#l00072">ImageResizer.Mvc.ImageRequestAction.ExecuteVirtualPathResult()</a>, and <a class="el" href="_path_utils_8cs_source.html#l00362">ImageResizer.Util.PathUtils.GuessVirtualPath()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                     {

            <span class="keywordflow">if</span> (virtualPath.StartsWith(<span class="stringliteral">&quot;~&quot;</span>)) <span class="keywordflow">return</span> HostingEnvironment.ApplicationVirtualPath.TrimEnd(<span class="charliteral">&#39;/&#39;</span>) + <span class="stringliteral">&quot;/&quot;</span> + virtualPath.TrimStart(<span class="charliteral">&#39;~&#39;</span>, <span class="charliteral">&#39;/&#39;</span>);
            <span class="keywordflow">if</span> (!virtualPath.StartsWith(<span class="stringliteral">&quot;/&quot;</span>)) <span class="keywordflow">return</span> HostingEnvironment.ApplicationVirtualPath.TrimEnd(<span class="charliteral">&#39;/&#39;</span>) + <span class="stringliteral">&quot;/&quot;</span> + virtualPath;
            <span class="keywordflow">return</span> virtualPath;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a9be7ad795b3c8b14fea7e566806f597b"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::ResolveVariablesInPath" ref="a9be7ad795b3c8b14fea7e566806f597b" args="(string pathWithVars, VariableResolverCallback resolver)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a9be7ad795b3c8b14fea7e566806f597b">ImageResizer.Util.PathUtils.ResolveVariablesInPath</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>pathWithVars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a0ffdf593f69e69f70a16c35d5124b4c2">VariableResolverCallback</a>&#160;</td>
          <td class="paramname"><em>resolver</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Replaces variables in paths with their values. Ex. ~/uploads/thumbs/&lt;guid&gt;.&lt;ext&gt;. Standard variables are &lt;ext&gt; (the default extension for the final file type), &lt;guid&gt;, a randomly generated GUID, &lt;filename&gt;, the original filename without it's extension, &lt;path&gt;, the original path and filename without extension, &lt;settings.width&gt;, (any specified settings value except preset), &lt;width&gt; (final width), and &lt;height&gt; (final height). </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pathWithVars</td><td></td></tr>
    <tr><td class="paramname">variables</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00391">391</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>

<p>Referenced by <a class="el" href="_image_job_8cs_source.html#l00171">ImageResizer.ImageJob.ResolveTemplatedPath()</a>.</p>
<div class="fragment"><pre class="fragment">                                                                                                            {
            <span class="keywordtype">string</span> p = pathWithVars;
            <span class="keywordflow">while</span> (p.IndexOf(<span class="charliteral">&#39;&lt;&#39;</span>) &gt; -1) {
                <span class="keywordtype">int</span> start = p.IndexOf(<span class="charliteral">&#39;&lt;&#39;</span>);
                <span class="keywordtype">int</span> stop = p.IndexOf(<span class="charliteral">&#39;&gt;&#39;</span>,start);
                <span class="keywordtype">int</span> bugcheck = p.IndexOf(<span class="charliteral">&#39;&lt;&#39;</span>,start + 1);
                <span class="keywordflow">if</span> (stop &lt; 0 || (bugcheck &gt; -1 &amp;&amp; bugcheck &lt; stop) || stop == start + 1) 
                    <span class="keywordflow">throw</span> <span class="keyword">new</span> ImageProcessingException(<span class="stringliteral">&quot;Destination paths can only contain &lt; and &gt; in matched pairs to designate variables. Path \&quot;&quot;</span> + pathWithVars + <span class="stringliteral">&quot;\&quot; has invalid syntax&quot;</span>);
                <span class="keywordtype">string</span> varName = p.Substring(start + 1,stop - start -1).ToLowerInvariant();

                <span class="keywordtype">string</span> result = resolver(varName);
                <span class="keywordflow">if</span> (result == null)
                    <span class="keywordflow">throw</span> <span class="keyword">new</span> ImageProcessingException(<span class="stringliteral">&quot;Invalid variable name \&quot;&quot;</span> + varName + <span class="stringliteral">&quot;\&quot; in templated path \&quot;&quot;</span> + pathWithVars + <span class="stringliteral">&quot;\&quot;. The variable name may be mispelled, or the variable may not be available with the pipeline you are using.&quot;</span>);
                p = p.Substring(0,start) + result + p.Substring(stop + 1);
            }
            <span class="keywordflow">if</span> (p.IndexOf(<span class="charliteral">&#39;&gt;&#39;</span>) &gt; -1) <span class="keywordflow">throw</span> <span class="keyword">new</span> ImageProcessingException(<span class="stringliteral">&quot;Orphaned &#39;&gt;&#39; in template path \&quot;&quot;</span> + pathWithVars + <span class="stringliteral">&quot;\&quot;.&quot;</span>);
            <span class="keywordflow">return</span> p;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a6e47130783374c72a73f97760843bb07"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::SetExtension" ref="a6e47130783374c72a73f97760843bb07" args="(string path, string newExtension)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a6e47130783374c72a73f97760843bb07">ImageResizer.Util.PathUtils.SetExtension</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>newExtension</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the file extension of the specified path to the specified value, returning the result. If an extension has multiple parts, it will replace all of them. Leading dots will be stripped from 'newExtension' and re-addd as required. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td></td></tr>
    <tr><td class="paramname">newExtension</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00036">36</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                            {
            <span class="keywordtype">int</span> query = path.IndexOf(<span class="charliteral">&#39;?&#39;</span>);
            <span class="keywordflow">if</span> (query &lt; 0) query = path.Length;
            <span class="comment">//Finds the first character that could possibly be part of the extension (before the query)</span>
            <span class="keywordtype">int</span> firstPossibleExtensionChar = path.LastIndexOfAny(<span class="keyword">new</span> <span class="keywordtype">char</span>[] { <span class="charliteral">&#39; &#39;</span>, <span class="charliteral">&#39;/&#39;</span>, <span class="charliteral">&#39;\\&#39;</span> }, query - 1) + 1;
            <span class="keywordtype">int</span> extensionStarts = path.IndexOf(<span class="charliteral">&#39;.&#39;</span>, firstPossibleExtensionChar, query - firstPossibleExtensionChar);
            <span class="keywordflow">if</span> (extensionStarts &lt; 0) extensionStarts = query;

            <span class="keywordflow">return</span> path.Substring(0, extensionStarts) + <span class="stringliteral">&quot;.&quot;</span> + newExtension.TrimStart(<span class="charliteral">&#39;.&#39;</span>) + path.Substring(query);

        }
</pre></div>
</div>
</div>
<a class="anchor" id="acc45f67bc1e770b2971878b809d3a98e"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::ToBase64U" ref="acc45f67bc1e770b2971878b809d3a98e" args="(byte[] data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#acc45f67bc1e770b2971878b809d3a98e">ImageResizer.Util.PathUtils.ToBase64U</a> </td>
          <td>(</td>
          <td class="paramtype">byte[]&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Converts aribtrary bytes to a URL-safe version of base64 (no = padding, with - instead of + and _ instead of /) </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00305">305</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>

<p>Referenced by <a class="el" href="_remote_reader_plugin_8cs_source.html#l00118">ImageResizer.Plugins.RemoteReader.RemoteReaderPlugin.CreateSignedUrl()</a>.</p>
<div class="fragment"><pre class="fragment">                                                    {
            <span class="keywordflow">return</span> Convert.ToBase64String(data).Replace(<span class="stringliteral">&quot;=&quot;</span>, String.Empty).Replace(<span class="charliteral">&#39;+&#39;</span>, <span class="charliteral">&#39;-&#39;</span>).Replace(<span class="charliteral">&#39;/&#39;</span>, <span class="charliteral">&#39;_&#39;</span>);
        }
</pre></div>
</div>
</div>
<a class="anchor" id="abf274218eee80708f27069549777bc38"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::ToBase64U" ref="abf274218eee80708f27069549777bc38" args="(string data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#acc45f67bc1e770b2971878b809d3a98e">ImageResizer.Util.PathUtils.ToBase64U</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Converts aribtrary strings to a URL-safe version of base64 (no = padding, with - instead of + and _ instead of /) </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00322">322</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                    {
            <span class="keywordflow">return</span> <a class="code" href="class_image_resizer_1_1_util_1_1_path_utils.html#acc45f67bc1e770b2971878b809d3a98e" title="Converts aribtrary bytes to a URL-safe version of base64 (no = padding, with - instead of + and _ ins...">ToBase64U</a>(UTF8Encoding.UTF8.GetBytes(data));
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a0ffdf593f69e69f70a16c35d5124b4c2"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::VariableResolverCallback" ref="a0ffdf593f69e69f70a16c35d5124b4c2" args="(string variableName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">delegate string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a0ffdf593f69e69f70a16c35d5124b4c2">ImageResizer.Util.PathUtils.VariableResolverCallback</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>variableName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A method that resolves variable names to values for the ResolveVariablesInPath method. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">variableName</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

</div>
</div>
<hr/><h2>Property Documentation</h2>
<a class="anchor" id="a3a5c9196381928db82048058cb62dc19"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::AppPhysicalPath" ref="a3a5c9196381928db82048058cb62dc19" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a3a5c9196381928db82048058cb62dc19">ImageResizer.Util.PathUtils.AppPhysicalPath</a><code> [static, get]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>If not running in ASP.NET, returns the folder containing the DLL. </p>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00023">23</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>

</div>
</div>
<a class="anchor" id="a210e3c7584b66cf195a0b81ff74e3b2c"></a><!-- doxytag: member="ImageResizer::Util::PathUtils::AppVirtualPath" ref="a210e3c7584b66cf195a0b81ff74e3b2c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string <a class="el" href="class_image_resizer_1_1_util_1_1_path_utils.html#a210e3c7584b66cf195a0b81ff74e3b2c">ImageResizer.Util.PathUtils.AppVirtualPath</a><code> [static, get]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns HostingEnvironment.ApplicationVirtualPath or "/", if asp.net is not running. </p>

<p>Definition at line <a class="el" href="_path_utils_8cs_source.html#l00015">15</a> of file <a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>C:/Users/Administrator/Documents/resizer/Core/Util/<a class="el" href="_path_utils_8cs_source.html">PathUtils.cs</a></li>
</ul>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Events</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
