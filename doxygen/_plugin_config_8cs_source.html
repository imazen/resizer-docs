<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ImageResizer: C:/Users/nathanael/Documents/resizer/Core/Configuration/PluginConfig.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="imageresizer-logo-00aec4.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">ImageResizer
   &#160;<span id="projectnumber">3.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Events</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_c6310732a22f63c0c2fc5595561e68f1.html">Core</a></li><li class="navelem"><a class="el" href="dir_1aa7619aaed8283e79194428e3ce4afd.html">Configuration</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">PluginConfig.cs</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* Copyright (c) 2011 Nathanael Jones. See license.txt */</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">using</span> System;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">using</span> System.Collections.Generic;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">using</span> System.Text;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">using</span> ImageResizer.Encoding;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">using</span> ImageResizer.Plugins;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">using</span> ImageResizer.Caching;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">using</span> ImageResizer.Resizing;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">using</span> ImageResizer.Configuration.Xml;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">using</span> ImageResizer.Configuration.Issues;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">using</span> System.Reflection;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">using</span> System.Diagnostics;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">using</span> System.Collections;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keyword">using</span> System.Collections.Specialized;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="keyword">using</span> ImageResizer.Collections;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">using</span> ImageResizer.Configuration.Logging;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keyword">using</span> System.Web.Compilation;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">using</span> ImageResizer.Configuration.Plugins;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">namespace </span>ImageResizer.Configuration {<span class="comment"></span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">    /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">    /// Provides thread-safe access to plugin addition, removal, and querying methods</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">    /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html">   24</a></span>&#160;<span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html">PluginConfig</a> :<a class="code" href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue_sink.html">IssueSink</a>, <a class="code" href="interface_image_resizer_1_1_encoding_1_1_i_encoder_provider.html">IEncoderProvider</a> {</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        <span class="keyword">protected</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_plugins_1_1_native_dependency_manager.html">NativeDependencyManager</a> ndeps = <span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_plugins_1_1_native_dependency_manager.html">NativeDependencyManager</a>();</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        <span class="keyword">protected</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_config.html">Config</a> c;<span class="comment"></span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">        /// Creates a new plugin config section, attached to the specified parent</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">        /// &lt;param name=&quot;c&quot;&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a6703ae4b05096da29c9698481b9aaf74">   35</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a6703ae4b05096da29c9698481b9aaf74">PluginConfig</a>(<a class="code" href="class_image_resizer_1_1_configuration_1_1_config.html">Config</a> c) : base(<span class="stringliteral">&quot;Plugins&quot;</span>){</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            this.c = c;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            imageBuilderExtensions = <span class="keyword">new</span> SafeList&lt;BuilderExtension&gt;();</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;            imageEncoders = <span class="keyword">new</span> SafeList&lt;IEncoder&gt;();</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;            cachingSystems = <span class="keyword">new</span> SafeList&lt;ICache&gt;();</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;            querystringPlugins = <span class="keyword">new</span> SafeList&lt;IQuerystringPlugin&gt;();</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;            fileExtensionPlugins = <span class="keyword">new</span> SafeList&lt;IFileExtensionPlugin&gt;();</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;            allPlugins = <span class="keyword">new</span> SafeList&lt;IPlugin&gt;();</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;            virtualProviderPlugins = <span class="keyword">new</span> SafeList&lt;IVirtualImageProvider&gt;();</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;            settingsModifierPlugins = <span class="keyword">new</span> SafeList&lt;ISettingsModifier&gt;();</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;            configProviders = <span class="keyword">new</span> SafeList&lt;ICurrentConfigProvider&gt;();</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        }</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                [CLSCompliant(<span class="keyword">false</span>)]</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="keyword">protected</span> <span class="keyword">volatile</span> <span class="keywordtype">bool</span> _pluginsLoaded = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <span class="keyword">protected</span> <span class="keywordtype">object</span> _loadPluginsSync = <span class="keyword">new</span> object();<span class="comment"></span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">        /// Processes the &amp;lt;plugins&amp;gt; section if they are not already loaded. Thread safe.</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">        /// Only executes once.</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a1d93ca55e5f8377b40abadc863268bf9">   56</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a1d93ca55e5f8377b40abadc863268bf9">LoadPlugins</a>() {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;            lock (_loadPluginsSync) {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                <span class="keywordflow">if</span> (_pluginsLoaded) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                loadPluginsInternal();</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                _pluginsLoaded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            }</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        }<span class="comment"></span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">        /// Forces loading of the plugins specified in configuration, even if they have already been loaded. Will add duplicate plugins and throw exceptions if you do not call RemoveAll() first.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#ab75d58ecfa3afcea66c59c36d7384238">   66</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#ab75d58ecfa3afcea66c59c36d7384238">ForceLoadPlugins</a>()</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            lock (_loadPluginsSync)</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                loadPluginsInternal();</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                _pluginsLoaded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        }<span class="comment"></span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">        /// Returns true if the &amp;lt;plugins&amp;gt; section has been processed</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a7d209b043c9336ad088a652f1db15a2a">   77</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> PluginsLoaded {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            <span class="keyword">get</span> {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                lock (_loadPluginsSync) <span class="keywordflow">return</span> _pluginsLoaded;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">        /// Not thread safe. Performs actual work.</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#ab8076e8e03bab02732df5ce3b97bc02f">   86</a></span>&#160;<span class="comment"></span>        <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#ab8076e8e03bab02732df5ce3b97bc02f">loadPluginsInternal</a>() {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            <a class="code" href="class_image_resizer_1_1_configuration_1_1_xml_1_1_node.html">Node</a> plugins = c.getNode(<span class="stringliteral">&quot;plugins&quot;</span>); </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            <span class="keywordflow">if</span> (plugins == null) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="class_image_resizer_1_1_configuration_1_1_xml_1_1_node.html">Node</a> n <span class="keywordflow">in</span> plugins.<a class="code" href="class_image_resizer_1_1_configuration_1_1_xml_1_1_node.html#ab4b05d6bd3d05d834c02125bacde089c">Children</a>) {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                <span class="keywordflow">if</span> (n.<a class="code" href="class_image_resizer_1_1_configuration_1_1_xml_1_1_node.html#ac247c3179e03ec3d4fe77015d77a4acd">Name</a>.Equals(<span class="stringliteral">&quot;add&quot;</span>, StringComparison.OrdinalIgnoreCase)) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                    add_plugin_by_name(n[<span class="stringliteral">&quot;name&quot;</span>],(n.<a class="code" href="class_image_resizer_1_1_configuration_1_1_xml_1_1_node.html#aaf04540927cdc63a65fff0a519e4fd31">Attrs</a>.Count &gt; 1) ? n.<a class="code" href="class_image_resizer_1_1_configuration_1_1_xml_1_1_node.html#aaf04540927cdc63a65fff0a519e4fd31">Attrs</a> : null);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n.<a class="code" href="class_image_resizer_1_1_configuration_1_1_xml_1_1_node.html#ac247c3179e03ec3d4fe77015d77a4acd">Name</a>.Equals(<span class="stringliteral">&quot;remove&quot;</span>, StringComparison.OrdinalIgnoreCase))</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                    remove_plugins_by_name(n[<span class="stringliteral">&quot;name&quot;</span>]);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n.<a class="code" href="class_image_resizer_1_1_configuration_1_1_xml_1_1_node.html#ac247c3179e03ec3d4fe77015d77a4acd">Name</a>.Equals(<span class="stringliteral">&quot;clear&quot;</span>, StringComparison.OrdinalIgnoreCase))</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                    clear_plugins_by_type(n[<span class="stringliteral">&quot;type&quot;</span>]);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                    this.AcceptIssue(<span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue.html">Issue</a>(<span class="stringliteral">&quot;Plugins&quot;</span>, <span class="stringliteral">&quot;Unexpected element &lt;&quot;</span> + n.<a class="code" href="class_image_resizer_1_1_configuration_1_1_xml_1_1_node.html#ac247c3179e03ec3d4fe77015d77a4acd">Name</a> + <span class="stringliteral">&quot;&gt; in &lt;plugins&gt;&lt;/plugins&gt;.&quot;</span>,</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                                                <span class="stringliteral">&quot;Element XML: &quot;</span> + n.ToXmlElement().OuterXml, IssueSeverity.Warning));</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        }<span class="comment"></span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">        /// Returns the subset of installed plugins which implement the specified type or interface</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">        /// &lt;param name=&quot;type&quot;&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">        /// &lt;returns&gt;&lt;/returns&gt;</span></div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a65680754ad868197bab29fe6a380e875">  108</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> IList&lt;IPlugin&gt; <a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a65680754ad868197bab29fe6a380e875">GetPlugins</a>(Type type) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            List&lt;IPlugin&gt; results = <span class="keyword">new</span> List&lt;IPlugin&gt;();</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html">IPlugin</a> p <span class="keywordflow">in</span> AllPlugins)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                <span class="keywordflow">if</span> (type.IsAssignableFrom(p.GetType())) <span class="comment">//Like instance of. Can be a subclass</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                    results.Add(p); </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <span class="keywordflow">return</span> results;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        }<span class="comment"></span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">        /// Returns all registered instances of the specified plugins</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">        /// &lt;typeparam name=&quot;T&quot;&gt;&lt;/typeparam&gt;</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">        /// &lt;returns&gt;&lt;/returns&gt;</span></div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#aee5422e9dcb7ce9efddb88e6819be4f2">  120</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> IList&lt;T&gt; GetAll&lt;T&gt;() {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            List&lt;T&gt; results = <span class="keyword">new</span> List&lt;T&gt;();</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            Type t = typeof(T);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html">IPlugin</a> p <span class="keywordflow">in</span> AllPlugins)</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                <span class="keywordflow">if</span> (t.IsAssignableFrom(p.GetType())) <span class="comment">//Like instance of. Can be a subclass</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                    results.Add((T)p);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <span class="keywordflow">return</span> results;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">        /// Returns true if at least one plugin of the specified type is registered.</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">        /// &lt;param name=&quot;type&quot;&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">        /// &lt;returns&gt;&lt;/returns&gt;</span></div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a2a6ae3b69f516e4eb985364e12e7ef05">  134</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a2a6ae3b69f516e4eb985364e12e7ef05">HasPlugin</a>(Type type) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html">IPlugin</a> p <span class="keywordflow">in</span> AllPlugins)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                <span class="keywordflow">if</span> (type.IsAssignableFrom(p.GetType())) <span class="comment">//Like instance of. Can be a subclass</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">        /// Returns true if 1 or more instances of the type are registered.</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">        /// &lt;typeparam name=&quot;T&quot;&gt;&lt;/typeparam&gt;</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">        /// &lt;returns&gt;&lt;/returns&gt;</span></div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a2ece1300f05d79ec150a52d31e2fbc11">  146</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> Has&lt;T&gt;() {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            <span class="keywordflow">return</span> Comparer&lt;T&gt;.Default.Compare(Get&lt;T&gt;(), <span class="keywordflow">default</span>(T)) != 0;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">        /// Returns the first registerd instance of the specified plugin. For IMultiInstancePlugins, use GetAll()</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">        /// &lt;typeparam name=&quot;T&quot;&gt;&lt;/typeparam&gt;</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">        /// &lt;returns&gt;&lt;/returns&gt;</span></div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#ab473dcee16e081791fe61d052840661c">  156</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> T Get&lt;T&gt;()  {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            Type t = typeof(T);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html">IPlugin</a> p <span class="keywordflow">in</span> AllPlugins)</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                <span class="keywordflow">if</span> (t.IsAssignableFrom(p.GetType())) <span class="comment">//Like instance of. Can be a subclass</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                    <span class="keywordflow">return</span> (T)p;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            <span class="keywordflow">return</span> <span class="keywordflow">default</span>(T);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">        /// Returns the first registered instance of the specified plugin, or creates a new instance if the plugin isn&#39;t installed. </span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">        /// &lt;typeparam name=&quot;T&quot;&gt;&lt;/typeparam&gt;</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">        /// &lt;returns&gt;&lt;/returns&gt;</span></div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a0adcb29e9a366b7e99eded02db35d1fe">  169</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> T GetOrInstall&lt;T&gt;() where T : <a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html">IPlugin</a>, <span class="keyword">new</span>() {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            T instance = Get&lt;T&gt;();</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <span class="keywordflow">if</span> (instance != null) <span class="keywordflow">return</span> instance;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <span class="keyword">new</span> T().Install(this.c);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <span class="keywordflow">return</span> Get&lt;T&gt;();</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">        /// Returns the first registered instance of the specified plugin, or installs the given instance instead, then re-tries the query</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">        /// &lt;typeparam name=&quot;T&quot;&gt;&lt;/typeparam&gt;</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">        /// &lt;param name=&quot;newInstance&quot;&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">        /// &lt;returns&gt;&lt;/returns&gt;</span></div>
<div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a63183b4e4eeaf2e56ef03f959244700b">  184</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> T GetOrInstall&lt;T&gt;(T newInstance) where T : IPlugin {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            T instance = Get&lt;T&gt;();</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            <span class="keywordflow">if</span> (instance != null) <span class="keywordflow">return</span> instance;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <span class="comment">//Our instance may not get installed if there is a duplicate already</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            newInstance.Install(this.c);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            <span class="keywordflow">return</span> Get&lt;T&gt;();</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">        /// Installs the specified plugin, returning the plugin instance. </span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">        /// Convenience method, same as plugin.Install(Config.Current).</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">        /// &lt;param name=&quot;plugin&quot;&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">        /// &lt;returns&gt;&lt;/returns&gt;</span></div>
<div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a1eabf8e8382b95e6bfd4c700e624b8b6">  201</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> IPlugin <a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a1eabf8e8382b95e6bfd4c700e624b8b6">Install</a>(IPlugin plugin) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <span class="keywordflow">return</span> plugin.Install(this.c);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">        /// Attempts uninstallation of the specified plugin, returning true if successful.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">        /// Convenience method, same as plugin.Uninstall(Config.Current).</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">        /// &lt;param name=&quot;plugin&quot;&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">        /// &lt;returns&gt;&lt;/returns&gt;</span></div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a1f30fa1348081b042b660b2a6fd18ace">  211</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a1f30fa1348081b042b660b2a6fd18ace">Uninstall</a>(IPlugin plugin) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="keywordflow">return</span> plugin.Uninstall(this.c);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keyword">protected</span> SafeList&lt;ICurrentConfigProvider&gt; configProviders = null;<span class="comment"></span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">        /// Currently registered ICurrentConfigProviders. </span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a5da572b7b973899c831ba496bfab4d14">  220</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> SafeList&lt;ICurrentConfigProvider&gt; ConfigProviders { <span class="keyword">get</span> { <span class="keywordflow">return</span> configProviders; } }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keyword">protected</span> SafeList&lt;BuilderExtension&gt; imageBuilderExtensions = null;<span class="comment"></span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">        /// Currently registered set of ImageBuilderExtensions. </span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a6555e94f68458b99912b041482cdd318">  227</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> SafeList&lt;BuilderExtension&gt; ImageBuilderExtensions { <span class="keyword">get</span> { <span class="keywordflow">return</span> imageBuilderExtensions; } }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="keyword">protected</span> SafeList&lt;IEncoder&gt; imageEncoders = null;<span class="comment"></span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">        /// Currently registered IEncoders. </span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#aa31cc94b310381ae022cac5b3d05af3d">  233</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> SafeList&lt;IEncoder&gt; ImageEncoders { <span class="keyword">get</span> { <span class="keywordflow">return</span> imageEncoders; } }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keyword">protected</span> SafeList&lt;ICache&gt; cachingSystems = null;<span class="comment"></span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">        /// Currently registered ICache instances</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00239"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a7b17fd669713a797dbfc83eb78b26f4a">  239</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> SafeList&lt;ICache&gt; CachingSystems { <span class="keyword">get</span> { <span class="keywordflow">return</span> cachingSystems; } }</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="keyword">protected</span> SafeList&lt;IQuerystringPlugin&gt; querystringPlugins = null;<span class="comment"></span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">        /// Plugins which accept querystring arguments are registered here.</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#ae571e06c5e5e95bfe4891d4f6db05aab">  245</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> SafeList&lt;IQuerystringPlugin&gt; QuerystringPlugins { <span class="keyword">get</span> { <span class="keywordflow">return</span> querystringPlugins; } }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keyword">protected</span> SafeList&lt;IFileExtensionPlugin&gt; fileExtensionPlugins = null;<span class="comment"></span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">        /// Plugins which accept new file extensions (in the url) are registered here.</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#afd4acc644c1be2e2ac6ec9f928964d63">  252</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> SafeList&lt;IFileExtensionPlugin&gt; FileExtensionPlugins { <span class="keyword">get</span> { <span class="keywordflow">return</span> fileExtensionPlugins; } }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keyword">protected</span> SafeList&lt;IVirtualImageProvider&gt; virtualProviderPlugins = null;<span class="comment"></span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">        /// Plugins which provide virtual files are registered here.</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00259"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a517fd7bc29acf4eb910573fbe34997f7">  259</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> SafeList&lt;IVirtualImageProvider&gt; VirtualProviderPlugins { <span class="keyword">get</span> { <span class="keywordflow">return</span> virtualProviderPlugins; } }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keyword">protected</span> SafeList&lt;ISettingsModifier&gt; settingsModifierPlugins = null;<span class="comment"></span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">        /// Plugins which modify image processing settings.</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a84cb6f5d6e18e51b2c572244888fa0d9">  265</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> SafeList&lt;ISettingsModifier&gt; SettingsModifierPlugins { <span class="keyword">get</span> { <span class="keywordflow">return</span> settingsModifierPlugins; } }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keyword">protected</span> SafeList&lt;IPlugin&gt; allPlugins = null;<span class="comment"></span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">        /// All plugins should be registered here. Used for diagnostic purposes.</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#ab9e6deb9f5ec91b7d9aff1304dae8470">  272</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> SafeList&lt;IPlugin&gt; AllPlugins { <span class="keyword">get</span> { <span class="keywordflow">return</span> allPlugins; } }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keyword">public</span> <a class="code" href="interface_image_resizer_1_1_encoding_1_1_i_encoder_provider.html">IEncoderProvider</a> EncoderProvider { <span class="keyword">get</span> { <span class="keywordflow">return</span> <span class="keyword">this</span>; } }</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keyword">protected</span> <a class="code" href="interface_image_resizer_1_1_configuration_1_1_logging_1_1_i_log_manager.html">ILogManager</a> _logManager = null;<span class="comment"></span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">        /// Returns the most recently registered Logging plugin, or null.</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a9f23aa7ba7f123b82a9bc17fcbac3a06">  281</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <a class="code" href="interface_image_resizer_1_1_configuration_1_1_logging_1_1_i_log_manager.html">ILogManager</a> LogManager { <span class="keyword">get</span> { <span class="keywordflow">return</span> _logManager; } set { _logManager = value; <span class="keywordflow">if</span> (LoggingAvailable != null &amp;&amp; value != null) LoggingAvailable(value); } }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keyword">public</span> delegate <span class="keywordtype">void</span> LoggingAvaialableEvent(<a class="code" href="interface_image_resizer_1_1_configuration_1_1_logging_1_1_i_log_manager.html">ILogManager</a> logger);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keyword">public</span> LoggingAvaialableEvent LoggingAvailable;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">        /// Returns an instance of the first encoder that claims to be able to handle the specified settings.</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">        /// Returns null if no encoders are available.</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">        /// &lt;param name=&quot;settings&quot;&gt;Request settings, like format, quality, colors, dither, etc.&lt;/param&gt;</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">        /// &lt;param name=&quot;original&quot;&gt;May be a Drawing.Image instance, a path, or null. To provide both, set Image.tag to the path. Helps the encoder detect the original format if the format was not specified.</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">        /// May also be used for palette generation hinting by some encoders.&lt;/param&gt;</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">        /// &lt;returns&gt;&lt;/returns&gt;</span></div>
<div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a2e4ab3b7cd725d4048be67bc21725eb4">  295</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <a class="code" href="interface_image_resizer_1_1_encoding_1_1_i_encoder.html">IEncoder</a> <a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a2e4ab3b7cd725d4048be67bc21725eb4">GetEncoder</a>(<a class="code" href="class_image_resizer_1_1_resize_settings.html">ResizeSettings</a> settings, <span class="keywordtype">object</span> original) {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="interface_image_resizer_1_1_encoding_1_1_i_encoder.html">IEncoder</a> e <span class="keywordflow">in</span> this.ImageEncoders) {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                <a class="code" href="interface_image_resizer_1_1_encoding_1_1_i_encoder.html">IEncoder</a> result = e.CreateIfSuitable(settings, original);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                <span class="keywordflow">if</span> (result != null) <span class="keywordflow">return</span> result;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keyword">protected</span> <span class="keywordtype">void</span> remove_plugins_by_name(<span class="keywordtype">string</span> name) {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            Type t = FindPluginType(name);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <span class="keywordflow">if</span> (t == null) <span class="keywordflow">return</span>; <span class="comment">//Failed to acquire type</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            <span class="keywordflow">foreach</span> (IPlugin p <span class="keywordflow">in</span> GetPlugins(t))</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                <span class="keywordflow">if</span> (!p.<a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html#a047c1f46ce451fefc5f2ba3c16b64e8f">Uninstall</a>(c)) AcceptIssue(<span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue.html">Issue</a>(<span class="stringliteral">&quot;Plugin &quot;</span> + t.FullName + <span class="stringliteral">&quot; reported a failed uninstall attempt triggered by a &lt;remove name=\&quot;&quot;</span> + name + <span class="stringliteral">&quot;\&quot; /&gt;.&quot;</span>, <a class="code" href="namespace_image_resizer_1_1_configuration_1_1_issues.html#ada2af2a44c17c99a124cadb8a92f8555">IssueSeverity</a>.Error));</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="keyword">protected</span> <span class="keywordtype">void</span> add_plugin_by_name(<span class="keywordtype">string</span> name, NameValueCollection args) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            IPlugin p = CreatePluginByName(name, args);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <span class="keywordflow">if</span> (p == null) <span class="keywordflow">return</span>; <span class="comment">//failed</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <span class="comment">//Don&#39;t allow duplicates</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="keywordflow">if</span> (!(p is <a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_multi_instance_plugin.html">IMultiInstancePlugin</a>) &amp;&amp; HasPlugin(p.GetType())) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                AcceptIssue(<span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue.html">Issue</a>(<span class="stringliteral">&quot;An instance of the specified plugin (&quot;</span> + p.GetType().ToString() + <span class="stringliteral">&quot;) has already been added. Implement IMultiInstancePlugin if the plugin supports multiple instances.&quot;</span>, <a class="code" href="namespace_image_resizer_1_1_configuration_1_1_issues.html#ada2af2a44c17c99a124cadb8a92f8555">IssueSeverity</a>.ConfigurationError));</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            p.Install(c);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keyword">protected</span> <span class="keywordtype">void</span> clear_plugins_by_type(<span class="keywordtype">string</span> type) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            Type t = null;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <span class="keywordflow">if</span> (<span class="stringliteral">&quot;encoders&quot;</span>.Equals(type, StringComparison.OrdinalIgnoreCase)) t = typeof(<a class="code" href="interface_image_resizer_1_1_encoding_1_1_i_encoder.html">IEncoder</a>);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <span class="keywordflow">if</span> (<span class="stringliteral">&quot;caches&quot;</span>.Equals(type, StringComparison.OrdinalIgnoreCase)) t = typeof(<a class="code" href="interface_image_resizer_1_1_caching_1_1_i_cache.html">ICache</a>);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            <span class="keywordflow">if</span> (<span class="stringliteral">&quot;extensions&quot;</span>.Equals(type, StringComparison.OrdinalIgnoreCase)) t = typeof(<a class="code" href="class_image_resizer_1_1_resizing_1_1_builder_extension.html">BuilderExtension</a>);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            <span class="keywordflow">if</span> (<span class="stringliteral">&quot;all&quot;</span>.Equals(type, StringComparison.OrdinalIgnoreCase) || type == null) t = typeof(IPlugin);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            <span class="keywordflow">if</span> (t == null) this.AcceptIssue(<span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue.html">Issue</a>(<span class="stringliteral">&quot;Unrecognized type value \&quot;&quot;</span> + type + <span class="stringliteral">&quot;\&quot; in &lt;clear type=\&quot;&quot;</span> + type + <span class="stringliteral">&quot;\&quot; /&gt;.&quot;</span>, <a class="code" href="namespace_image_resizer_1_1_configuration_1_1_issues.html#ada2af2a44c17c99a124cadb8a92f8555">IssueSeverity</a>.ConfigurationError));</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                IList&lt;IPlugin&gt; results = GetPlugins(t);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                <span class="keywordflow">foreach</span> (IPlugin p <span class="keywordflow">in</span> results)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                    <span class="keywordflow">if</span> (!p.<a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html#a047c1f46ce451fefc5f2ba3c16b64e8f">Uninstall</a>(c)) AcceptIssue(<span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue.html">Issue</a>(<span class="stringliteral">&quot;Plugin &quot;</span> + p.GetType().FullName + <span class="stringliteral">&quot; reported a failed uninstall attempt triggered by a &lt;clear type=\&quot;&quot;</span> + type + <span class="stringliteral">&quot;\&quot; /&gt;.&quot;</span>, IssueSeverity.Error));</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">        /// This is called to get a sorted list of plugins based on their likelyhood of having the plugin.</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">        /// &lt;param name=&quot;assemblyName&quot;&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">        /// &lt;param name=&quot;pluginName&quot;&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">        /// &lt;returns&gt;&lt;/returns&gt;</span></div>
<div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#abfd691da4173ce55ab972ce0a21cecc7">  346</a></span>&#160;<span class="comment"></span>        <span class="keyword">protected</span> List&lt;string&gt; <a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#abfd691da4173ce55ab972ce0a21cecc7">GetOptimizedAssemblyList</a>(<span class="keywordtype">string</span> assemblyName, <span class="keywordtype">string</span> pluginName) {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            List&lt;string&gt; assemblies = <span class="keyword">new</span> List&lt;string&gt;();</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            <span class="comment">//1) If an assembly was specified, search it first</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <span class="keywordflow">if</span> (assemblyName != null) assemblies.Add(assemblyName);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <span class="comment">//2) Follow by searching the Core, the currently executing assembly</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            assemblies.Add(<span class="stringliteral">&quot;&quot;</span>); <span class="comment">// Defaults to current assembly</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <span class="comment">//3) Add ImageResizer.Plugins.X if it has no dot.</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <span class="keywordflow">if</span> (!pluginName.Contains(<span class="stringliteral">&quot;.&quot;</span>)) assemblies.Add(<span class="stringliteral">&quot;ImageResizer.Plugins.&quot;</span> + pluginName);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            <span class="comment">//4) Next, add all assemblies that have &quot;ImageResizer&quot; in their name </span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            List&lt;string&gt; otherAssemblies = <span class="keyword">new</span> List&lt;string&gt;();</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="comment">//Add ImageResizer-related assemblies first</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <span class="keywordflow">foreach</span> (Assembly a <span class="keywordflow">in</span> AppDomain.CurrentDomain.GetAssemblies()) {<span class="comment">// AppDomain.CurrentDomain.GetAssemblies()</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                <span class="keywordtype">string</span> aname = a.FullName;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                <span class="keywordflow">if</span> (aname.IndexOf(<span class="stringliteral">&quot;ImageResizer&quot;</span>, StringComparison.OrdinalIgnoreCase) &gt; -1) assemblies.Add(<span class="stringliteral">&quot;, &quot;</span> + aname);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                    otherAssemblies.Add(<span class="stringliteral">&quot;, &quot;</span> + aname);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <span class="comment">//5) Last, add all remaining assemblies</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            assemblies.AddRange(otherAssemblies);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <span class="keywordflow">return</span> assemblies;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">        /// Searches all loaded assemblies for the specified type, applying rules and prefixes to resolve the namespace and assembly.</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">        /// Returns null if it could not find the type, and logs an issue.</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">        /// &lt;param name=&quot;searchName&quot;&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">        /// &lt;returns&gt;&lt;/returns&gt;</span></div>
<div class="line"><a name="l00377"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a6157bc4f920bfe02b0190353daef3faa">  377</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> Type <a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a6157bc4f920bfe02b0190353daef3faa">FindPluginType</a>(<span class="keywordtype">string</span> searchName) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            Type t = null;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            <span class="keywordtype">int</span> commaAt = searchName.IndexOf(<span class="charliteral">&#39;,&#39;</span>);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            <span class="keywordtype">int</span> dotAt = searchName.IndexOf(<span class="charliteral">&#39;.&#39;</span>);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="comment">//If there is a dot or period, try the exact name first.</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            <span class="keywordflow">if</span> (dotAt &gt; -1 || commaAt &gt; -1)</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                t = Type.GetType(searchName, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            <span class="keywordflow">if</span> (t != null) <span class="keywordflow">return</span> t;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <span class="comment">//Split the name and assembly apart</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <span class="keywordtype">string</span> assembly = commaAt &gt; -1 ? searchName.Substring(commaAt) : null;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <span class="keywordtype">string</span> name = commaAt &gt; -1 ? searchName.Substring(0, commaAt) : searchName;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            <span class="comment">//Without the assembly specified, does it still have a name?</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="keywordtype">bool</span> hasDot = name.IndexOf(<span class="charliteral">&#39;.&#39;</span>) &gt; -1;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            List&lt;string&gt; alternateNames = <span class="keyword">new</span> List&lt;string&gt;();</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            <span class="comment">//ImageResizer.Plugins.Basic.DefaultEncoder</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            <span class="keywordflow">if</span> (hasDot) alternateNames.Add(name);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            <span class="comment">//DefaultEncoder, NoCache, etc.</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            alternateNames.Add(<span class="stringliteral">&quot;ImageResizer.Plugins.Basic.&quot;</span> + name.TrimStart(<span class="charliteral">&#39;.&#39;</span>));</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            <span class="comment">//Apr4-2012 - Deleted, never used: alternateNames.Add(&quot;ImageResizer.Plugins.Pro.&quot; + name.TrimStart(&#39;.&#39;));</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            <span class="comment">//AnimatedGifs</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <span class="keywordflow">if</span> (!hasDot) alternateNames.Add(<span class="stringliteral">&quot;ImageResizer.Plugins.&quot;</span> + name.Trim(<span class="charliteral">&#39;.&#39;</span>) + <span class="stringliteral">&quot;.&quot;</span> + name.Trim(<span class="charliteral">&#39;.&#39;</span>) + <span class="stringliteral">&quot;Plugin&quot;</span>);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <span class="comment">//AnimatedGifsPlugin</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            <span class="keywordflow">if</span> (!hasDot &amp;&amp; name.EndsWith(<span class="stringliteral">&quot;Plugin&quot;</span>))</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                alternateNames.Add(<span class="stringliteral">&quot;ImageResizer.Plugins.&quot;</span> + name.Substring(0, name.Length - 6).Trim(<span class="charliteral">&#39;.&#39;</span>) + <span class="stringliteral">&quot;.&quot;</span> + name.Trim(<span class="charliteral">&#39;.&#39;</span>));</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <span class="comment">//Apr4-2012 - Deleted, never used: //Basic.DefaultEncoder</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            <span class="comment">//Apr4-2012 - Deleted, never used: alternateNames.Add(&quot;ImageResizer.Plugins.&quot; + name.TrimStart(&#39;.&#39;));</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            <span class="comment">//For the deprecated convention of naming the plugin namespace and class the same.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            <span class="keywordflow">if</span> (!hasDot) alternateNames.Add(<span class="stringliteral">&quot;ImageResizer.Plugins.&quot;</span> + name.Trim(<span class="charliteral">&#39;.&#39;</span>) + <span class="stringliteral">&quot;.&quot;</span> + name.Trim(<span class="charliteral">&#39;.&#39;</span>));</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <span class="comment">//Apr4-2012 - Deleted, never used: //Plugins.Basic.DefaultEncoder</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="comment">//Apr4-2012 - Deleted, never used: alternateNames.Add(&quot;ImageResizer.&quot; + name.TrimStart(&#39;.&#39;));</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="comment">//PluginWithNoNamespace</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="keywordflow">if</span> (!hasDot) alternateNames.Add(name);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            <span class="comment">//Get a list of assemblies, sorted by likelyhood of a match</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            List&lt;string&gt; assemblies = GetOptimizedAssemblyList(assembly,name);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            <span class="comment">//Now multiply </span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            List&lt;string&gt; qualifiedNames = <span class="keyword">new</span> List&lt;string&gt;(assemblies.Count * alternateNames.Count);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <span class="comment">//For each assembly, try each namespace-qualified class name.</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            <span class="keywordflow">foreach</span> (<span class="keywordtype">string</span> assemblyName <span class="keywordflow">in</span> assemblies) {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                <span class="keywordflow">foreach</span> (<span class="keywordtype">string</span> className <span class="keywordflow">in</span> alternateNames)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                    qualifiedNames.Add(className + assemblyName);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                <span class="comment">//Now, try them all.</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                <span class="keywordflow">foreach</span> (<span class="keywordtype">string</span> s <span class="keywordflow">in</span> qualifiedNames) {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                    Debug.WriteLine(<span class="stringliteral">&quot;Trying &quot;</span> + s);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                    t = Type.GetType(s, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                    <span class="keywordflow">if</span> (t != null) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                        Debug.WriteLine(<span class="stringliteral">&quot;Success!&quot;</span>);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                        <span class="keywordflow">return</span> t;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                    }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                }</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            } <span class="keywordflow">catch</span> (System.Security.SecurityException sx) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                this.AcceptIssue(<span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue.html">Issue</a>(<span class="stringliteral">&quot;Failed to load plugin \&quot;&quot;</span> + searchName + <span class="stringliteral">&quot;\&quot; due to ASP.NET trust configuration. &quot;</span>,</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                                <span class="stringliteral">&quot;You may need to increase the trust level for this plugin to load properly. Error details: \n&quot;</span> +</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                                sx.Message + <span class="stringliteral">&quot;\n&quot;</span> + sx.StackTrace, <a class="code" href="namespace_image_resizer_1_1_configuration_1_1_issues.html#ada2af2a44c17c99a124cadb8a92f8555">IssueSeverity</a>.Error));</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            }</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            <span class="comment">//Ok, time to log problem.</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            <span class="keywordflow">if</span> (t == null) {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                StringBuilder attempts = <span class="keyword">new</span> StringBuilder();</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                <span class="keywordflow">foreach</span> (<span class="keywordtype">string</span> s <span class="keywordflow">in</span> qualifiedNames)</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                    attempts.Append(<span class="stringliteral">&quot;, \&quot;&quot;</span> + s + <span class="stringliteral">&quot;\&quot;&quot;</span>);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                this.AcceptIssue(<span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue.html">Issue</a>(<span class="stringliteral">&quot;Failed to load plugin by name \&quot;&quot;</span> + searchName + <span class="stringliteral">&quot;\&quot;&quot;</span>,</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                    <span class="stringliteral">&quot;Verify the plugin DLL is located in /bin, and that the name is spelled correctly. \n&quot;</span> +</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                    <span class="stringliteral">&quot;Attempted using \&quot;&quot;</span> + searchName + <span class="stringliteral">&quot;\&quot;&quot;</span> + attempts.ToString() + <span class="stringliteral">&quot;.&quot;</span>, IssueSeverity.ConfigurationError));</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            }</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            <span class="keywordflow">return</span> t;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keyword">protected</span> IPlugin CreatePluginByName(<span class="keywordtype">string</span> name, NameValueCollection args) {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            Type t = FindPluginType(name);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="keywordflow">if</span> (t == null) <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <span class="keywordflow">return</span> CreatePluginByType(t, args);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keyword">protected</span> IPlugin CreatePluginByType(Type t, NameValueCollection args) {</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="comment">//TODO - perhaps manually select the constructor ? </span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="comment">//ConstructorInfo ci = null;</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="keywordtype">bool</span> downloadDependencies = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <span class="keywordflow">if</span> (args != null &amp;&amp; args[<span class="stringliteral">&quot;downloadNativeDependencies&quot;</span>] != null) {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                downloadDependencies = <span class="stringliteral">&quot;true&quot;</span>.Equals(args[<span class="stringliteral">&quot;downloadNativeDependencies&quot;</span>], StringComparison.OrdinalIgnoreCase);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                <span class="keywordflow">if</span> (args.Count == 2) args = null; <span class="comment">//Don&#39;t require plugins to have an argument-supporting constructor just for downloadNativeDependencies</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                <span class="comment">//&#39;name&#39; is included in args, remember.</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                ndeps.EnsureLoaded(t.Assembly);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            <span class="keywordtype">bool</span> hasConstructor = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            <span class="keywordflow">if</span> (args != null &amp;&amp; t.GetConstructor(<span class="keyword">new</span> Type[] { typeof(NameValueCollection) }) == null) {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                args = null; <span class="comment">//The plugin doesn&#39;t accept arguments</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                this.AcceptIssue(<span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue.html">Issue</a>(<span class="stringliteral">&quot;Plugins&quot;</span>, <span class="stringliteral">&quot;The plugin &quot;</span> + t.ToString() + <span class="stringliteral">&quot; doesn&#39;t support constructor arguments.&quot;</span>,</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                    <span class="stringliteral">&quot;To support arguments in the &lt;add&gt; element, the plugin must have a public constructor that accepts a NameValueCollection argument.&quot;</span>, IssueSeverity.ConfigurationError));</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (args == null &amp;&amp; t.GetConstructor(System.Type.EmptyTypes) == null) {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                <span class="keywordtype">bool</span> acceptsArgs = t.GetConstructor(<span class="keyword">new</span> Type[] { typeof(NameValueCollection) }) == null;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                <span class="keywordflow">if</span> (acceptsArgs)</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                    this.AcceptIssue(<span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue.html">Issue</a>(<span class="stringliteral">&quot;Plugins&quot;</span>, <span class="stringliteral">&quot;The plugin &quot;</span> + t.ToString() + <span class="stringliteral">&quot; requires arguments in the &lt;add&gt; element. Refer to the plugin documentation for details.&quot;</span>,</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                    null, IssueSeverity.ConfigurationError));</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                    this.AcceptIssue(<span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue.html">Issue</a>(<span class="stringliteral">&quot;Plugins&quot;</span>, <span class="stringliteral">&quot;The plugin &quot;</span> + t.ToString() + <span class="stringliteral">&quot; does not have a constuctor   Constructor() or Constructor(NameValueCollection args).&quot;</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                    , <span class="stringliteral">&quot;To be compatible with the &lt;plugins&gt; section, a plugin must implement IPlugin and define one or more of the above constructors publicly.&quot;</span>,</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                     IssueSeverity.Critical));</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                    hasConstructor = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                }</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            } </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            <span class="keywordflow">if</span> (hasConstructor || Debugger.IsAttached){</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                <span class="keywordtype">object</span> plugin = null;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                <span class="keywordflow">if</span> (args == null)</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                    plugin = Activator.CreateInstance(t, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                    plugin = Activator.CreateInstance(t, args);</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                <span class="keywordflow">if</span> (!(plugin is IPlugin))</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                    this.AcceptIssue(<span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue.html">Issue</a>(<span class="stringliteral">&quot;Plugins&quot;</span>, <span class="stringliteral">&quot;Specified plugin doesn&#39;t implement IPlugin as required: &quot;</span> + t.ToString(), null, IssueSeverity.ConfigurationError));</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                <span class="keywordflow">return</span> plugin as IPlugin;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;            }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <span class="keywordflow">return</span> null;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">        /// For use only by plugins during .Uninstall.</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">        /// Removes the specified plugin from AllPlugins, QuerystringPlugins, CachingSystems, ImageEncoders, and ImageBuiderExtensions, based</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">        /// on which interfaces the instance implements.</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">        /// Plugins may register event handlers and modify settings - thus you should use the plugin&#39;s method to uninstall them vs. using this method.</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">        /// &lt;param name=&quot;plugin&quot;&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l00521"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a0aae69c8ce761b0b5869fd63e2bcb863">  521</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a0aae69c8ce761b0b5869fd63e2bcb863">remove_plugin</a>(<span class="keywordtype">object</span> plugin) {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            <span class="keywordflow">if</span> (plugin is IPlugin) AllPlugins.Remove(plugin as IPlugin);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            <span class="keywordflow">if</span> (plugin is <a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_querystring_plugin.html">IQuerystringPlugin</a>) QuerystringPlugins.Remove(plugin as IQuerystringPlugin);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            <span class="keywordflow">if</span> (plugin is <a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_file_extension_plugin.html">IFileExtensionPlugin</a>) FileExtensionPlugins.Remove(plugin as IFileExtensionPlugin);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            <span class="keywordflow">if</span> (plugin is <a class="code" href="interface_image_resizer_1_1_caching_1_1_i_cache.html">ICache</a>) CachingSystems.Remove(plugin as ICache);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            <span class="keywordflow">if</span> (plugin is <a class="code" href="interface_image_resizer_1_1_encoding_1_1_i_encoder.html">IEncoder</a>) ImageEncoders.Remove(plugin as IEncoder);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            <span class="keywordflow">if</span> (plugin is <a class="code" href="class_image_resizer_1_1_resizing_1_1_builder_extension.html">BuilderExtension</a>) ImageBuilderExtensions.Remove(plugin as BuilderExtension);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            <span class="keywordflow">if</span> (plugin is <a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider.html">IVirtualImageProvider</a>) VirtualProviderPlugins.Remove(plugin as IVirtualImageProvider);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            <span class="keywordflow">if</span> (plugin is <a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_settings_modifier.html">ISettingsModifier</a>) SettingsModifierPlugins.Remove(plugin as ISettingsModifier);</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            <span class="keywordflow">if</span> (plugin is <a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_current_config_provider.html">ICurrentConfigProvider</a>) ConfigProviders.Remove(plugin as ICurrentConfigProvider);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            <span class="keywordflow">if</span> (plugin is <a class="code" href="interface_image_resizer_1_1_configuration_1_1_logging_1_1_i_log_manager.html">ILogManager</a> &amp;&amp; LogManager == plugin) LogManager = null;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        }</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">        /// Only for use by plugins during IPlugin.Install. Call Plugin.Install instead of this method, since plugins often must perform other initialization actions.</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">        /// Adds the specified plugin to AllPlugins, QuerystringPlugins, CachingSystems, ImageEncoders, and ImageBuiderExtensions, based</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">        /// on which interfaces the instance implements. For ICache and IEncoder, the plugin is inserted at the beginning of CachingSystems and ImageEncoders respectively.</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">        /// To reiterate, plugins may register event handlers and modify settings - thus you should use the plugin&#39;s method to uninstall them vs. using this method.</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">        /// Will not register a plugin that is already installed, unless it implementes IMultiInstancePlugin.</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">        /// &lt;param name=&quot;plugin&quot;&gt;&lt;/param&gt;</span></div>
<div class="line"><a name="l00542"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a24a5d36dc59eee7d980a8e9b4d00ead1">  542</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a24a5d36dc59eee7d980a8e9b4d00ead1">add_plugin</a>(IPlugin plugin) {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            <span class="keywordflow">if</span> (!(plugin is IMultiInstancePlugin) &amp;&amp; HasPlugin(plugin.GetType())) {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                AcceptIssue(<span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue.html">Issue</a>(<span class="stringliteral">&quot;An instance of the specified plugin (&quot;</span> + plugin.GetType().ToString() + <span class="stringliteral">&quot;) has already been registered.&quot;</span>,</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                                    <span class="stringliteral">&quot;The plugin should implement IMultiInstancePlugin to support multiple instances.&quot;</span>, <a class="code" href="namespace_image_resizer_1_1_configuration_1_1_issues.html#ada2af2a44c17c99a124cadb8a92f8555">IssueSeverity</a>.Error));</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            }</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            AllPlugins.Add(plugin);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            <span class="keywordflow">if</span> (plugin is <a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_querystring_plugin.html">IQuerystringPlugin</a>) QuerystringPlugins.Add(plugin as IQuerystringPlugin);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <span class="keywordflow">if</span> (plugin is <a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_file_extension_plugin.html">IFileExtensionPlugin</a>) FileExtensionPlugins.Add(plugin as IFileExtensionPlugin);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            <span class="keywordflow">if</span> (plugin is <a class="code" href="interface_image_resizer_1_1_caching_1_1_i_cache.html">ICache</a>) CachingSystems.AddFirst(plugin as ICache);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            <span class="keywordflow">if</span> (plugin is <a class="code" href="interface_image_resizer_1_1_encoding_1_1_i_encoder.html">IEncoder</a>) ImageEncoders.AddFirst(plugin as IEncoder);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            <span class="keywordflow">if</span> (plugin is <a class="code" href="class_image_resizer_1_1_resizing_1_1_builder_extension.html">BuilderExtension</a>) ImageBuilderExtensions.Add(plugin as BuilderExtension);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            <span class="keywordflow">if</span> (plugin is <a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider.html">IVirtualImageProvider</a>) VirtualProviderPlugins.Add(plugin as IVirtualImageProvider);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            <span class="keywordflow">if</span> (plugin is <a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_settings_modifier.html">ISettingsModifier</a>) SettingsModifierPlugins.Add(plugin as ISettingsModifier);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            <span class="keywordflow">if</span> (plugin is <a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_current_config_provider.html">ICurrentConfigProvider</a>) ConfigProviders.Add(plugin as ICurrentConfigProvider);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            <span class="keywordflow">if</span> (plugin is <a class="code" href="interface_image_resizer_1_1_configuration_1_1_logging_1_1_i_log_manager.html">ILogManager</a>) LogManager = plugin as ILogManager;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">        /// &lt;summary&gt;</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">        /// Removes all plugins, of every kind. Logs any errors encountered. (Not all plugins support uninstallation)</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">        /// &lt;/summary&gt;</span></div>
<div class="line"><a name="l00567"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a57ce330ef6dbb0322d337f6c1f075e9e">  567</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a57ce330ef6dbb0322d337f6c1f075e9e">RemoveAll</a>() {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            <span class="comment">//Follow uninstall protocol</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            <span class="keywordflow">foreach</span> (IPlugin p <span class="keywordflow">in</span> AllPlugins)</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                <span class="keywordflow">if</span> (!p.<a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html#a047c1f46ce451fefc5f2ba3c16b64e8f">Uninstall</a>(c))</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                    this.AcceptIssue(<span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue.html">Issue</a>(<span class="stringliteral">&quot;Uninstall of &quot;</span> + p.ToString() + <span class="stringliteral">&quot; reported failure.&quot;</span>, IssueSeverity.Error));</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            IList[] collections = <span class="keyword">new</span> IList[]{AllPlugins.GetCollection(),QuerystringPlugins.GetCollection(),FileExtensionPlugins.GetCollection()</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                                                ,CachingSystems.GetCollection(),ImageEncoders.GetCollection(),ImageBuilderExtensions.GetCollection()};</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            <span class="comment">//Then check all collections, logging an issue if they aren&#39;t empty.</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            <span class="keywordflow">foreach</span>(IList coll <span class="keywordflow">in</span> collections){</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                <span class="keywordflow">if</span> (coll.Count &gt; 0){</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                    <span class="keywordtype">string</span> items = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                    <span class="keywordflow">foreach</span>(<span class="keywordtype">object</span> item <span class="keywordflow">in</span> coll)</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                        items += item.ToString() + <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                    this.AcceptIssue(<span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue.html">Issue</a>(<span class="stringliteral">&quot;Collection &quot;</span> + coll.ToString() + <span class="stringliteral">&quot; was not empty after RemoveAllPlugins() executed!&quot;</span>,</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                                        <span class="stringliteral">&quot;Remaining items: &quot;</span> + items, IssueSeverity.Error));</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                }</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        }</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div>
<div class="line"><a name="l00590"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#add9c59824bbfe64688ec0329c6e223bc">  590</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> IEnumerable&lt;IIssue&gt; <a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#add9c59824bbfe64688ec0329c6e223bc">GetIssues</a>() {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;            List&lt;IIssue&gt; issues = <span class="keyword">new</span> List&lt;IIssue&gt;(base.GetIssues());</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            <span class="comment">//Verify all plugins are registered as IPlugins also.</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            <span class="comment">//Verify there is something other than NoCache registered</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <span class="keywordflow">if</span> (c.Plugins.CachingSystems.First is ImageResizer.Plugins.Basic.NoCache)</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                issues.Add(<span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue.html">Issue</a>(<span class="stringliteral">&quot;NoCache is only for development usage, and cannot scale to production use.&quot;</span>, <span class="stringliteral">&quot;Add DiskCache or CloudFront for production use&quot;</span>, <a class="code" href="namespace_image_resizer_1_1_configuration_1_1_issues.html#ada2af2a44c17c99a124cadb8a92f8555">IssueSeverity</a>.Warning));</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <span class="comment">//Verify NoCache is registered</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            <span class="keywordflow">if</span> (!c.Plugins.Has&lt;ImageResizer.Plugins.Basic.NoCache&gt;())</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                issues.Add(<span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue.html">Issue</a>(<span class="stringliteral">&quot;NoCache should not be removed from the plugins collection.&quot;</span>,</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                    <span class="stringliteral">&quot;Simply add the new ICache plugin later for it to take precedence. NoCache is still required as a fallback by most caching plugins.&quot;</span>,</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                     <a class="code" href="namespace_image_resizer_1_1_configuration_1_1_issues.html#ada2af2a44c17c99a124cadb8a92f8555">IssueSeverity</a>.Error));</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            <span class="keywordflow">if</span> (c.Plugins.ImageEncoders.First == null)</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                issues.Add(<span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue.html">Issue</a>(<span class="stringliteral">&quot;No encoders are registered! Without an image encoder, the pipeline cannot function.&quot;</span>, <a class="code" href="namespace_image_resizer_1_1_configuration_1_1_issues.html#ada2af2a44c17c99a124cadb8a92f8555">IssueSeverity</a>.Error));</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            issues.AddRange(ndeps.GetIssues());</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <span class="keywordflow">return</span> issues;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        }</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    }</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;}</div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_plugin_config_html_a2e4ab3b7cd725d4048be67bc21725eb4"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a2e4ab3b7cd725d4048be67bc21725eb4">ImageResizer.Configuration.PluginConfig.GetEncoder</a></div><div class="ttdeci">IEncoder GetEncoder(ResizeSettings settings, object original)</div><div class="ttdoc">Returns an instance of the first encoder that claims to be able to handle the specified settings...</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_config_8cs_source.html#l00295">PluginConfig.cs:295</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_plugin_config_html_a1f30fa1348081b042b660b2a6fd18ace"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a1f30fa1348081b042b660b2a6fd18ace">ImageResizer.Configuration.PluginConfig.Uninstall</a></div><div class="ttdeci">bool Uninstall(IPlugin plugin)</div><div class="ttdoc">Attempts uninstallation of the specified plugin, returning true if successful. Convenience method...</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_config_8cs_source.html#l00211">PluginConfig.cs:211</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_plugin_config_html"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_plugin_config.html">ImageResizer.Configuration.PluginConfig</a></div><div class="ttdoc">Provides thread-safe access to plugin addition, removal, and querying methods </div><div class="ttdef"><b>Definition:</b> <a href="_plugin_config_8cs_source.html#l00024">PluginConfig.cs:24</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_config_html"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_config.html">ImageResizer.Configuration.Config</a></div><div class="ttdef"><b>Definition:</b> <a href="_config_8cs_source.html#l00022">Config.cs:22</a></div></div>
<div class="ttc" id="interface_image_resizer_1_1_caching_1_1_i_cache_html"><div class="ttname"><a href="interface_image_resizer_1_1_caching_1_1_i_cache.html">ImageResizer.Caching.ICache</a></div><div class="ttdoc">Provides caching behavior </div><div class="ttdef"><b>Definition:</b> <a href="_i_cache_8cs_source.html#l00012">ICache.cs:12</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_xml_1_1_node_html"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_xml_1_1_node.html">ImageResizer.Configuration.Xml.Node</a></div><div class="ttdoc">No support for namespaces, no intention of eventual serialization. Everything is case-insensitive, but preserves case. Not thread safe. </div><div class="ttdef"><b>Definition:</b> <a href="_node_8cs_source.html#l00015">Node.cs:15</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_plugin_config_html_a6157bc4f920bfe02b0190353daef3faa"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a6157bc4f920bfe02b0190353daef3faa">ImageResizer.Configuration.PluginConfig.FindPluginType</a></div><div class="ttdeci">Type FindPluginType(string searchName)</div><div class="ttdoc">Searches all loaded assemblies for the specified type, applying rules and prefixes to resolve the nam...</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_config_8cs_source.html#l00377">PluginConfig.cs:377</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_xml_1_1_node_html_aaf04540927cdc63a65fff0a519e4fd31"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_xml_1_1_node.html#aaf04540927cdc63a65fff0a519e4fd31">ImageResizer.Configuration.Xml.Node.Attrs</a></div><div class="ttdeci">NameValueCollection Attrs</div><div class="ttdoc">Attributes </div><div class="ttdef"><b>Definition:</b> <a href="_node_8cs_source.html#l00056">Node.cs:56</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_plugin_config_html_ab8076e8e03bab02732df5ce3b97bc02f"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#ab8076e8e03bab02732df5ce3b97bc02f">ImageResizer.Configuration.PluginConfig.loadPluginsInternal</a></div><div class="ttdeci">void loadPluginsInternal()</div><div class="ttdoc">Not thread safe. Performs actual work. </div><div class="ttdef"><b>Definition:</b> <a href="_plugin_config_8cs_source.html#l00086">PluginConfig.cs:86</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_plugin_config_html_a1d93ca55e5f8377b40abadc863268bf9"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a1d93ca55e5f8377b40abadc863268bf9">ImageResizer.Configuration.PluginConfig.LoadPlugins</a></div><div class="ttdeci">void LoadPlugins()</div><div class="ttdoc">Processes the &amp;lt;plugins&amp;gt; section if they are not already loaded. Thread safe. Only executes once...</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_config_8cs_source.html#l00056">PluginConfig.cs:56</a></div></div>
<div class="ttc" id="namespace_image_resizer_1_1_configuration_1_1_issues_html_ada2af2a44c17c99a124cadb8a92f8555"><div class="ttname"><a href="namespace_image_resizer_1_1_configuration_1_1_issues.html#ada2af2a44c17c99a124cadb8a92f8555">ImageResizer.Configuration.Issues.IssueSeverity</a></div><div class="ttdeci">IssueSeverity</div><div class="ttdef"><b>Definition:</b> <a href="_issue_severity_8cs_source.html#l00007">IssueSeverity.cs:7</a></div></div>
<div class="ttc" id="interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider_html"><div class="ttname"><a href="interface_image_resizer_1_1_plugins_1_1_i_virtual_image_provider.html">ImageResizer.Plugins.IVirtualImageProvider</a></div><div class="ttdoc">Implement this to allow your class (or VirtualPathProvider subclass) to be used without registering i...</div><div class="ttdef"><b>Definition:</b> <a href="_i_virtual_image_provider_8cs_source.html#l00011">IVirtualImageProvider.cs:11</a></div></div>
<div class="ttc" id="interface_image_resizer_1_1_plugins_1_1_i_settings_modifier_html"><div class="ttname"><a href="interface_image_resizer_1_1_plugins_1_1_i_settings_modifier.html">ImageResizer.Plugins.ISettingsModifier</a></div><div class="ttdoc">Provides a way to modify settings before they reach the managed API. Does not execute early enough to...</div><div class="ttdef"><b>Definition:</b> <a href="_i_settings_modifier_8cs_source.html#l00009">ISettingsModifier.cs:9</a></div></div>
<div class="ttc" id="interface_image_resizer_1_1_plugins_1_1_i_querystring_plugin_html"><div class="ttname"><a href="interface_image_resizer_1_1_plugins_1_1_i_querystring_plugin.html">ImageResizer.Plugins.IQuerystringPlugin</a></div><div class="ttdoc">For plugins that access the query string (important!) </div><div class="ttdef"><b>Definition:</b> <a href="_i_querystring_plugin_8cs_source.html#l00010">IQuerystringPlugin.cs:10</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_plugin_config_html_ab75d58ecfa3afcea66c59c36d7384238"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#ab75d58ecfa3afcea66c59c36d7384238">ImageResizer.Configuration.PluginConfig.ForceLoadPlugins</a></div><div class="ttdeci">void ForceLoadPlugins()</div><div class="ttdoc">Forces loading of the plugins specified in configuration, even if they have already been loaded...</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_config_8cs_source.html#l00066">PluginConfig.cs:66</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_plugin_config_html_a65680754ad868197bab29fe6a380e875"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a65680754ad868197bab29fe6a380e875">ImageResizer.Configuration.PluginConfig.GetPlugins</a></div><div class="ttdeci">IList&lt; IPlugin &gt; GetPlugins(Type type)</div><div class="ttdoc">Returns the subset of installed plugins which implement the specified type or interface ...</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_config_8cs_source.html#l00108">PluginConfig.cs:108</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_xml_1_1_node_html_ab4b05d6bd3d05d834c02125bacde089c"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_xml_1_1_node.html#ab4b05d6bd3d05d834c02125bacde089c">ImageResizer.Configuration.Xml.Node.Children</a></div><div class="ttdeci">List&lt; Node &gt; Children</div><div class="ttdoc">Child nodes </div><div class="ttdef"><b>Definition:</b> <a href="_node_8cs_source.html#l00093">Node.cs:93</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_plugin_config_html_a24a5d36dc59eee7d980a8e9b4d00ead1"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a24a5d36dc59eee7d980a8e9b4d00ead1">ImageResizer.Configuration.PluginConfig.add_plugin</a></div><div class="ttdeci">void add_plugin(IPlugin plugin)</div><div class="ttdoc">Only for use by plugins during IPlugin.Install. Call Plugin.Install instead of this method...</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_config_8cs_source.html#l00542">PluginConfig.cs:542</a></div></div>
<div class="ttc" id="interface_image_resizer_1_1_plugins_1_1_i_multi_instance_plugin_html"><div class="ttname"><a href="interface_image_resizer_1_1_plugins_1_1_i_multi_instance_plugin.html">ImageResizer.Plugins.IMultiInstancePlugin</a></div><div class="ttdoc">Tag your plugin with this interface if it supports having multiple instances registered at once ...</div><div class="ttdef"><b>Definition:</b> <a href="_i_multi_instance_plugin_8cs_source.html#l00009">IMultiInstancePlugin.cs:9</a></div></div>
<div class="ttc" id="interface_image_resizer_1_1_configuration_1_1_logging_1_1_i_log_manager_html"><div class="ttname"><a href="interface_image_resizer_1_1_configuration_1_1_logging_1_1_i_log_manager.html">ImageResizer.Configuration.Logging.ILogManager</a></div><div class="ttdef"><b>Definition:</b> <a href="_i_log_manager_8cs_source.html#l00007">ILogManager.cs:7</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_plugin_config_html_add9c59824bbfe64688ec0329c6e223bc"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#add9c59824bbfe64688ec0329c6e223bc">ImageResizer.Configuration.PluginConfig.GetIssues</a></div><div class="ttdeci">override IEnumerable&lt; IIssue &gt; GetIssues()</div><div class="ttdoc">Returns a copy of the list of reported issues. </div><div class="ttdef"><b>Definition:</b> <a href="_plugin_config_8cs_source.html#l00590">PluginConfig.cs:590</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_xml_1_1_node_html_ac247c3179e03ec3d4fe77015d77a4acd"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_xml_1_1_node.html#ac247c3179e03ec3d4fe77015d77a4acd">ImageResizer.Configuration.Xml.Node.Name</a></div><div class="ttdeci">string Name</div><div class="ttdoc">The name of the element. </div><div class="ttdef"><b>Definition:</b> <a href="_node_8cs_source.html#l00084">Node.cs:84</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_plugin_config_html_a2a6ae3b69f516e4eb985364e12e7ef05"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a2a6ae3b69f516e4eb985364e12e7ef05">ImageResizer.Configuration.PluginConfig.HasPlugin</a></div><div class="ttdeci">bool HasPlugin(Type type)</div><div class="ttdoc">Returns true if at least one plugin of the specified type is registered. </div><div class="ttdef"><b>Definition:</b> <a href="_plugin_config_8cs_source.html#l00134">PluginConfig.cs:134</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_plugins_1_1_native_dependency_manager_html"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_plugins_1_1_native_dependency_manager.html">ImageResizer.Configuration.Plugins.NativeDependencyManager</a></div><div class="ttdoc">Provides automatic download of native dependencies (which VS doesn&amp;#39;t see). Gets the correct bitness a...</div><div class="ttdef"><b>Definition:</b> <a href="_native_dependency_manager_8cs_source.html#l00019">NativeDependencyManager.cs:19</a></div></div>
<div class="ttc" id="interface_image_resizer_1_1_plugins_1_1_i_file_extension_plugin_html"><div class="ttname"><a href="interface_image_resizer_1_1_plugins_1_1_i_file_extension_plugin.html">ImageResizer.Plugins.IFileExtensionPlugin</a></div><div class="ttdoc">For plugins that add support for new source file image extensions. </div><div class="ttdef"><b>Definition:</b> <a href="_i_file_extension_plugin_8cs_source.html#l00010">IFileExtensionPlugin.cs:10</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_plugin_config_html_abfd691da4173ce55ab972ce0a21cecc7"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#abfd691da4173ce55ab972ce0a21cecc7">ImageResizer.Configuration.PluginConfig.GetOptimizedAssemblyList</a></div><div class="ttdeci">List&lt; string &gt; GetOptimizedAssemblyList(string assemblyName, string pluginName)</div><div class="ttdoc">This is called to get a sorted list of plugins based on their likelyhood of having the plugin...</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_config_8cs_source.html#l00346">PluginConfig.cs:346</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_plugin_config_html_a0aae69c8ce761b0b5869fd63e2bcb863"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a0aae69c8ce761b0b5869fd63e2bcb863">ImageResizer.Configuration.PluginConfig.remove_plugin</a></div><div class="ttdeci">void remove_plugin(object plugin)</div><div class="ttdoc">For use only by plugins during .Uninstall. Removes the specified plugin from AllPlugins, QuerystringPlugins, CachingSystems, ImageEncoders, and ImageBuiderExtensions, based on which interfaces the instance implements. Plugins may register event handlers and modify settings - thus you should use the plugin&amp;#39;s method to uninstall them vs. using this method. </div><div class="ttdef"><b>Definition:</b> <a href="_plugin_config_8cs_source.html#l00521">PluginConfig.cs:521</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_resize_settings_html"><div class="ttname"><a href="class_image_resizer_1_1_resize_settings.html">ImageResizer.ResizeSettings</a></div><div class="ttdoc">Represents the settings which will be used to process the image. Extends NameValueCollection to provi...</div><div class="ttdef"><b>Definition:</b> <a href="_resize_settings_8cs_source.html#l00020">ResizeSettings.cs:20</a></div></div>
<div class="ttc" id="interface_image_resizer_1_1_plugins_1_1_i_plugin_html_a047c1f46ce451fefc5f2ba3c16b64e8f"><div class="ttname"><a href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html#a047c1f46ce451fefc5f2ba3c16b64e8f">ImageResizer.Plugins.IPlugin.Uninstall</a></div><div class="ttdeci">bool Uninstall(Config c)</div><div class="ttdoc">Uninstalls the plugin. Should reverse all changes made during Install </div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_plugin_config_html_a6703ae4b05096da29c9698481b9aaf74"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a6703ae4b05096da29c9698481b9aaf74">ImageResizer.Configuration.PluginConfig.PluginConfig</a></div><div class="ttdeci">PluginConfig(Config c)</div><div class="ttdoc">Creates a new plugin config section, attached to the specified parent </div><div class="ttdef"><b>Definition:</b> <a href="_plugin_config_8cs_source.html#l00035">PluginConfig.cs:35</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue_html"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue.html">ImageResizer.Configuration.Issues.Issue</a></div><div class="ttdef"><b>Definition:</b> <a href="_issue_8cs_source.html#l00007">Issue.cs:7</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue_sink_html"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue_sink.html">ImageResizer.Configuration.Issues.IssueSink</a></div><div class="ttdef"><b>Definition:</b> <a href="_issue_sink_8cs_source.html#l00007">IssueSink.cs:7</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_resizing_1_1_builder_extension_html"><div class="ttname"><a href="class_image_resizer_1_1_resizing_1_1_builder_extension.html">ImageResizer.Resizing.BuilderExtension</a></div><div class="ttdoc">Provides a useable base class that can be used to modify the behavior of ImageBuilder. When registered with an ImageBuilder instance, the ImageBuilder will call the corresponding methods on the extension prior to executing its own methods. </div><div class="ttdef"><b>Definition:</b> <a href="_builder_extension_8cs_source.html#l00011">BuilderExtension.cs:11</a></div></div>
<div class="ttc" id="interface_image_resizer_1_1_plugins_1_1_i_current_config_provider_html"><div class="ttname"><a href="interface_image_resizer_1_1_plugins_1_1_i_current_config_provider.html">ImageResizer.Plugins.ICurrentConfigProvider</a></div><div class="ttdoc">Allows multi-tenancy support. The &amp;#39;root&amp;#39; config only needs one plugin, which implements this interfac...</div><div class="ttdef"><b>Definition:</b> <a href="_i_current_config_provider_8cs_source.html#l00011">ICurrentConfigProvider.cs:11</a></div></div>
<div class="ttc" id="interface_image_resizer_1_1_encoding_1_1_i_encoder_provider_html"><div class="ttname"><a href="interface_image_resizer_1_1_encoding_1_1_i_encoder_provider.html">ImageResizer.Encoding.IEncoderProvider</a></div><div class="ttdoc">A provider (or selector) of IEncoder instances. </div><div class="ttdef"><b>Definition:</b> <a href="_i_encoder_provider_8cs_source.html#l00010">IEncoderProvider.cs:10</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_plugin_config_html_a57ce330ef6dbb0322d337f6c1f075e9e"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a57ce330ef6dbb0322d337f6c1f075e9e">ImageResizer.Configuration.PluginConfig.RemoveAll</a></div><div class="ttdeci">void RemoveAll()</div><div class="ttdoc">Removes all plugins, of every kind. Logs any errors encountered. (Not all plugins support uninstallat...</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_config_8cs_source.html#l00567">PluginConfig.cs:567</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_configuration_1_1_plugin_config_html_a1eabf8e8382b95e6bfd4c700e624b8b6"><div class="ttname"><a href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a1eabf8e8382b95e6bfd4c700e624b8b6">ImageResizer.Configuration.PluginConfig.Install</a></div><div class="ttdeci">IPlugin Install(IPlugin plugin)</div><div class="ttdoc">Installs the specified plugin, returning the plugin instance. Convenience method, same as plugin...</div><div class="ttdef"><b>Definition:</b> <a href="_plugin_config_8cs_source.html#l00201">PluginConfig.cs:201</a></div></div>
<div class="ttc" id="interface_image_resizer_1_1_plugins_1_1_i_plugin_html"><div class="ttname"><a href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html">ImageResizer.Plugins.IPlugin</a></div><div class="ttdoc">All plugins must implement this. Enables web.config addition and removal. </div><div class="ttdef"><b>Definition:</b> <a href="_i_plugin_8cs_source.html#l00011">IPlugin.cs:11</a></div></div>
<div class="ttc" id="interface_image_resizer_1_1_encoding_1_1_i_encoder_html"><div class="ttname"><a href="interface_image_resizer_1_1_encoding_1_1_i_encoder.html">ImageResizer.Encoding.IEncoder</a></div><div class="ttdoc">An image encoder. Exposes methods for suitability checking, encoding, transparency compatibility chec...</div><div class="ttdef"><b>Definition:</b> <a href="_i_encoder_8cs_source.html#l00013">IEncoder.cs:13</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
