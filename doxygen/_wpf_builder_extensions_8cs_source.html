<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ImageResizer: C:/Users/nathanael/Documents/resizer/Plugins/Wpf/WpfBuilderExtensions.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="imageresizer-logo-00aec4.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">ImageResizer
   &#160;<span id="projectnumber">3.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Events</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0b4eaef40a1fe20bedafe9e8e719ce66.html">Plugins</a></li><li class="navelem"><a class="el" href="dir_12f3188d801996cbd80ec9e0ce3c3432.html">Wpf</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">WpfBuilderExtensions.cs</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">using</span> System;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">using</span> System.Collections.Generic;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">using</span> System.Linq;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">using</span> System.Text;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">using</span> ImageResizer.Resizing;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">using</span> System.Drawing;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">using</span> ImageResizer.Util;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">namespace </span>ImageResizer.Plugins.WpfBuilder</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;{</div>
<div class="line"><a name="l00011"></a><span class="lineno"><a class="line" href="class_image_resizer_1_1_plugins_1_1_wpf_builder_1_1_wpf_builder_extensions.html">   11</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class </span><a class="code" href="class_image_resizer_1_1_plugins_1_1_wpf_builder_1_1_wpf_builder_extensions.html">WpfBuilderExtensions</a></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    {</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="class_image_resizer_1_1_plugins_1_1_wpf_builder_1_1_wpf_image_settings.html">WpfImageSettings</a> WpfDestinationImageSettings(<span class="keyword">this</span> <a class="code" href="class_image_resizer_1_1_resizing_1_1_image_state.html">ImageState</a> imageState, <a class="code" href="class_image_resizer_1_1_resize_settings.html">ResizeSettings</a> settings) </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        {</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;            <a class="code" href="class_image_resizer_1_1_plugins_1_1_wpf_builder_1_1_wpf_image_settings.html">WpfImageSettings</a> wpfImageSettings = <span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_plugins_1_1_wpf_builder_1_1_wpf_image_settings.html">WpfImageSettings</a>();</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;            Rectangle imageDest = PolygonMath.ToRectangle(PolygonMath.GetBoundingBox(imageState.layout[<span class="stringliteral">&quot;image&quot;</span>]));</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;            <span class="comment">/* test - provo a ricavare i dati di resize che mi servono direttamente dagli oggetti Drawing sottostanti */</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;            SizeF imageAreaSizes = PolygonMath.getParallelogramSize(imageState.layout[<span class="stringliteral">&quot;image&quot;</span>]);</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;            wpfImageSettings.DestinationImageWidth = imageAreaSizes.Width;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;            wpfImageSettings.DestinationImageHeight = imageAreaSizes.Height;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;            <span class="comment">// Correct the settings.Mode according to the documentation</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;            <span class="keywordflow">if</span> (settings.<a class="code" href="class_image_resizer_1_1_resize_settings.html#ae85b8620285cccbd4f5dcd86f862b0db">Mode</a> == <a class="code" href="namespace_image_resizer.html#affd730f8b2250fecace497124be5a37d">FitMode</a>.None &amp;&amp; (settings.<a class="code" href="class_image_resizer_1_1_resize_settings.html#a80001d573cec108c39e5376f6d854993">Width</a> != -1 &amp;&amp; settings.<a class="code" href="class_image_resizer_1_1_resize_settings.html#a7145aef3affc3244969cad8841359e3f">Height</a> != -1))</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                settings.<a class="code" href="class_image_resizer_1_1_resize_settings.html#ae85b8620285cccbd4f5dcd86f862b0db">Mode</a> = <a class="code" href="namespace_image_resizer.html#affd730f8b2250fecace497124be5a37d">FitMode</a>.Pad;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            <span class="keywordflow">else</span> if (settings.<a class="code" href="class_image_resizer_1_1_resize_settings.html#ae85b8620285cccbd4f5dcd86f862b0db">Mode</a> == <a class="code" href="namespace_image_resizer.html#affd730f8b2250fecace497124be5a37d">FitMode</a>.None &amp;&amp; (settings.<a class="code" href="class_image_resizer_1_1_resize_settings.html#a80fd5f97f3264009aa2c2648bb1379d7">MaxWidth</a> != -1 &amp;&amp; settings.<a class="code" href="class_image_resizer_1_1_resize_settings.html#a16d3547dfb87d598876fb64e54c0a938">MaxHeight</a> != -1))</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                settings.<a class="code" href="class_image_resizer_1_1_resize_settings.html#ae85b8620285cccbd4f5dcd86f862b0db">Mode</a> = <a class="code" href="namespace_image_resizer.html#affd730f8b2250fecace497124be5a37d">FitMode</a>.Max;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;            #region -- Manage the image dimensions --</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;            <span class="comment">//double widthToApply = (settings.Width == -1 ? (double)settings.MaxWidth : (double)settings.Width);</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;            <span class="comment">//double heightToApply = (settings.Height == -1 ? (double)settings.MaxHeight : (double)settings.Height);</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;            <span class="comment">//var proportionWidth = (double)imageState.originalSize.Width / widthToApply;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;            <span class="comment">//var proportionHeight = (double)imageState.originalSize.Height / heightToApply;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;            switch (settings.<a class="code" href="class_image_resizer_1_1_resize_settings.html#ae85b8620285cccbd4f5dcd86f862b0db">Mode</a>)</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;            {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                <span class="keywordflow">case</span> FitMode.None:</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                <span class="keywordflow">case</span> FitMode.Carve:</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                    <span class="comment">// TODO</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                <span class="comment">//case FitMode.Pad:</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                <span class="keywordflow">case</span> FitMode.Max:</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                    <span class="comment">//if (proportionWidth &gt; proportionHeight)</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                    <span class="comment">//{</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                    <span class="comment">//    wpfImageSettings.DestinationImageHeight = Convert.ToInt32(imageState.originalSize.Height / proportionWidth);</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                    <span class="comment">//    wpfImageSettings.DestinationImageWidth = Convert.ToInt32(widthToApply);</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                    <span class="comment">//}</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                    <span class="comment">//else </span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                    <span class="comment">//{</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                    <span class="comment">//    wpfImageSettings.DestinationImageWidth = Convert.ToInt32(imageState.originalSize.Width / proportionHeight);</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                    <span class="comment">//    wpfImageSettings.DestinationImageHeight = Convert.ToInt32(heightToApply);</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                    <span class="comment">//}</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                    <span class="comment">/*</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">                     </span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">                     </span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">                     </span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">                     TODO:</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">                     * </span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">                     * verificare la necessit√† di calcolare gli offset per il PAD</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">                     </span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">                     </span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">                     </span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">                     </span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">                     */</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                <span class="keywordflow">case</span> FitMode.Crop:</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                <span class="keywordflow">case</span> FitMode.Pad:</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                    <span class="comment">//int scaleWidth, scaleHeight;</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                    <span class="comment">//scaleWidth = scaleHeight = 0;</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                    <span class="comment">//wpfImageSettings.DestinationImageCanvasWidth = scaleWidth = imageDest.Width;</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                    <span class="comment">//wpfImageSettings.DestinationImageCanvasHeight = scaleHeight = imageDest.Height;</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">                    //// If only a dimension is missing make it square</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"></span>                    <span class="comment">//if (wpfImageSettings.DestinationImageCanvasWidth == 0 || wpfImageSettings.DestinationImageCanvasHeight == 0)</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                    <span class="comment">//{</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                    <span class="comment">//    wpfImageSettings.DestinationImageCanvasWidth = wpfImageSettings.DestinationImageCanvasHeight = Math.Max(wpfImageSettings.DestinationImageCanvasWidth, wpfImageSettings.DestinationImageCanvasHeight);</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                    <span class="comment">//}</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                    <span class="comment">//double originalProportions = (double)imageState.originalSize.Width / (double)imageState.originalSize.Height;</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                    <span class="comment">//double viewportProportions = (double)wpfImageSettings.DestinationImageCanvasWidth / (double)wpfImageSettings.DestinationImageCanvasHeight;</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">                    //// Calculates the new scale proportions to make touche-from-inside crop</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment"></span>                    <span class="comment">//if ((originalProportions &gt; 1 &amp;&amp; viewportProportions &lt;= 1) || (originalProportions &lt; 1 &amp;&amp; viewportProportions &gt; 1))</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                    <span class="comment">//{</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                    <span class="comment">//    scaleHeight = Math.Max(wpfImageSettings.DestinationImageCanvasHeight, wpfImageSettings.DestinationImageCanvasWidth);</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                    <span class="comment">//    scaleWidth = Convert.ToInt32(((float)(scaleHeight) / (float)(imageState.originalSize.Height)) * imageState.originalSize.Width);</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                    <span class="comment">//}</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                    <span class="comment">//else</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                    <span class="comment">//{</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                    <span class="comment">//    scaleWidth = Math.Max(wpfImageSettings.DestinationImageCanvasHeight, wpfImageSettings.DestinationImageCanvasWidth);</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                    <span class="comment">//    scaleHeight = Convert.ToInt32(((float)(scaleWidth) / (float)(imageState.originalSize.Width)) * imageState.originalSize.Height);</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                    <span class="comment">//}</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                    <span class="comment">//wpfImageSettings.DestinationImageWidth = scaleWidth;</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                    <span class="comment">//wpfImageSettings.DestinationImageHeight = scaleHeight;</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                    <span class="comment">//if ((imageState.copyRect.Y == 0) &amp;&amp; (imageState.copyRect.X != 0))</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                    <span class="keywordflow">if</span> ((imageState.<a class="code" href="class_image_resizer_1_1_resizing_1_1_image_state.html#a72e11433b4c36caccab68577e864202c">originalSize</a>.Width / imageState.<a class="code" href="class_image_resizer_1_1_resizing_1_1_image_state.html#a72e11433b4c36caccab68577e864202c">originalSize</a>.Height) &gt;= (imageDest.Width / imageDest.Height))</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                    {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                        wpfImageSettings.DestinationImageWidth = (imageState.originalSize.Width * imageDest.Height) / imageState.<a class="code" href="class_image_resizer_1_1_resizing_1_1_image_state.html#a22528462bb2ca64173878ef4441bad28">copyRect</a>.Height;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                        if (settings.<a class="code" href="class_image_resizer_1_1_resize_settings.html#ae85b8620285cccbd4f5dcd86f862b0db">Mode</a> == <a class="code" href="namespace_image_resizer.html#affd730f8b2250fecace497124be5a37d">FitMode</a>.Pad)</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                            wpfImageSettings.DestinationImageHeight = imageState.originalSize.Height;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                            wpfImageSettings.DestinationImageHeight = imageDest.Height;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                        wpfImageSettings.OffsetX = -(wpfImageSettings.DestinationImageWidth * imageState.copyRect.X) / imageState.<a class="code" href="class_image_resizer_1_1_resizing_1_1_image_state.html#a72e11433b4c36caccab68577e864202c">originalSize</a>.Width;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                        wpfImageSettings.<a class="code" href="class_image_resizer_1_1_plugins_1_1_wpf_builder_1_1_wpf_image_settings.html#a694c72469bb77a19a29abec3af5697f6">OffsetY</a> = 0;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                    }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                    <span class="keywordflow">else</span> <span class="comment">// if ((imageState.copyRect.X == 0) &amp;&amp; (imageState.copyRect.Y != 0))</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                    {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                        <span class="keywordflow">if</span> (settings.<a class="code" href="class_image_resizer_1_1_resize_settings.html#ae85b8620285cccbd4f5dcd86f862b0db">Mode</a> == <a class="code" href="namespace_image_resizer.html#affd730f8b2250fecace497124be5a37d">FitMode</a>.Pad)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                            wpfImageSettings.DestinationImageWidth = imageState.originalSize.Width;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                            wpfImageSettings.DestinationImageWidth = imageDest.Width;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                        wpfImageSettings.DestinationImageHeight = (imageState.originalSize.Height * imageDest.Width) / imageState.<a class="code" href="class_image_resizer_1_1_resizing_1_1_image_state.html#a22528462bb2ca64173878ef4441bad28">copyRect</a>.Width;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                        wpfImageSettings.<a class="code" href="class_image_resizer_1_1_plugins_1_1_wpf_builder_1_1_wpf_image_settings.html#ab0cc2e70ce481c2305d02f3b7496d28b">OffsetX</a> = 0;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                        wpfImageSettings.<a class="code" href="class_image_resizer_1_1_plugins_1_1_wpf_builder_1_1_wpf_image_settings.html#a694c72469bb77a19a29abec3af5697f6">OffsetY</a> = -(wpfImageSettings.<a class="code" href="class_image_resizer_1_1_plugins_1_1_wpf_builder_1_1_wpf_image_settings.html#ad43328ef7f6204f6a98d46a865b7bed4">DestinationImageHeight</a> * imageState.<a class="code" href="class_image_resizer_1_1_resizing_1_1_image_state.html#a22528462bb2ca64173878ef4441bad28">copyRect</a>.Y) / imageState.originalSize.Height;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                    }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                    <span class="comment">/*else </span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">                    {</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">                        </span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">                    }*/</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                <span class="comment">//case FitMode.Pad:</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                <span class="comment">//    wpfImageSettings.DestinationImageHeight = Convert.ToInt32(imageState.layout[&quot;image&quot;][3].Y - imageState.layout[&quot;image&quot;][0].Y);</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                <span class="comment">//    wpfImageSettings.DestinationImageWidth = Convert.ToInt32(imageState.layout[&quot;image&quot;][1].X - imageState.layout[&quot;image&quot;][3].X);</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                <span class="comment">//    break;</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                <span class="keywordflow">case</span> FitMode.Stretch:</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                    <span class="comment">//wpfImageSettings.DestinationImageWidth = Convert.ToInt32(widthToApply);</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                    <span class="comment">//wpfImageSettings.DestinationImageHeight = Convert.ToInt32(heightToApply);</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                    wpfImageSettings.DestinationImageWidth = imageState.originalSize.Width;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                    wpfImageSettings.DestinationImageHeight = imageState.originalSize.Height;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="preprocessor">            #endregion</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="preprocessor">            #region -- Manage the allignments --</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="keywordflow">switch</span> (settings.<a class="code" href="class_image_resizer_1_1_resize_settings.html#ae85b8620285cccbd4f5dcd86f862b0db">Mode</a>)</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                <span class="keywordflow">case</span> FitMode.None:</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                <span class="keywordflow">case</span> FitMode.Crop:</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                <span class="keywordflow">case</span> FitMode.Pad:</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                    RectangleF croppedSize = settings.getCustomCropSourceRect(imageState.originalSize);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                    <span class="keywordflow">if</span> ((croppedSize.X != 0) || (croppedSize.Y != 0))</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                    {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                        wpfImageSettings.OffsetX = -Convert.ToInt32(croppedSize.X);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                        wpfImageSettings.OffsetY = -Convert.ToInt32(croppedSize.Y);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                        wpfImageSettings.DestinationImageCanvasWidth = croppedSize.Right - croppedSize.Left;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                        wpfImageSettings.DestinationImageCanvasHeight = croppedSize.Bottom - croppedSize.Top;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                    }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                    <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                    {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                        wpfImageSettings.OffsetX = imageState.layout[<span class="stringliteral">&quot;image&quot;</span>][0].X;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                        wpfImageSettings.OffsetY = imageState.layout[<span class="stringliteral">&quot;image&quot;</span>][0].Y;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                    }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                    </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                        </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                    </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                    <span class="comment">//wpfImageSettings.DestinationImageCanvasWidth = imageDest.Width;</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                    <span class="comment">//wpfImageSettings.DestinationImageCanvasHeight = imageDest.Height;</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">                    //// In crop or pad I&#39;ve to calculate the Offsets</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment"></span>                    <span class="comment">//switch (settings.Anchor)</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                    <span class="comment">//{</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                    <span class="comment">//    case ContentAlignment.BottomCenter:</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                    <span class="comment">//        wpfImageSettings.OffsetX = (int)Math.Floor((double)(imageState.finalSize.Width - wpfImageSettings.DestinationImageWidth) / 2);</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                    <span class="comment">//        wpfImageSettings.OffsetY = imageState.finalSize.Height - wpfImageSettings.DestinationImageHeight;</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                    <span class="comment">//        break;</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                    <span class="comment">//    case ContentAlignment.BottomLeft:</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                    <span class="comment">//        wpfImageSettings.OffsetX = 0;</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                    <span class="comment">//        wpfImageSettings.OffsetY = imageState.finalSize.Height - wpfImageSettings.DestinationImageHeight;</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                    <span class="comment">//        break;</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                    <span class="comment">//    case ContentAlignment.BottomRight:</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                    <span class="comment">//        wpfImageSettings.OffsetX = imageState.finalSize.Width - wpfImageSettings.DestinationImageWidth;</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                    <span class="comment">//        wpfImageSettings.OffsetY = imageState.finalSize.Height - wpfImageSettings.DestinationImageHeight;</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                    <span class="comment">//        break;</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                    <span class="comment">//    case ContentAlignment.MiddleCenter:</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                    <span class="comment">//        wpfImageSettings.OffsetX = (int)Math.Floor((double)(imageState.finalSize.Width - wpfImageSettings.DestinationImageWidth) / 2);</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                    <span class="comment">//        wpfImageSettings.OffsetY = (int)Math.Floor((double)(imageState.finalSize.Height - wpfImageSettings.DestinationImageHeight) / 2);</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                    <span class="comment">//        break;</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                    <span class="comment">//    case ContentAlignment.MiddleLeft:</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                    <span class="comment">//        wpfImageSettings.OffsetX = 0;</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                    <span class="comment">//        wpfImageSettings.OffsetY = (int)Math.Floor((double)(imageState.finalSize.Height - wpfImageSettings.DestinationImageHeight) / 2);</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                    <span class="comment">//        break;</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                    <span class="comment">//    case ContentAlignment.MiddleRight:</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                    <span class="comment">//        wpfImageSettings.OffsetX = imageState.finalSize.Width - wpfImageSettings.DestinationImageWidth;</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                    <span class="comment">//        wpfImageSettings.OffsetY = (int)Math.Floor((double)(imageState.finalSize.Height - wpfImageSettings.DestinationImageHeight) / 2);</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                    <span class="comment">//        break;</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                    <span class="comment">//    case ContentAlignment.TopCenter:</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                    <span class="comment">//        wpfImageSettings.OffsetX = (int)Math.Floor((double)(imageState.finalSize.Width - wpfImageSettings.DestinationImageWidth) / 2);</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                    <span class="comment">//        wpfImageSettings.OffsetY = 0;</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                    <span class="comment">//        break;</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                    <span class="comment">//    case ContentAlignment.TopLeft:</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                    <span class="comment">//        wpfImageSettings.OffsetX = 0;</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                    <span class="comment">//        wpfImageSettings.OffsetY = 0;</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                    <span class="comment">//        break;</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                    <span class="comment">//    case ContentAlignment.TopRight:</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                    <span class="comment">//        wpfImageSettings.OffsetX = imageState.finalSize.Width - wpfImageSettings.DestinationImageWidth;</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                    <span class="comment">//        wpfImageSettings.OffsetY = 0;</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                    <span class="comment">//        break;</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                    <span class="comment">//    default:</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                    <span class="comment">//        break;</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                    <span class="comment">//}</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                <span class="comment">//case FitMode.Crop:</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                <span class="comment">//    break;</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                    <span class="comment">/*</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">                     </span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">                     </span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">                     TODO: risistemare!!!</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">                     </span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">                     </span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">                     */</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                    <span class="comment">// Supposing I&#39;m on manual cropping, I&#39;ll use the underlying calculations</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                    <span class="comment">//wpfImageSettings.DestinationImageWidth = imageState.originalSize.Width;</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                    <span class="comment">//wpfImageSettings.DestinationImageHeight = imageState.originalSize.Height;</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                    <span class="comment">//RectangleF croppedSize = settings.getCustomCropSourceRect(imageState.originalSize);</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                    <span class="comment">//wpfImageSettings.OffsetX = -Convert.ToInt32(croppedSize.X);</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                    <span class="comment">//wpfImageSettings.OffsetY = -Convert.ToInt32(croppedSize.Y);</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                    <span class="comment">//wpfImageSettings.DestinationImageCanvasWidth = croppedSize.Right - croppedSize.Left;</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                    <span class="comment">//wpfImageSettings.DestinationImageCanvasHeight = croppedSize.Bottom - croppedSize.Top;</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="preprocessor">            #endregion</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            <span class="keywordflow">if</span> ((settings.<a class="code" href="class_image_resizer_1_1_resize_settings.html#af0a73e8db4a3e4e40f0564d0dca29833">Rotate</a> % 360) != 0)</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                wpfImageSettings.OffsetX = (imageState.finalSize.Width - wpfImageSettings.DestinationImageWidth) / 2;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                wpfImageSettings.OffsetY = (imageState.finalSize.Height - wpfImageSettings.DestinationImageHeight) / 2;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            }</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <span class="keywordflow">return</span> wpfImageSettings;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}</div>
<div class="ttc" id="class_image_resizer_1_1_resize_settings_html_a80fd5f97f3264009aa2c2648bb1379d7"><div class="ttname"><a href="class_image_resizer_1_1_resize_settings.html#a80fd5f97f3264009aa2c2648bb1379d7">ImageResizer.ResizeSettings.MaxWidth</a></div><div class="ttdeci">int MaxWidth</div><div class="ttdoc">[&amp;quot;maxwidth&amp;quot;]: Sets the maximum desired width of the image. (minus padding, borders, margins, effects, and rotation). The image may be smaller than this value to maintain aspect ratio when both maxwidth and maxheight are specified. </div><div class="ttdef"><b>Definition:</b> <a href="_resize_settings_8cs_source.html#l00089">ResizeSettings.cs:89</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_resize_settings_html_af0a73e8db4a3e4e40f0564d0dca29833"><div class="ttname"><a href="class_image_resizer_1_1_resize_settings.html#af0a73e8db4a3e4e40f0564d0dca29833">ImageResizer.ResizeSettings.Rotate</a></div><div class="ttdeci">double Rotate</div><div class="ttdoc">[&amp;quot;rotate&amp;quot;] The degress to rotate the image clockwise. -360 to 360. </div><div class="ttdef"><b>Definition:</b> <a href="_resize_settings_8cs_source.html#l00138">ResizeSettings.cs:138</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_plugins_1_1_wpf_builder_1_1_wpf_image_settings_html_ad43328ef7f6204f6a98d46a865b7bed4"><div class="ttname"><a href="class_image_resizer_1_1_plugins_1_1_wpf_builder_1_1_wpf_image_settings.html#ad43328ef7f6204f6a98d46a865b7bed4">ImageResizer.Plugins.WpfBuilder.WpfImageSettings.DestinationImageHeight</a></div><div class="ttdeci">float DestinationImageHeight</div><div class="ttdoc">The height of the image inside the rect drawned into the DrawingContext </div><div class="ttdef"><b>Definition:</b> <a href="_wpf_builder_8cs_source.html#l00052">WpfBuilder.cs:52</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_plugins_1_1_wpf_builder_1_1_wpf_builder_extensions_html"><div class="ttname"><a href="class_image_resizer_1_1_plugins_1_1_wpf_builder_1_1_wpf_builder_extensions.html">ImageResizer.Plugins.WpfBuilder.WpfBuilderExtensions</a></div><div class="ttdef"><b>Definition:</b> <a href="_wpf_builder_extensions_8cs_source.html#l00011">WpfBuilderExtensions.cs:11</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_plugins_1_1_wpf_builder_1_1_wpf_image_settings_html_a694c72469bb77a19a29abec3af5697f6"><div class="ttname"><a href="class_image_resizer_1_1_plugins_1_1_wpf_builder_1_1_wpf_image_settings.html#a694c72469bb77a19a29abec3af5697f6">ImageResizer.Plugins.WpfBuilder.WpfImageSettings.OffsetY</a></div><div class="ttdeci">float OffsetY</div><div class="ttdoc">The y offset (positive or negative) used to draw the image rect inside the DrawingContext ...</div><div class="ttdef"><b>Definition:</b> <a href="_wpf_builder_8cs_source.html#l00032">WpfBuilder.cs:32</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_resize_settings_html_a80001d573cec108c39e5376f6d854993"><div class="ttname"><a href="class_image_resizer_1_1_resize_settings.html#a80001d573cec108c39e5376f6d854993">ImageResizer.ResizeSettings.Width</a></div><div class="ttdeci">int Width</div><div class="ttdoc">[&amp;quot;width&amp;quot;]: Sets the desired width of the image. (minus padding, borders, margins, effects, and rotation). The only instance the resulting image will be smaller is if the original source image is smaller. Set Scale=Both to upscale these images and ensure the output always matches &amp;#39;width&amp;#39; and &amp;#39;height&amp;#39;. If both width and height are specified, the image will be &amp;#39;letterboxed&amp;#39; to match the desired aspect ratio. Change the Mode property to adjust this behavior. </div><div class="ttdef"><b>Definition:</b> <a href="_resize_settings_8cs_source.html#l00066">ResizeSettings.cs:66</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_resize_settings_html_ae85b8620285cccbd4f5dcd86f862b0db"><div class="ttname"><a href="class_image_resizer_1_1_resize_settings.html#ae85b8620285cccbd4f5dcd86f862b0db">ImageResizer.ResizeSettings.Mode</a></div><div class="ttdeci">FitMode Mode</div><div class="ttdoc">[&amp;quot;mode&amp;quot;]: Sets the fit mode for the image. max, min, pad, crop, carve, stretch </div><div class="ttdef"><b>Definition:</b> <a href="_resize_settings_8cs_source.html#l00118">ResizeSettings.cs:118</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_resize_settings_html"><div class="ttname"><a href="class_image_resizer_1_1_resize_settings.html">ImageResizer.ResizeSettings</a></div><div class="ttdoc">Represents the settings which will be used to process the image. Extends NameValueCollection to provi...</div><div class="ttdef"><b>Definition:</b> <a href="_resize_settings_8cs_source.html#l00020">ResizeSettings.cs:20</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_plugins_1_1_wpf_builder_1_1_wpf_image_settings_html_ab0cc2e70ce481c2305d02f3b7496d28b"><div class="ttname"><a href="class_image_resizer_1_1_plugins_1_1_wpf_builder_1_1_wpf_image_settings.html#ab0cc2e70ce481c2305d02f3b7496d28b">ImageResizer.Plugins.WpfBuilder.WpfImageSettings.OffsetX</a></div><div class="ttdeci">float OffsetX</div><div class="ttdoc">The x offset (positive or negative) used to draw the image rect inside the DrawingContext ...</div><div class="ttdef"><b>Definition:</b> <a href="_wpf_builder_8cs_source.html#l00027">WpfBuilder.cs:27</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_resizing_1_1_image_state_html"><div class="ttname"><a href="class_image_resizer_1_1_resizing_1_1_image_state.html">ImageResizer.Resizing.ImageState</a></div><div class="ttdoc">Encapsulates the state of an image being resized. Can be used to simulate a resize as well as actuall...</div><div class="ttdef"><b>Definition:</b> <a href="_image_state_8cs_source.html#l00015">ImageState.cs:15</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_plugins_1_1_wpf_builder_1_1_wpf_image_settings_html"><div class="ttname"><a href="class_image_resizer_1_1_plugins_1_1_wpf_builder_1_1_wpf_image_settings.html">ImageResizer.Plugins.WpfBuilder.WpfImageSettings</a></div><div class="ttdef"><b>Definition:</b> <a href="_wpf_builder_8cs_source.html#l00022">WpfBuilder.cs:22</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_resizing_1_1_image_state_html_a72e11433b4c36caccab68577e864202c"><div class="ttname"><a href="class_image_resizer_1_1_resizing_1_1_image_state.html#a72e11433b4c36caccab68577e864202c">ImageResizer.Resizing.ImageState.originalSize</a></div><div class="ttdeci">Size originalSize</div><div class="ttdoc">The original size of the source bitmap. Use this instead of accessing the bitmap directly for this in...</div><div class="ttdef"><b>Definition:</b> <a href="_image_state_8cs_source.html#l00030">ImageState.cs:30</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_resize_settings_html_a16d3547dfb87d598876fb64e54c0a938"><div class="ttname"><a href="class_image_resizer_1_1_resize_settings.html#a16d3547dfb87d598876fb64e54c0a938">ImageResizer.ResizeSettings.MaxHeight</a></div><div class="ttdeci">int MaxHeight</div><div class="ttdoc">[&amp;quot;maxheight&amp;quot;]: Sets the maximum desired height of the image. (minus padding, borders, margins, effects, and rotation). The image may be smaller than this value to maintain aspect ratio when both maxwidth and maxheight are specified. </div><div class="ttdef"><b>Definition:</b> <a href="_resize_settings_8cs_source.html#l00111">ResizeSettings.cs:111</a></div></div>
<div class="ttc" id="namespace_image_resizer_html_affd730f8b2250fecace497124be5a37d"><div class="ttname"><a href="namespace_image_resizer.html#affd730f8b2250fecace497124be5a37d">ImageResizer.FitMode</a></div><div class="ttdeci">FitMode</div><div class="ttdoc">How to resolve aspect ratio differences between the requested size and the original image&amp;#39;s size...</div><div class="ttdef"><b>Definition:</b> <a href="_enumerations_8cs_source.html#l00114">Enumerations.cs:114</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_resizing_1_1_image_state_html_a22528462bb2ca64173878ef4441bad28"><div class="ttname"><a href="class_image_resizer_1_1_resizing_1_1_image_state.html#a22528462bb2ca64173878ef4441bad28">ImageResizer.Resizing.ImageState.copyRect</a></div><div class="ttdeci">RectangleF copyRect</div><div class="ttdoc">The rectangular portion of the source image to copy </div><div class="ttdef"><b>Definition:</b> <a href="_image_state_8cs_source.html#l00057">ImageState.cs:57</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_resize_settings_html_a7145aef3affc3244969cad8841359e3f"><div class="ttname"><a href="class_image_resizer_1_1_resize_settings.html#a7145aef3affc3244969cad8841359e3f">ImageResizer.ResizeSettings.Height</a></div><div class="ttdeci">int Height</div><div class="ttdoc">[&amp;quot;height&amp;quot;]: Sets the desired height of the image. (minus padding, borders, margins, effects, and rotation) The only instance the resulting image will be smaller is if the original source image is smaller. Set Scale=Both to upscale these images and ensure the output always matches &amp;#39;width&amp;#39; and &amp;#39;height&amp;#39;. If both width and height are specified, the image will be &amp;#39;letterboxed&amp;#39; to match the desired aspect ratio. Change the Mode property to adjust this behavior. </div><div class="ttdef"><b>Definition:</b> <a href="_resize_settings_8cs_source.html#l00079">ResizeSettings.cs:79</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
