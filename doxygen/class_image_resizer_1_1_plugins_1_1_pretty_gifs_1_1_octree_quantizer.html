<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ImageResizer: ImageResizer.Plugins.PrettyGifs.OctreeQuantizer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="imageresizer-logo-00aec4.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">ImageResizer
   &#160;<span id="projectnumber">3.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Events</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_image_resizer.html">ImageResizer</a></li><li class="navelem"><a class="el" href="namespace_image_resizer_1_1_plugins.html">Plugins</a></li><li class="navelem"><a class="el" href="namespace_image_resizer_1_1_plugins_1_1_pretty_gifs.html">PrettyGifs</a></li><li class="navelem"><a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer.html">OctreeQuantizer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ImageResizer.Plugins.PrettyGifs.OctreeQuantizer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Quantize using an Octree  
 <a href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for ImageResizer.Plugins.PrettyGifs.OctreeQuantizer:</div>
<div class="dyncontent">
<div class="center"><img src="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer__inherit__graph.png" border="0" usemap="#_image_resizer_8_plugins_8_pretty_gifs_8_octree_quantizer_inherit__map" alt="Inheritance graph"/></div>
<map name="_image_resizer_8_plugins_8_pretty_gifs_8_octree_quantizer_inherit__map" id="_image_resizer_8_plugins_8_pretty_gifs_8_octree_quantizer_inherit__map">
<area shape="rect" id="node2" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html" title="Abstract Quantizer class &#45; handles the messy, algorithm&#45;independent details of quantization. Subclasses must implement InitialQuantizePixel, GetPallete(), and QuantizePixel. Not thread&#45;safe! " alt="" coords="135,6,293,53"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for ImageResizer.Plugins.PrettyGifs.OctreeQuantizer:</div>
<div class="dyncontent">
<div class="center"><img src="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer__coll__graph.png" border="0" usemap="#_image_resizer_8_plugins_8_pretty_gifs_8_octree_quantizer_coll__map" alt="Collaboration graph"/></div>
<map name="_image_resizer_8_plugins_8_pretty_gifs_8_octree_quantizer_coll__map" id="_image_resizer_8_plugins_8_pretty_gifs_8_octree_quantizer_coll__map">
<area shape="rect" id="node2" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html" title="Abstract Quantizer class &#45; handles the messy, algorithm&#45;independent details of quantization. Subclasses must implement InitialQuantizePixel, GetPallete(), and QuantizePixel. Not thread&#45;safe! " alt="" coords="135,6,293,53"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aec0faf7b90a160ee61e6f5b0a5c1c062"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer.html#aec0faf7b90a160ee61e6f5b0a5c1c062">OctreeQuantizer</a> (int maxColors, int maxColorBits)</td></tr>
<tr class="memdesc:aec0faf7b90a160ee61e6f5b0a5c1c062"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct the octree quantizer  <a href="#aec0faf7b90a160ee61e6f5b0a5c1c062">More...</a><br/></td></tr>
<tr class="separator:aec0faf7b90a160ee61e6f5b0a5c1c062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9beafc72579a427fbdcad46d83ce6566"><td class="memItemLeft" align="right" valign="top">override void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer.html#a9beafc72579a427fbdcad46d83ce6566">Reset</a> ()</td></tr>
<tr class="memdesc:a9beafc72579a427fbdcad46d83ce6566"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears the octree  <a href="#a9beafc72579a427fbdcad46d83ce6566">More...</a><br/></td></tr>
<tr class="separator:a9beafc72579a427fbdcad46d83ce6566"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5c1d1a663a3a669e3dc83caed159c09"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer.html#af5c1d1a663a3a669e3dc83caed159c09">Reset</a> (int maxColors, int maxColorBits)</td></tr>
<tr class="memdesc:af5c1d1a663a3a669e3dc83caed159c09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears the octree and reconfigures color settings  <a href="#af5c1d1a663a3a669e3dc83caed159c09">More...</a><br/></td></tr>
<tr class="separator:af5c1d1a663a3a669e3dc83caed159c09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html">ImageResizer.Plugins.PrettyGifs.Quantizer</a></td></tr>
<tr class="memitem:ae9c0173984cccf071bd78cbe946b217c inherit pub_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html#ae9c0173984cccf071bd78cbe946b217c">Quantizer</a> (bool fixedPalette)</td></tr>
<tr class="memdesc:ae9c0173984cccf071bd78cbe946b217c inherit pub_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct the quantizer  <a href="#ae9c0173984cccf071bd78cbe946b217c">More...</a><br/></td></tr>
<tr class="separator:ae9c0173984cccf071bd78cbe946b217c inherit pub_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6b1a6dd3369b8a4674364a9c2d0f2ab inherit pub_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memItemLeft" align="right" valign="top">Bitmap&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html#ab6b1a6dd3369b8a4674364a9c2d0f2ab">Quantize</a> (Image src)</td></tr>
<tr class="memdesc:ab6b1a6dd3369b8a4674364a9c2d0f2ab inherit pub_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Quantize an image and return the resulting output bitmap  <a href="#ab6b1a6dd3369b8a4674364a9c2d0f2ab">More...</a><br/></td></tr>
<tr class="separator:ab6b1a6dd3369b8a4674364a9c2d0f2ab inherit pub_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a18f77f4380a83f1fe3bbe6d8173949a3"><td class="memItemLeft" align="right" valign="top">float[,]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer.html#a18f77f4380a83f1fe3bbe6d8173949a3">DitherMatrix</a></td></tr>
<tr class="memdesc:a18f77f4380a83f1fe3bbe6d8173949a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">a Floyd-Steinberg dither matrix new float[,] {{0,0,0}, {0,0,0.44f}, {0.19f,0.31f,0.06f}};  <a href="#a18f77f4380a83f1fe3bbe6d8173949a3">More...</a><br/></td></tr>
<tr class="separator:a18f77f4380a83f1fe3bbe6d8173949a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ce5289ed24bdd5716271d438af0f54f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4ce5289ed24bdd5716271d438af0f54f"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>DitherPercent</b> = .3f</td></tr>
<tr class="separator:a4ce5289ed24bdd5716271d438af0f54f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a2ae43ea54b1271764f94f95298910181"><td class="memItemLeft" align="right" valign="top">override void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer.html#a2ae43ea54b1271764f94f95298910181">InitialQuantizePixel</a> (<a class="el" href="struct_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer_1_1_color32.html">Color32</a> pixel)</td></tr>
<tr class="memdesc:a2ae43ea54b1271764f94f95298910181"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process the pixel in the first pass of the algorithm  <a href="#a2ae43ea54b1271764f94f95298910181">More...</a><br/></td></tr>
<tr class="separator:a2ae43ea54b1271764f94f95298910181"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a8dd490b27330aefe437aea78e91839"><td class="memItemLeft" align="right" valign="top">override byte&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer.html#a7a8dd490b27330aefe437aea78e91839">QuantizePixel</a> (<a class="el" href="struct_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer_1_1_color32.html">Color32</a> pixel)</td></tr>
<tr class="memdesc:a7a8dd490b27330aefe437aea78e91839"><td class="mdescLeft">&#160;</td><td class="mdescRight">Override this to process the pixel in the second pass of the algorithm  <a href="#a7a8dd490b27330aefe437aea78e91839">More...</a><br/></td></tr>
<tr class="separator:a7a8dd490b27330aefe437aea78e91839"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49760b1e0752212afe766b2802f86b10"><td class="memItemLeft" align="right" valign="top">override ColorPalette&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer.html#a49760b1e0752212afe766b2802f86b10">GetPalette</a> (ColorPalette original)</td></tr>
<tr class="memdesc:a49760b1e0752212afe766b2802f86b10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the palette for the quantized image  <a href="#a49760b1e0752212afe766b2802f86b10">More...</a><br/></td></tr>
<tr class="separator:a49760b1e0752212afe766b2802f86b10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html">ImageResizer.Plugins.PrettyGifs.Quantizer</a></td></tr>
<tr class="memitem:a72fe2283a0b4ea757173e9ac43049f18 inherit pro_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a72fe2283a0b4ea757173e9ac43049f18"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>ValidatePropertyValues</b> ()</td></tr>
<tr class="separator:a72fe2283a0b4ea757173e9ac43049f18 inherit pro_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b0b2e50b506368015f4bdcd03c4d7a1 inherit pro_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7b0b2e50b506368015f4bdcd03c4d7a1"></a>
Bitmap&#160;</td><td class="memItemRight" valign="bottom"><b>QuantizeFullTrust</b> (Bitmap firstPass, Bitmap copy, Bitmap copy2, Bitmap output)</td></tr>
<tr class="separator:a7b0b2e50b506368015f4bdcd03c4d7a1 inherit pro_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92d19729f9c84f0c919e87247744311b inherit pro_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a92d19729f9c84f0c919e87247744311b"></a>
Bitmap&#160;</td><td class="memItemRight" valign="bottom"><b>QuantizeLowTrust</b> (Bitmap firstPass, Bitmap copy, Bitmap copy2, Bitmap output)</td></tr>
<tr class="separator:a92d19729f9c84f0c919e87247744311b inherit pro_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d6b6c7781e51d87185f1ef6c3458576 inherit pro_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html#a7d6b6c7781e51d87185f1ef6c3458576">AnalyzeImage</a> (BitmapData sourceData, int width, int height)</td></tr>
<tr class="memdesc:a7d6b6c7781e51d87185f1ef6c3458576 inherit pro_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute the first pass through the pixels in the image  <a href="#a7d6b6c7781e51d87185f1ef6c3458576">More...</a><br/></td></tr>
<tr class="separator:a7d6b6c7781e51d87185f1ef6c3458576 inherit pro_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76ccba766ea0d00bd1edf9e470065757 inherit pro_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a76ccba766ea0d00bd1edf9e470065757"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>AnalyzeImageLowTrust</b> (Bitmap b, int width, int height)</td></tr>
<tr class="separator:a76ccba766ea0d00bd1edf9e470065757 inherit pro_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a398dfbac3ddc2704c7e5c317eee5fc21 inherit pro_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html#a398dfbac3ddc2704c7e5c317eee5fc21">QuantizeImage</a> (BitmapData sourceData, BitmapData intermediate, Bitmap output, int width, int height, Rectangle bounds)</td></tr>
<tr class="memdesc:a398dfbac3ddc2704c7e5c317eee5fc21 inherit pro_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute a second pass through the bitmap. If dithering is enabled, sourceData will be modified.  <a href="#a398dfbac3ddc2704c7e5c317eee5fc21">More...</a><br/></td></tr>
<tr class="separator:a398dfbac3ddc2704c7e5c317eee5fc21 inherit pro_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb7ea9913770ace53fc698211e41ef89 inherit pro_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html#adb7ea9913770ace53fc698211e41ef89">AdjustNeighborSource</a> (int offsetX, int offsetY, int deltaR, int deltaG, int deltaB, int deltaA)</td></tr>
<tr class="memdesc:adb7ea9913770ace53fc698211e41ef89 inherit pro_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Can only be called from QuantizePixel... This is how dithering is done... 5-18-09 ndj  <a href="#adb7ea9913770ace53fc698211e41ef89">More...</a><br/></td></tr>
<tr class="separator:adb7ea9913770ace53fc698211e41ef89 inherit pro_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3891671ba9b1f757c768e57811351c50 inherit pro_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3891671ba9b1f757c768e57811351c50"></a>
byte&#160;</td><td class="memItemRight" valign="bottom"><b>ToByte</b> (int i)</td></tr>
<tr class="separator:a3891671ba9b1f757c768e57811351c50 inherit pro_methods_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a99139c25d1b28b8e6c850a50a5ed898a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a99139c25d1b28b8e6c850a50a5ed898a"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>_dither</b> = false</td></tr>
<tr class="separator:a99139c25d1b28b8e6c850a50a5ed898a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:a586dbdce2ea65045a42c28b4de38f972"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer.html#a586dbdce2ea65045a42c28b4de38f972">Dither</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a586dbdce2ea65045a42c28b4de38f972"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses a Floyd-Steinberg dither  <a href="#a586dbdce2ea65045a42c28b4de38f972">More...</a><br/></td></tr>
<tr class="separator:a586dbdce2ea65045a42c28b4de38f972"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td colspan="2" onclick="javascript:toggleInherit('properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer')"><img src="closed.png" alt="-"/>&#160;Properties inherited from <a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html">ImageResizer.Plugins.PrettyGifs.Quantizer</a></td></tr>
<tr class="memitem:af215735ead9e218ff72f8d7c67f8f03d inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html#af215735ead9e218ff72f8d7c67f8f03d">FixedPalette</a><code> [get]</code></td></tr>
<tr class="memdesc:af215735ead9e218ff72f8d7c67f8f03d inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="mdescLeft">&#160;</td><td class="mdescRight">(Readonly) If true, the algorithm can do everything in QuantizePixel, and InitialQuantizePixel will not be called. Implies ResizeForFirstPass=False and FourPass=false=  <a href="#af215735ead9e218ff72f8d7c67f8f03d">More...</a><br/></td></tr>
<tr class="separator:af215735ead9e218ff72f8d7c67f8f03d inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a352139f8cee49782d51ad22b7f280a26 inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html#a352139f8cee49782d51ad22b7f280a26">PixelSize</a><code> [get]</code></td></tr>
<tr class="memdesc:a352139f8cee49782d51ad22b7f280a26 inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of bytes in a ARGB structure. Should be 4  <a href="#a352139f8cee49782d51ad22b7f280a26">More...</a><br/></td></tr>
<tr class="separator:a352139f8cee49782d51ad22b7f280a26 inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac33de902f0a7e08ad889d4954cf85ed4 inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html#ac33de902f0a7e08ad889d4954cf85ed4">FullTrust</a><code> [get, set]</code></td></tr>
<tr class="memdesc:ac33de902f0a7e08ad889d4954cf85ed4 inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, pointer arithmetic will be used instead of GetPixel. GetPixel is much slower. If false, OmitFinalStage will be assumed true, as only palette generation is possible in low trust. Defaults to true.  <a href="#ac33de902f0a7e08ad889d4954cf85ed4">More...</a><br/></td></tr>
<tr class="separator:ac33de902f0a7e08ad889d4954cf85ed4 inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae949d228b68d7950edac06944f20a13a inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html#ae949d228b68d7950edac06944f20a13a">ResizeForFirstPass</a><code> [get, set]</code></td></tr>
<tr class="memdesc:ae949d228b68d7950edac06944f20a13a inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, the first pass (InitialQuantizePixel) will be performed on a size-limited version of the original image to control performance. Ignored if FixedPalette=True  <a href="#ae949d228b68d7950edac06944f20a13a">More...</a><br/></td></tr>
<tr class="separator:ae949d228b68d7950edac06944f20a13a inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9c8a3b3608f7d947cc7a161a457180d inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html#ac9c8a3b3608f7d947cc7a161a457180d">FirstPassPixelCount</a><code> [get, set]</code></td></tr>
<tr class="memdesc:ac9c8a3b3608f7d947cc7a161a457180d inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="mdescLeft">&#160;</td><td class="mdescRight">The approximate number of pixels to use when making a scaled copy of the image for the first pass. Only used when ResizeForFirstPass=True and FirstPassPixelThreshold is exceeded.  <a href="#ac9c8a3b3608f7d947cc7a161a457180d">More...</a><br/></td></tr>
<tr class="separator:ac9c8a3b3608f7d947cc7a161a457180d inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9af3382b16f21fa107afc50c5847393f inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html#a9af3382b16f21fa107afc50c5847393f">FirstPassPixelThreshold</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a9af3382b16f21fa107afc50c5847393f inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum number of pixels the original image may contain before a scaled copy is made for the first pass. Only relevant when ResizeForFirstPass=True  <a href="#a9af3382b16f21fa107afc50c5847393f">More...</a><br/></td></tr>
<tr class="separator:a9af3382b16f21fa107afc50c5847393f inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade30184747b7011c8773c9aac5a8df8e inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html#ade30184747b7011c8773c9aac5a8df8e">FourPass</a><code> [get, set]</code></td></tr>
<tr class="memdesc:ade30184747b7011c8773c9aac5a8df8e inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, image is re-paletted after quantization - forces 2 clones of the original image to be created. FixedPalette and OmitFinalStage should be false if this is used.  <a href="#ade30184747b7011c8773c9aac5a8df8e">More...</a><br/></td></tr>
<tr class="separator:ade30184747b7011c8773c9aac5a8df8e inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81b103d52bbc5e5946d680a73b75b682 inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html#a81b103d52bbc5e5946d680a73b75b682">OmitFinalStage</a><code> [get, set]</code></td></tr>
<tr class="memdesc:a81b103d52bbc5e5946d680a73b75b682 inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, a 32-bit image with an 8-bit palette will be returned instead of an 8-bit image, which GDI can save using median-cut quantization. Much faster than our final quantization pass, although it can't do transparency. Assumed true if FullTrust is false.  <a href="#a81b103d52bbc5e5946d680a73b75b682">More...</a><br/></td></tr>
<tr class="separator:a81b103d52bbc5e5946d680a73b75b682 inherit properties_class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Quantize using an Octree </p>

<p>Definition at line <a class="el" href="_octree_quantizer_8cs_source.html#l00027">27</a> of file <a class="el" href="_octree_quantizer_8cs_source.html">OctreeQuantizer.cs</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aec0faf7b90a160ee61e6f5b0a5c1c062"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ImageResizer.Plugins.PrettyGifs.OctreeQuantizer.OctreeQuantizer </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxColors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxColorBits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct the octree quantizer </p>
<p>The Octree quantizer is a two pass algorithm. The initial pass sets up the octree, the second pass quantizes a color based on the nodes in the tree </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">maxColors</td><td>The maximum number of colors to return</td></tr>
    <tr><td class="paramname">maxColorBits</td><td>The number of significant bits</td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_octree_quantizer_8cs_source.html#l00038">38</a> of file <a class="el" href="_octree_quantizer_8cs_source.html">OctreeQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                                                                            : base ( <span class="keyword">false</span> )</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                {</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;            <a class="code" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer.html#a9beafc72579a427fbdcad46d83ce6566">Reset</a>(maxColors, maxColorBits);</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                }</div>
<div class="ttc" id="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer_html_a9beafc72579a427fbdcad46d83ce6566"><div class="ttname"><a href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer.html#a9beafc72579a427fbdcad46d83ce6566">ImageResizer.Plugins.PrettyGifs.OctreeQuantizer.Reset</a></div><div class="ttdeci">override void Reset()</div><div class="ttdoc">Clears the octree </div><div class="ttdef"><b>Definition:</b> <a href="_octree_quantizer_8cs_source.html#l00045">OctreeQuantizer.cs:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a49760b1e0752212afe766b2802f86b10"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">override ColorPalette ImageResizer.Plugins.PrettyGifs.OctreeQuantizer.GetPalette </td>
          <td>(</td>
          <td class="paramtype">ColorPalette&#160;</td>
          <td class="paramname"><em>original</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the palette for the quantized image </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">original</td><td>Any old palette, this is overrwritten</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new color palette</dd></dl>

<p>Implements <a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html#aca2b90e50d19a7f138ad5cbe58f10d52">ImageResizer.Plugins.PrettyGifs.Quantizer</a>.</p>

<p>Definition at line <a class="el" href="_octree_quantizer_8cs_source.html#l00175">175</a> of file <a class="el" href="_octree_quantizer_8cs_source.html">OctreeQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                        <span class="comment">// First off convert the octree to _maxColors colors</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                        ArrayList       palette = _octree.Palletize ( _maxColors - 1 ) ;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                        <span class="comment">// Then convert the palette based on those colors</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                        <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> index = 0 ; index &lt; palette.Count ; index++ )</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                                original.Entries[index + (TransparencyAtZero ? 1 : 0)] = (Color)palette[index] ;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                        <span class="comment">// Add the transparent color (Needs to be inserted at 0, not 255)</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                        <span class="keywordflow">if</span> (TransparencyAtZero)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                original.Entries[0] = Color.FromArgb(0, 0, 0, 0);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                original.Entries[_maxColors] = Color.FromArgb ( 0 , 0 , 0 , 0 ) ;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            _lastPalette = original; <span class="comment">//may-18-2009, ndj: Saving a reference so we can lookup error amounts from QuantizePixel</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                        <span class="keywordflow">return</span> original ;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2ae43ea54b1271764f94f95298910181"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">override void ImageResizer.Plugins.PrettyGifs.OctreeQuantizer.InitialQuantizePixel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer_1_1_color32.html">Color32</a>&#160;</td>
          <td class="paramname"><em>pixel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process the pixel in the first pass of the algorithm </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pixel</td><td>The pixel to quantize</td></tr>
  </table>
  </dd>
</dl>
<p>This function need only be overridden if your quantize algorithm needs two passes, such as an Octree quantizer. </p>

<p>Reimplemented from <a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html#a6dc513b30a6b60d6f1bb8a737d5fd0f9">ImageResizer.Plugins.PrettyGifs.Quantizer</a>.</p>

<p>Definition at line <a class="el" href="_octree_quantizer_8cs_source.html#l00079">79</a> of file <a class="el" href="_octree_quantizer_8cs_source.html">OctreeQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                        <span class="comment">// Add the color to the octree</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                        _octree.AddColor ( pixel ) ;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7a8dd490b27330aefe437aea78e91839"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">override byte ImageResizer.Plugins.PrettyGifs.OctreeQuantizer.QuantizePixel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer_1_1_color32.html">Color32</a>&#160;</td>
          <td class="paramname"><em>pixel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Override this to process the pixel in the second pass of the algorithm </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pixel</td><td>The pixel to quantize</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The quantized value</dd></dl>

<p>Implements <a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html#a2bf22a06ffc3228886015e2dc0608360">ImageResizer.Plugins.PrettyGifs.Quantizer</a>.</p>

<p>Definition at line <a class="el" href="_octree_quantizer_8cs_source.html#l00112">112</a> of file <a class="el" href="_octree_quantizer_8cs_source.html">OctreeQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                        byte    paletteIndex;   <span class="comment">// The color at [_maxColors] is set to transparent</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="comment">//TODO: Other sources claim only the first pallete color can be transparent</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="comment">//Quote: Second, I&#39;ve found a solution for preserving GIF transparency when invoking Image::Save(...). The .NET (tested on v2.0) </span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <span class="comment">//GIF encoder considers transparent the first color found in the palette, so I&#39;ve changed some methods (replace them with the supplied ones):</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                        <span class="comment">// Get the palette index if this non-transparent</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="keywordflow">if</span> (pixel.Alpha &gt; 0)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            {</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                paletteIndex = (byte)_octree.GetPaletteIndex(pixel);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                <span class="comment">//For dithering we need to track 6 pixels. </span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                <span class="comment">//To dither, we find the error (difference from real pixel to the palette color), and subtract it from the next pixel. When that color is paletted, </span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                <span class="comment">//The dither occurs.</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                <span class="comment">//The issue is that error adjustments build up, so you&#39;re never working off the original color. Hopefully this doesn&#39;t cause issues.</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer.html#a586dbdce2ea65045a42c28b4de38f972">Dither</a>)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                    Color n = _lastPalette.Entries[paletteIndex]; <span class="comment">//The palette version</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                    <span class="comment">//Calculate error for the current pixel</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                    <span class="keywordtype">int</span> errorR = n.R - pixel.Red;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                    <span class="keywordtype">int</span> errorG = n.G - pixel.Green;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                    <span class="keywordtype">int</span> errorB = n.B - pixel.Blue;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                    <span class="keywordtype">int</span> errorA = n.A - pixel.Alpha;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 1; y &lt; 3;y++)</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; 3; x++){</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                            <span class="keywordtype">float</span> adjust = <a class="code" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer.html#a18f77f4380a83f1fe3bbe6d8173949a3">DitherMatrix</a>[y, x] * DitherPercent;<span class="comment">//How much of the error should be passed on (in negative form) the this neighbor pixel</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                            <span class="keywordflow">if</span> (adjust != 0)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                            {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                               </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                                <a class="code" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html#adb7ea9913770ace53fc698211e41ef89">AdjustNeighborSource</a>(x - 1, y - 1, (<span class="keywordtype">int</span>)((<span class="keywordtype">float</span>)errorR * adjust * -1), </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                                                                   (<span class="keywordtype">int</span>)((<span class="keywordtype">float</span>)errorG * adjust * -1), </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                                                                   (<span class="keywordtype">int</span>)((<span class="keywordtype">float</span>)errorB * adjust * -1), </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                                                                   (<span class="keywordtype">int</span>)((<span class="keywordtype">float</span>)errorA * adjust * -1));</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                                   </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                            }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                        }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                    </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                <span class="keywordflow">if</span> (TransparencyAtZero) paletteIndex++;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                <span class="keywordflow">if</span> (TransparencyAtZero)</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                    paletteIndex = 0;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                    paletteIndex = (byte)_maxColors;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                   </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                        <span class="keywordflow">return</span> paletteIndex ;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                }</div>
<div class="ttc" id="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer_html_adb7ea9913770ace53fc698211e41ef89"><div class="ttname"><a href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html#adb7ea9913770ace53fc698211e41ef89">ImageResizer.Plugins.PrettyGifs.Quantizer.AdjustNeighborSource</a></div><div class="ttdeci">void AdjustNeighborSource(int offsetX, int offsetY, int deltaR, int deltaG, int deltaB, int deltaA)</div><div class="ttdoc">Can only be called from QuantizePixel... This is how dithering is done... 5-18-09 ndj ...</div><div class="ttdef"><b>Definition:</b> <a href="_quantizer_8cs_source.html#l00461">Quantizer.cs:461</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer_html_a18f77f4380a83f1fe3bbe6d8173949a3"><div class="ttname"><a href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer.html#a18f77f4380a83f1fe3bbe6d8173949a3">ImageResizer.Plugins.PrettyGifs.OctreeQuantizer.DitherMatrix</a></div><div class="ttdeci">float[,] DitherMatrix</div><div class="ttdoc">a Floyd-Steinberg dither matrix new float[,] {{0,0,0}, {0,0,0.44f}, {0.19f,0.31f,0.06f}}; </div><div class="ttdef"><b>Definition:</b> <a href="_octree_quantizer_8cs_source.html#l00102">OctreeQuantizer.cs:102</a></div></div>
<div class="ttc" id="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer_html_a586dbdce2ea65045a42c28b4de38f972"><div class="ttname"><a href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer.html#a586dbdce2ea65045a42c28b4de38f972">ImageResizer.Plugins.PrettyGifs.OctreeQuantizer.Dither</a></div><div class="ttdeci">bool Dither</div><div class="ttdoc">Uses a Floyd-Steinberg dither </div><div class="ttdef"><b>Definition:</b> <a href="_octree_quantizer_8cs_source.html#l00092">OctreeQuantizer.cs:92</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9beafc72579a427fbdcad46d83ce6566"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">override void ImageResizer.Plugins.PrettyGifs.OctreeQuantizer.Reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clears the octree </p>

<p>Reimplemented from <a class="el" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_quantizer.html#a04f97f70db162fe88b3d10dc3277f6d2">ImageResizer.Plugins.PrettyGifs.Quantizer</a>.</p>

<p>Definition at line <a class="el" href="_octree_quantizer_8cs_source.html#l00045">45</a> of file <a class="el" href="_octree_quantizer_8cs_source.html">OctreeQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;            base.Reset();</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;            <a class="code" href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer.html#a9beafc72579a427fbdcad46d83ce6566">Reset</a>(_maxColors, _maxColorBits);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        }</div>
<div class="ttc" id="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer_html_a9beafc72579a427fbdcad46d83ce6566"><div class="ttname"><a href="class_image_resizer_1_1_plugins_1_1_pretty_gifs_1_1_octree_quantizer.html#a9beafc72579a427fbdcad46d83ce6566">ImageResizer.Plugins.PrettyGifs.OctreeQuantizer.Reset</a></div><div class="ttdeci">override void Reset()</div><div class="ttdoc">Clears the octree </div><div class="ttdef"><b>Definition:</b> <a href="_octree_quantizer_8cs_source.html#l00045">OctreeQuantizer.cs:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af5c1d1a663a3a669e3dc83caed159c09"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ImageResizer.Plugins.PrettyGifs.OctreeQuantizer.Reset </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxColors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxColorBits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clears the octree and reconfigures color settings </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">maxColors</td><td></td></tr>
    <tr><td class="paramname">maxColorBits</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_octree_quantizer_8cs_source.html#l00056">56</a> of file <a class="el" href="_octree_quantizer_8cs_source.html">OctreeQuantizer.cs</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;           </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            <span class="keywordflow">if</span> (maxColors &gt; 255)</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentOutOfRangeException(<span class="stringliteral">&quot;maxColors&quot;</span>, maxColors, <span class="stringliteral">&quot;The number of colors should be less than 256&quot;</span>);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            <span class="keywordflow">if</span> ((maxColorBits &lt; 1) | (maxColorBits &gt; 8))</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentOutOfRangeException(<span class="stringliteral">&quot;maxColorBits&quot;</span>, maxColorBits, <span class="stringliteral">&quot;This should be between 1 and 8&quot;</span>);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            _maxColorBits = maxColorBits;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            <span class="comment">// Construct the octree</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            _octree = <span class="keyword">new</span> Octree(maxColorBits);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            _maxColors = maxColors;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a18f77f4380a83f1fe3bbe6d8173949a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float [,] ImageResizer.Plugins.PrettyGifs.OctreeQuantizer.DitherMatrix</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= <span class="keyword">new</span> <span class="keywordtype">float</span>[,] {{0,0,0},</div>
<div class="line">                                                            {0,0,0.44f},</div>
<div class="line">                                                            {0.19f,0.31f,0.06f}}</div>
</div><!-- fragment -->
<p>a Floyd-Steinberg dither matrix new float[,] {{0,0,0}, {0,0,0.44f}, {0.19f,0.31f,0.06f}}; </p>

<p>Definition at line <a class="el" href="_octree_quantizer_8cs_source.html#l00102">102</a> of file <a class="el" href="_octree_quantizer_8cs_source.html">OctreeQuantizer.cs</a>.</p>

</div>
</div>
<h2 class="groupheader">Property Documentation</h2>
<a class="anchor" id="a586dbdce2ea65045a42c28b4de38f972"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ImageResizer.Plugins.PrettyGifs.OctreeQuantizer.Dither</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">set</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Uses a Floyd-Steinberg dither </p>

<p>Definition at line <a class="el" href="_octree_quantizer_8cs_source.html#l00092">92</a> of file <a class="el" href="_octree_quantizer_8cs_source.html">OctreeQuantizer.cs</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>C:/Users/nathanael/Documents/resizer/Plugins/PrettyGifs/<a class="el" href="_octree_quantizer_8cs_source.html">OctreeQuantizer.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
