<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>ImageResizer: ImageResizer.Plugins.DiskCache.DiskCache Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="resizer-icon-64.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">ImageResizer
   &#160;<span id="projectnumber">3.2.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Events</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespace_image_resizer.html">ImageResizer</a>      </li>
      <li class="navelem"><a class="el" href="namespace_image_resizer_1_1_plugins.html">Plugins</a>      </li>
      <li class="navelem"><a class="el" href="namespace_image_resizer_1_1_plugins_1_1_disk_cache.html">DiskCache</a>      </li>
      <li class="navelem"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html">DiskCache</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#properties">Properties</a>  </div>
  <div class="headertitle">
<div class="title">ImageResizer.Plugins.DiskCache.DiskCache Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="ImageResizer::Plugins::DiskCache::DiskCache" --><!-- doxytag: inherits="ImageResizer::Caching::ICache,ImageResizer::Plugins::IPlugin,ImageResizer::Configuration::Issues::IIssueProvider,ImageResizer::Configuration::Logging::ILoggerProvider" -->
<p>Provides methods for creating, maintaining, and securing the disk cache.  
 <a href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for ImageResizer.Plugins.DiskCache.DiskCache:</div>
<div class="dyncontent">
<div class="center"><img src="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache__inherit__graph.png" border="0" usemap="#_image_resizer_8_plugins_8_disk_cache_8_disk_cache_inherit__map" alt="Inheritance graph"/></div>
<map name="_image_resizer_8_plugins_8_disk_cache_8_disk_cache_inherit__map" id="_image_resizer_8_plugins_8_disk_cache_8_disk_cache_inherit__map">
<area shape="rect" id="node2" href="interface_image_resizer_1_1_caching_1_1_i_cache.html" title="Provides caching behavior." alt="" coords="27,6,149,53"/><area shape="rect" id="node4" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html" title="All plugins must implement this. Enables web.config addition and removal." alt="" coords="174,6,292,53"/><area shape="rect" id="node6" href="interface_image_resizer_1_1_configuration_1_1_issues_1_1_i_issue_provider.html" title="IIssueProvider" alt="" coords="317,6,539,53"/><area shape="rect" id="node8" href="interface_image_resizer_1_1_configuration_1_1_logging_1_1_i_logger_provider.html" title="ILoggerProvider" alt="" coords="563,6,807,53"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for ImageResizer.Plugins.DiskCache.DiskCache:</div>
<div class="dyncontent">
<div class="center"><img src="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache__coll__graph.png" border="0" usemap="#_image_resizer_8_plugins_8_disk_cache_8_disk_cache_coll__map" alt="Collaboration graph"/></div>
<map name="_image_resizer_8_plugins_8_disk_cache_8_disk_cache_coll__map" id="_image_resizer_8_plugins_8_disk_cache_8_disk_cache_coll__map">
<area shape="rect" id="node2" href="interface_image_resizer_1_1_caching_1_1_i_cache.html" title="Provides caching behavior." alt="" coords="3211,5,3333,51"/><area shape="rect" id="node4" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html" title="All plugins must implement this. Enables web.config addition and removal." alt="" coords="3213,75,3331,122"/><area shape="rect" id="node6" href="interface_image_resizer_1_1_configuration_1_1_issues_1_1_i_issue_provider.html" title="IIssueProvider" alt="" coords="10,269,233,315"/><area shape="rect" id="node14" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_cleanup_manager.html" title="ImageResizer.Plugins.DiskCache.CleanupManager" alt="" coords="2902,355,3642,402"/><area shape="rect" id="node20" href="class_image_resizer_1_1_configuration_1_1_issues_1_1_issue_sink.html" title="IssueSink" alt="" coords="591,269,751,315"/><area shape="rect" id="node8" href="interface_image_resizer_1_1_configuration_1_1_logging_1_1_i_logger_provider.html" title="ILoggerProvider" alt="" coords="3150,285,3394,331"/><area shape="rect" id="node10" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_web_config_writer.html" title="Handles writing a Web.Config to disk that uses Url Authorization to prevent visitors from accessing t..." alt="" coords="2133,617,2877,663"/><area shape="rect" id="node12" href="interface_image_resizer_1_1_configuration_1_1_logging_1_1_i_logger_provider.html" title="ImageResizer.Configuration.Logging.ILoggerProvider" alt="" coords="289,545,1053,591"/><area shape="rect" id="node25" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_custom_disk_cache.html" title="Handles access to a disk&#45;based file cache. Handles locking and versioning. Supports subfolders for sc..." alt="" coords="1309,545,2072,591"/><area shape="rect" id="node18" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_cleanup_strategy.html" title="ImageResizer.Plugins.DiskCache.CleanupStrategy" alt="" coords="1325,198,2057,245"/><area shape="rect" id="node30" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_cleanup_worker.html" title="ImageResizer.Plugins.DiskCache.CleanupWorker" alt="" coords="1331,269,2051,315"/><area shape="rect" id="node23" href="interface_image_resizer_1_1_configuration_1_1_issues_1_1_i_issue_receiver.html" title="IIssueReceiver" alt="" coords="6,363,237,410"/><area shape="rect" id="node28" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_lock_provider.html" title="Provides locking based on a string key. Locks are local to the LockProvider instance. The class handles disposing of unused locks. Generally used for coordinating writes to files (of which there can be millions). Only keeps key/lock pairs in memory which are in use. Thread&#45;safe." alt="" coords="329,419,1012,466"/><area shape="rect" id="node33" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_cleanup_1_1_cleanup_queue.html" title="ImageResizer.Plugins.DiskCache.Cleanup.CleanupQueue" alt="" coords="1272,474,2109,521"/><area shape="rect" id="node36" href="interface_image_resizer_1_1_configuration_1_1_logging_1_1_i_logger.html" title="ImageResizer.Configuration.Logging.ILogger" alt="" coords="2948,697,3596,743"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a8e7ce765d0d4424bfc245a987dabfed7">DiskCache</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a disk cache in the /imagecache folder.  <a href="#a8e7ce765d0d4424bfc245a987dabfed7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a66846ff9577c53c64b8c6f569ba6af7d">DiskCache</a> (string virtualDir)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html" title="Provides methods for creating, maintaining, and securing the disk cache.">DiskCache</a> instance at the specified location. Must be installed as a plugin to be operational.  <a href="#a66846ff9577c53c64b8c6f569ba6af7d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a19e04da009febf0d35b37700ca026062">LoadSettings</a> (<a class="el" href="class_image_resizer_1_1_configuration_1_1_config.html">Config</a> c)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses the defaults from the resizing.diskcache section in the specified configuration. Throws an invalid operation exception if the <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html" title="Provides methods for creating, maintaining, and securing the disk cache.">DiskCache</a> is already started.  <a href="#a19e04da009febf0d35b37700ca026062"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html">IPlugin</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a97c992e137f180427979ef2d0459dab9">Install</a> (<a class="el" href="class_image_resizer_1_1_configuration_1_1_config.html">Config</a> c)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads the settings from 'c', starts the cache, and registers the plugin. Will throw an invalidoperationexception if already started.  <a href="#a97c992e137f180427979ef2d0459dab9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#ad9f28854949ae77bc24aaeec231b4cd0">Uninstall</a> (<a class="el" href="class_image_resizer_1_1_configuration_1_1_config.html">Config</a> c)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Uninstalls the plugin. Should reverse all changes made during Install.  <a href="#ad9f28854949ae77bc24aaeec231b4cd0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#af2c79cf5af8ef3d96966936c1e522d2a">IsConfigurationValid</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the configured settings are valid and .NET (not NTFS) permissions will work.  <a href="#af2c79cf5af8ef3d96966936c1e522d2a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a6c81fcb56683a5658456227469fa5d9a">Start</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to start the <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html" title="Provides methods for creating, maintaining, and securing the disk cache.">DiskCache</a> using the current settings. Returns true if succesful or if already started. Returns false on a configuration error. Called by <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a97c992e137f180427979ef2d0459dab9" title="Loads the settings from &#39;c&#39;, starts the cache, and registers the plugin. Will throw an invalidoperati...">Install()</a>  <a href="#a6c81fcb56683a5658456227469fa5d9a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a5cb5580fe25f56de3d31ca75ed91fa8c">Stop</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if stopped succesfully. Cannot be restarted.  <a href="#a5cb5580fe25f56de3d31ca75ed91fa8c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#ad2c1159830b4553b13a51e6518b79fca">CanProcess</a> (HttpContext current, <a class="el" href="interface_image_resizer_1_1_caching_1_1_i_response_args.html">IResponseArgs</a> e)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns false if the cache is unable to process the request. If false, the caller should fall back to a different cache.  <a href="#ad2c1159830b4553b13a51e6518b79fca"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#aea8298c74ed69a1689e1640f0991d825">Process</a> (HttpContext context, <a class="el" href="interface_image_resizer_1_1_caching_1_1_i_response_args.html">IResponseArgs</a> e)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Must update the cache if needed, then either rewrite, redirect or serve the cached data.  <a href="#aea8298c74ed69a1689e1640f0991d825"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a50a8e90481cb6e6e7c3bd38b9bd35209"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::Process" ref="a50a8e90481cb6e6e7c3bd38b9bd35209" args="(IResponseArgs e)" -->
<a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_cache_result.html">CacheResult</a>&#160;</td><td class="memItemRight" valign="bottom"><b>Process</b> (<a class="el" href="interface_image_resizer_1_1_caching_1_1_i_response_args.html">IResponseArgs</a> e)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a70ea03a99f6d8824486515c183059830"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::GetIssues" ref="a70ea03a99f6d8824486515c183059830" args="()" -->
IEnumerable&lt; <a class="el" href="interface_image_resizer_1_1_configuration_1_1_issues_1_1_i_issue.html">IIssue</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>GetIssues</b> ()</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a43a9d95ea4823f06a7125ef283e7cc9b">BeforeSettingChanged</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Throws an exception if the class is already modified.  <a href="#a43a9d95ea4823f06a7125ef283e7cc9b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a51f26c30ab93791154685b3837afc953">HasFileIOPermission</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if .NET permissions allow writing to the cache directory. Does not check NTFS permissions.  <a href="#a51f26c30ab93791154685b3837afc953"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab061df14ac455611fbe07f1acb1b85b1"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::HasNTFSPermission" ref="ab061df14ac455611fbe07f1acb1b85b1" args="()" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><b>HasNTFSPermission</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa003e4b9deaaa79fc5c9840d8ed02021"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::GetExecutingUser" ref="aa003e4b9deaaa79fc5c9840d8ed02021" args="()" -->
string&#160;</td><td class="memItemRight" valign="bottom"><b>GetExecutingUser</b> ()</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4f18ffe9cd899dcbeda08b57f7c9a923"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::cacheAccessTimeout" ref="a4f18ffe9cd899dcbeda08b57f7c9a923" args="" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>cacheAccessTimeout</b> = 15000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab490522228d7324e6cab3ae3c3ad8825"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::virtualDir" ref="ab490522228d7324e6cab3ae3c3ad8825" args="" -->
string&#160;</td><td class="memItemRight" valign="bottom"><b>virtualDir</b> = &quot;/imagecache&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aec4b539707eac265485676dc20c64ba1"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::log" ref="aec4b539707eac265485676dc20c64ba1" args="" -->
<a class="el" href="interface_image_resizer_1_1_configuration_1_1_logging_1_1_i_logger.html">ILogger</a>&#160;</td><td class="memItemRight" valign="bottom"><b>log</b> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac6fd54b0613ac210936f554fb5140e06"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::cache" ref="ac6fd54b0613ac210936f554fb5140e06" args="" -->
<a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_custom_disk_cache.html">CustomDiskCache</a>&#160;</td><td class="memItemRight" valign="bottom"><b>cache</b> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae9f5f234bcb51d70c22913bfb790a137"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::cleaner" ref="ae9f5f234bcb51d70c22913bfb790a137" args="" -->
<a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_cleanup_manager.html">CleanupManager</a>&#160;</td><td class="memItemRight" valign="bottom"><b>cleaner</b> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae0607f94aee5b5dddd53077f0c7fab60"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::writer" ref="ae0607f94aee5b5dddd53077f0c7fab60" args="" -->
<a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_web_config_writer.html">WebConfigWriter</a>&#160;</td><td class="memItemRight" valign="bottom"><b>writer</b> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad4b1ecc789053b873e36e57384bb41b3"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::_startSync" ref="ad4b1ecc789053b873e36e57384bb41b3" args="" -->
readonly object&#160;</td><td class="memItemRight" valign="bottom"><b>_startSync</b> = new object()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac40c0cb571e3602085b28add4ef1ca2e"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::_started" ref="ac40c0cb571e3602085b28add4ef1ca2e" args="" -->
volatile bool&#160;</td><td class="memItemRight" valign="bottom"><b>_started</b> = false</td></tr>
<tr><td colspan="2"><h2><a name="properties"></a>
Properties</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#ab9566bb68b57437c9dccb4c27d6397e0">Subfolders</a><code> [get, set]</code></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="namespace_image_resizer_1_1_plugins_1_1_controls.html">Controls</a> how many subfolders to use for disk caching. Rounded to the next power of to. (1-&gt;2, 3-&gt;4, 5-&gt;8, 9-&gt;16, 17-&gt;32, 33-&gt;64, 65-&gt;128,129-&gt;256,etc.) NTFS does not handle more than 8,000 files per folder well. Larger folders also make cleanup more resource-intensive. Defaults to 32, which combined with the default setting of 400 images per folder, allows for scalability to 12,800 actively used image versions. For example, given a desired cache size of 100,000 items, this should be set to 256.  <a href="#ab9566bb68b57437c9dccb4c27d6397e0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a20fdd8f25afd3e712d4331a28886e7e1">Enabled</a><code> [get, set]</code></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Allows disk caching to be disabled for debuginng purposes. Defaults to true.  <a href="#a20fdd8f25afd3e712d4331a28886e7e1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a21e3a602d75eec0399962ae9b04b2b9b">AutoClean</a><code> [get, set]</code></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, items from the cache folder will be automatically 'garbage collected' if the cache size limits are exceeded. Defaults to false.  <a href="#a21e3a602d75eec0399962ae9b04b2b9b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_cleanup_strategy.html">CleanupStrategy</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a14e1a1afff8c1d086f91eb7f1d7b4060">CleanupStrategy</a><code> [get, set]</code></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Only relevant when AutoClean=true. Settings about how background cache cleanup are performed. It is best not to modify these settings. There are very complicated and non-obvious factors involved in their choice.  <a href="#a14e1a1afff8c1d086f91eb7f1d7b4060"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#ae9bd5dae4cd2ec5cfd13153386941e9b">CacheAccessTimeout</a><code> [get, set]</code></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">How many milliseconds to wait for a cached item to be available. Values below 0 are set to 0. Defaults to 15 seconds. Actual time spent waiting may be 2 or 3x this value, if multiple layers of synchronization require a wait.  <a href="#ae9bd5dae4cd2ec5cfd13153386941e9b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a987835b68d3decf11ebc1865af9b2f1a">HashModifiedDate</a><code> [get, set]</code></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, when a source file is changed, a new file will be created instead of overwriting the old cached file. This helps prevent file lock contention on high-traffic servers. Defaults to true. Do NOT set this to false in a Web Garden or if you have overlapped recycle enabled, as you may risk having occasional failed requests due to write contention by separate proccesses. Changes the hash function, so you should delete the cache folder whenever this setting is modified.  <a href="#a987835b68d3decf11ebc1865af9b2f1a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a041942b5394c38fd989fa268d69348a7">AsyncWrites</a><code> [get, set]</code></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">If true, writes to the disk cache will be performed outside the request thread, allowing responses to return to the client quicker.  <a href="#a041942b5394c38fd989fa268d69348a7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#ad36ae61ace9fdb78f7daf1c5a672c6c4">AsyncBufferSize</a><code> [get, set]</code></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">If more than this amount of memory (in bytes) is currently allocated by queued writes, the request will be processed synchronously instead of asynchronously.  <a href="#ad36ae61ace9fdb78f7daf1c5a672c6c4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a9107f03f8a4e721a8af66dd1bbb38eea">VirtualCacheDir</a><code> [get, set]</code></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the location of the cache directory. Can be a virtual path (like /App/imagecache) or an application-relative path (like ~/imagecache, the default). Relative paths are assummed to be relative to the application root. All values are converted to virtual path format upon assignment (/App/imagecache) Will throw an InvalidOperationException if changed after the plugin is installed.  <a href="#a9107f03f8a4e721a8af66dd1bbb38eea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a8fed6209155c922102b9430d2f216276">PhysicalCacheDir</a><code> [get]</code></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the physical path of the cache directory specified in VirtualCacheDir.  <a href="#a8fed6209155c922102b9430d2f216276"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3ab0cf5df41556a76c1d9828effb918c"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::Logger" ref="a3ab0cf5df41556a76c1d9828effb918c" args="" -->
<a class="el" href="interface_image_resizer_1_1_configuration_1_1_logging_1_1_i_logger.html">ILogger</a>&#160;</td><td class="memItemRight" valign="bottom"><b>Logger</b><code> [get]</code></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a32744b9ad1db64994e068f27cfe87314">Started</a><code> [get]</code></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html" title="Provides methods for creating, maintaining, and securing the disk cache.">DiskCache</a> instance is operational.  <a href="#a32744b9ad1db64994e068f27cfe87314"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Provides methods for creating, maintaining, and securing the disk cache. </p>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00036">36</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a8e7ce765d0d4424bfc245a987dabfed7"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::DiskCache" ref="a8e7ce765d0d4424bfc245a987dabfed7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a8e7ce765d0d4424bfc245a987dabfed7">ImageResizer.Plugins.DiskCache.DiskCache.DiskCache</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a disk cache in the /imagecache folder. </p>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00162">162</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>
<div class="fragment"><pre class="fragment">{}
</pre></div>
</div>
</div>
<a class="anchor" id="a66846ff9577c53c64b8c6f569ba6af7d"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::DiskCache" ref="a66846ff9577c53c64b8c6f569ba6af7d" args="(string virtualDir)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a8e7ce765d0d4424bfc245a987dabfed7">ImageResizer.Plugins.DiskCache.DiskCache.DiskCache</a> </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>virtualDir</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html" title="Provides methods for creating, maintaining, and securing the disk cache.">DiskCache</a> instance at the specified location. Must be installed as a plugin to be operational. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">virtualDir</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00168">168</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                           {
            <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a9107f03f8a4e721a8af66dd1bbb38eea" title="Sets the location of the cache directory. Can be a virtual path (like /App/imagecache) or an applicat...">VirtualCacheDir</a> = virtualDir;
        }
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a43a9d95ea4823f06a7125ef283e7cc9b"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::BeforeSettingChanged" ref="a43a9d95ea4823f06a7125ef283e7cc9b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a43a9d95ea4823f06a7125ef283e7cc9b">ImageResizer.Plugins.DiskCache.DiskCache.BeforeSettingChanged</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Throws an exception if the class is already modified. </p>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00155">155</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                              {
            <span class="keywordflow">if</span> (_started) <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidOperationException(<span class="stringliteral">&quot;DiskCache settings may not be adjusted after it is started.&quot;</span>);
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ad2c1159830b4553b13a51e6518b79fca"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::CanProcess" ref="ad2c1159830b4553b13a51e6518b79fca" args="(HttpContext current, IResponseArgs e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#ad2c1159830b4553b13a51e6518b79fca">ImageResizer.Plugins.DiskCache.DiskCache.CanProcess</a> </td>
          <td>(</td>
          <td class="paramtype">HttpContext&#160;</td>
          <td class="paramname"><em>current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_image_resizer_1_1_caching_1_1_i_response_args.html">IResponseArgs</a>&#160;</td>
          <td class="paramname"><em>e</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns false if the cache is unable to process the request. If false, the caller should fall back to a different cache. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">current</td><td></td></tr>
    <tr><td class="paramname">e</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="interface_image_resizer_1_1_caching_1_1_i_cache.html#abe6aebbb4a1993a23a05b158729ef60e">ImageResizer.Caching.ICache</a>.</p>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00288">288</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                     {
            <span class="comment">//Disk caching will &#39;pass on&#39; caching requests if &#39;cache=no&#39;.</span>
            <span class="keywordflow">if</span> (((ResizeSettings)e.<a class="code" href="interface_image_resizer_1_1_caching_1_1_i_response_args.html#aa9dc61f9d5c59912f02c89da09abf69b" title="The rewritten querystring. Can be useful for caching systems that accept querystring arguments...">RewrittenQuerystring</a>).Cache == <a class="code" href="namespace_image_resizer.html#a6b30c95c789b77db2c5aa905345d917c" title="When to disk cache the image.">ServerCacheMode</a>.No) <span class="keywordflow">return</span> <span class="keyword">false</span>;
            <span class="keywordflow">return</span> <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a32744b9ad1db64994e068f27cfe87314" title="Returns true if the DiskCache instance is operational.">Started</a>;<span class="comment">//Add support for nocache</span>
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a51f26c30ab93791154685b3837afc953"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::HasFileIOPermission" ref="a51f26c30ab93791154685b3837afc953" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a51f26c30ab93791154685b3837afc953">ImageResizer.Plugins.DiskCache.DiskCache.HasFileIOPermission</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if .NET permissions allow writing to the cache directory. Does not check NTFS permissions. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00234">234</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                             {
            FileIOPermission writePermission = <span class="keyword">new</span> FileIOPermission(FileIOPermissionAccess.AllAccess,<span class="keyword">new</span> <span class="keywordtype">string</span>[]{<a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a8fed6209155c922102b9430d2f216276" title="Returns the physical path of the cache directory specified in VirtualCacheDir.">PhysicalCacheDir</a>, Path.Combine(PhysicalCacheDir,<span class="stringliteral">&quot;web.config&quot;</span>)});
            <span class="keywordflow">return</span> SecurityManager.IsGranted(writePermission);
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a97c992e137f180427979ef2d0459dab9"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::Install" ref="a97c992e137f180427979ef2d0459dab9" args="(Config c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html">IPlugin</a> <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a97c992e137f180427979ef2d0459dab9">ImageResizer.Plugins.DiskCache.DiskCache.Install</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_image_resizer_1_1_configuration_1_1_config.html">Config</a>&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Loads the settings from 'c', starts the cache, and registers the plugin. Will throw an invalidoperationexception if already started. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Implements <a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html#acca01a73bba24037b9b3ade1b4e3c134">ImageResizer.Plugins.IPlugin</a>.</p>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00195">195</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                         {
            <span class="keywordflow">if</span> (c.get(<span class="stringliteral">&quot;diskcache.logging&quot;</span>, <span class="keyword">false</span>)) {
                <span class="keywordflow">if</span> (c.<a class="code" href="class_image_resizer_1_1_configuration_1_1_config.html#aa8cdada7d657ec3078e5d16310f198f7" title="Access and modify plugins.">Plugins</a>.<a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a9f23aa7ba7f123b82a9bc17fcbac3a06" title="Returns the most recently registered Logging plugin, or null.">LogManager</a> != null) 
                    log = c.<a class="code" href="class_image_resizer_1_1_configuration_1_1_config.html#aa8cdada7d657ec3078e5d16310f198f7" title="Access and modify plugins.">Plugins</a>.<a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a9f23aa7ba7f123b82a9bc17fcbac3a06" title="Returns the most recently registered Logging plugin, or null.">LogManager</a>.<a class="code" href="interface_image_resizer_1_1_configuration_1_1_logging_1_1_i_log_manager.html#af010ab8b5b3ec53a3f2305e64453fb06" title="Creates the specified logger object and assigns a LoggerName to it.">GetLogger</a>(<span class="stringliteral">&quot;ImageResizer.Plugins.DiskCache&quot;</span>);
                <span class="keywordflow">else</span> 
                    c.<a class="code" href="class_image_resizer_1_1_configuration_1_1_config.html#aa8cdada7d657ec3078e5d16310f198f7" title="Access and modify plugins.">Plugins</a>.LoggingAvailable += delegate(<a class="code" href="interface_image_resizer_1_1_configuration_1_1_logging_1_1_i_log_manager.html">ILogManager</a> mgr) {
                        <span class="keywordflow">if</span> (log != null) log = c.<a class="code" href="class_image_resizer_1_1_configuration_1_1_config.html#aa8cdada7d657ec3078e5d16310f198f7" title="Access and modify plugins.">Plugins</a>.<a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a9f23aa7ba7f123b82a9bc17fcbac3a06" title="Returns the most recently registered Logging plugin, or null.">LogManager</a>.<a class="code" href="interface_image_resizer_1_1_configuration_1_1_logging_1_1_i_log_manager.html#af010ab8b5b3ec53a3f2305e64453fb06" title="Creates the specified logger object and assigns a LoggerName to it.">GetLogger</a>(<span class="stringliteral">&quot;ImageResizer.Plugins.DiskCache&quot;</span>);
                    };
            }
            <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a19e04da009febf0d35b37700ca026062" title="Uses the defaults from the resizing.diskcache section in the specified configuration. Throws an invalid operation exception if the DiskCache is already started.">LoadSettings</a>(c);
            <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a6c81fcb56683a5658456227469fa5d9a" title="Attempts to start the DiskCache using the current settings. Returns true if succesful or if already s...">Start</a>();
            c.<a class="code" href="class_image_resizer_1_1_configuration_1_1_config.html#ab7d8e32249817ef77f91508c087140d9" title="Access and modify settings related to the HttpModule pipline. Register URL rewriting hooks...">Pipeline</a>.<a class="code" href="class_image_resizer_1_1_configuration_1_1_pipeline_config.html#ac105b32b257375041ed2ce72c0e19291" title="Fired after all rewriting is finished. e.AllowAccess defaults to the result of the UrlAuthorization m...">AuthorizeImage</a> += Pipeline_AuthorizeImage;
            c.<a class="code" href="class_image_resizer_1_1_configuration_1_1_config.html#aa8cdada7d657ec3078e5d16310f198f7" title="Access and modify plugins.">Plugins</a>.<a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a24a5d36dc59eee7d980a8e9b4d00ead1" title="Only for use by plugins during IPlugin.Install. Call Plugin.Install instead of this method...">add_plugin</a>(<span class="keyword">this</span>);
            <span class="keywordflow">return</span> <span class="keyword">this</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="af2c79cf5af8ef3d96966936c1e522d2a"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::IsConfigurationValid" ref="af2c79cf5af8ef3d96966936c1e522d2a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#af2c79cf5af8ef3d96966936c1e522d2a">ImageResizer.Plugins.DiskCache.DiskCache.IsConfigurationValid</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if the configured settings are valid and .NET (not NTFS) permissions will work. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00227">227</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                          {
            <span class="keywordflow">return</span> !<span class="keywordtype">string</span>.IsNullOrEmpty(<a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a9107f03f8a4e721a8af66dd1bbb38eea" title="Sets the location of the cache directory. Can be a virtual path (like /App/imagecache) or an applicat...">VirtualCacheDir</a>) &amp;&amp; this.<a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a20fdd8f25afd3e712d4331a28886e7e1" title="Allows disk caching to be disabled for debuginng purposes. Defaults to true.">Enabled</a> &amp;&amp; <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a51f26c30ab93791154685b3837afc953" title="Returns true if .NET permissions allow writing to the cache directory. Does not check NTFS permission...">HasFileIOPermission</a>();
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a19e04da009febf0d35b37700ca026062"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::LoadSettings" ref="a19e04da009febf0d35b37700ca026062" args="(Config c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a19e04da009febf0d35b37700ca026062">ImageResizer.Plugins.DiskCache.DiskCache.LoadSettings</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_image_resizer_1_1_configuration_1_1_config.html">Config</a>&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Uses the defaults from the resizing.diskcache section in the specified configuration. Throws an invalid operation exception if the <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html" title="Provides methods for creating, maintaining, and securing the disk cache.">DiskCache</a> is already started. </p>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00175">175</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                          {
            <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#ab9566bb68b57437c9dccb4c27d6397e0" title="Controls how many subfolders to use for disk caching. Rounded to the next power of to...">Subfolders</a> = c.get(<span class="stringliteral">&quot;diskcache.subfolders&quot;</span>, <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#ab9566bb68b57437c9dccb4c27d6397e0" title="Controls how many subfolders to use for disk caching. Rounded to the next power of to...">Subfolders</a>);
            <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a20fdd8f25afd3e712d4331a28886e7e1" title="Allows disk caching to be disabled for debuginng purposes. Defaults to true.">Enabled</a> = c.get(<span class="stringliteral">&quot;diskcache.enabled&quot;</span>, <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a20fdd8f25afd3e712d4331a28886e7e1" title="Allows disk caching to be disabled for debuginng purposes. Defaults to true.">Enabled</a>);
            <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a21e3a602d75eec0399962ae9b04b2b9b" title="If true, items from the cache folder will be automatically &#39;garbage collected&#39; if the cache size limi...">AutoClean</a> = c.get(<span class="stringliteral">&quot;diskcache.autoClean&quot;</span>, <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a21e3a602d75eec0399962ae9b04b2b9b" title="If true, items from the cache folder will be automatically &#39;garbage collected&#39; if the cache size limi...">AutoClean</a>);
            <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a9107f03f8a4e721a8af66dd1bbb38eea" title="Sets the location of the cache directory. Can be a virtual path (like /App/imagecache) or an applicat...">VirtualCacheDir</a> = c.get(<span class="stringliteral">&quot;diskcache.dir&quot;</span>, <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a9107f03f8a4e721a8af66dd1bbb38eea" title="Sets the location of the cache directory. Can be a virtual path (like /App/imagecache) or an applicat...">VirtualCacheDir</a>);
            <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a987835b68d3decf11ebc1865af9b2f1a" title="If true, when a source file is changed, a new file will be created instead of overwriting the old cac...">HashModifiedDate</a> = c.get(<span class="stringliteral">&quot;diskcache.hashModifiedDate&quot;</span>, <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a987835b68d3decf11ebc1865af9b2f1a" title="If true, when a source file is changed, a new file will be created instead of overwriting the old cac...">HashModifiedDate</a>);
            <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#ae9bd5dae4cd2ec5cfd13153386941e9b" title="How many milliseconds to wait for a cached item to be available. Values below 0 are set to 0...">CacheAccessTimeout</a> = c.get(<span class="stringliteral">&quot;diskcache.cacheAccessTimeout&quot;</span>, <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#ae9bd5dae4cd2ec5cfd13153386941e9b" title="How many milliseconds to wait for a cached item to be available. Values below 0 are set to 0...">CacheAccessTimeout</a>);
            <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#ad36ae61ace9fdb78f7daf1c5a672c6c4" title="If more than this amount of memory (in bytes) is currently allocated by queued writes, the request will be processed synchronously instead of asynchronously.">AsyncBufferSize</a> = c.get(<span class="stringliteral">&quot;diskcache.asyncBufferSize&quot;</span>, <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#ad36ae61ace9fdb78f7daf1c5a672c6c4" title="If more than this amount of memory (in bytes) is currently allocated by queued writes, the request will be processed synchronously instead of asynchronously.">AsyncBufferSize</a>);
            <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a041942b5394c38fd989fa268d69348a7" title="If true, writes to the disk cache will be performed outside the request thread, allowing responses to...">AsyncWrites</a> = c.get(<span class="stringliteral">&quot;diskcache.asyncWrites&quot;</span>, <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a041942b5394c38fd989fa268d69348a7" title="If true, writes to the disk cache will be performed outside the request thread, allowing responses to...">AsyncWrites</a>);
            <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a14e1a1afff8c1d086f91eb7f1d7b4060" title="Only relevant when AutoClean=true. Settings about how background cache cleanup are performed...">CleanupStrategy</a>.<a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_cleanup_strategy.html#a95c6e6c237e403debac6150500a4be29" title="Loads settings from the specified node. Attribute names and property names must match.">LoadFrom</a>(c.<a class="code" href="class_image_resizer_1_1_configuration_1_1_config.html#a88b0d3c3b0457e5f8f0cacb35cb7d267" title="Returns a deep copy of the specified node.">getNode</a>(<span class="stringliteral">&quot;cleanupStrategy&quot;</span>));
        }
</pre></div>
</div>
</div>
<a class="anchor" id="aea8298c74ed69a1689e1640f0991d825"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::Process" ref="aea8298c74ed69a1689e1640f0991d825" args="(HttpContext context, IResponseArgs e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#aea8298c74ed69a1689e1640f0991d825">ImageResizer.Plugins.DiskCache.DiskCache.Process</a> </td>
          <td>(</td>
          <td class="paramtype">HttpContext&#160;</td>
          <td class="paramname"><em>current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_image_resizer_1_1_caching_1_1_i_response_args.html">IResponseArgs</a>&#160;</td>
          <td class="paramname"><em>e</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Must update the cache if needed, then either rewrite, redirect or serve the cached data. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">current</td><td></td></tr>
    <tr><td class="paramname">e</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="interface_image_resizer_1_1_caching_1_1_i_cache.html#adf2afb4fca74ba610979b081ebff3487">ImageResizer.Caching.ICache</a>.</p>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00295">295</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                                                  {

            CacheResult r = <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#aea8298c74ed69a1689e1640f0991d825" title="Must update the cache if needed, then either rewrite, redirect or serve the cached data...">Process</a>(e);
            context.Items[<span class="stringliteral">&quot;FinalCachedFile&quot;</span>] = r.PhysicalPath;

            <span class="keywordflow">if</span> (r.Data == null) {

                <span class="comment">//Calculate the virtual path</span>
                <span class="keywordtype">string</span> virtualPath = <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a9107f03f8a4e721a8af66dd1bbb38eea" title="Sets the location of the cache directory. Can be a virtual path (like /App/imagecache) or an applicat...">VirtualCacheDir</a>.TrimEnd(<span class="charliteral">&#39;/&#39;</span>) + <span class="charliteral">&#39;/&#39;</span> + r.RelativePath.Replace(<span class="charliteral">&#39;\\&#39;</span>, <span class="charliteral">&#39;/&#39;</span>).TrimStart(<span class="charliteral">&#39;/&#39;</span>);

                <span class="comment">//Rewrite to cached, resized image.</span>
                context.RewritePath(virtualPath, <span class="keyword">false</span>);
            } <span class="keywordflow">else</span> {
                <span class="comment">//Remap the response args writer to use the existing stream.</span>
                ((<a class="code" href="class_image_resizer_1_1_caching_1_1_response_args.html" title="IResponseArgs implementation.">ResponseArgs</a>)e).ResizeImageToStream = delegate(Stream s) {
                    ((MemoryStream)r.Data).WriteTo(s);
                };
                context.RemapHandler(<span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_plugins_1_1_basic_1_1_no_cache_handler.html" title="Implements IHttpHandler, serves content for the NoCache plugin.">NoCacheHandler</a>(e));
            }
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a6c81fcb56683a5658456227469fa5d9a"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::Start" ref="a6c81fcb56683a5658456227469fa5d9a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a6c81fcb56683a5658456227469fa5d9a">ImageResizer.Plugins.DiskCache.DiskCache.Start</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Attempts to start the <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html" title="Provides methods for creating, maintaining, and securing the disk cache.">DiskCache</a> using the current settings. Returns true if succesful or if already started. Returns false on a configuration error. Called by <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a97c992e137f180427979ef2d0459dab9" title="Loads the settings from &#39;c&#39;, starts the cache, and registers the plugin. Will throw an invalidoperati...">Install()</a> </p>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00254">254</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>
<div class="fragment"><pre class="fragment">                            {
            <span class="keywordflow">if</span> (!<a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#af2c79cf5af8ef3d96966936c1e522d2a" title="Returns true if the configured settings are valid and .NET (not NTFS) permissions will work...">IsConfigurationValid</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;
            lock (_startSync) {
                <span class="keywordflow">if</span> (_started) <span class="keywordflow">return</span> <span class="keyword">true</span>;
                <span class="keywordflow">if</span> (!<a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#af2c79cf5af8ef3d96966936c1e522d2a" title="Returns true if the configured settings are valid and .NET (not NTFS) permissions will work...">IsConfigurationValid</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;

                <span class="comment">//Init the writer.</span>
                writer = <span class="keyword">new</span> WebConfigWriter(<span class="keyword">this</span>,<a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a8fed6209155c922102b9430d2f216276" title="Returns the physical path of the cache directory specified in VirtualCacheDir.">PhysicalCacheDir</a>);
                <span class="comment">//Init the inner cache</span>
                cache = <span class="keyword">new</span> CustomDiskCache(<span class="keyword">this</span>, <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a8fed6209155c922102b9430d2f216276" title="Returns the physical path of the cache directory specified in VirtualCacheDir.">PhysicalCacheDir</a>, <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#ab9566bb68b57437c9dccb4c27d6397e0" title="Controls how many subfolders to use for disk caching. Rounded to the next power of to...">Subfolders</a>, <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a987835b68d3decf11ebc1865af9b2f1a" title="If true, when a source file is changed, a new file will be created instead of overwriting the old cac...">HashModifiedDate</a>,<a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#ad36ae61ace9fdb78f7daf1c5a672c6c4" title="If more than this amount of memory (in bytes) is currently allocated by queued writes, the request will be processed synchronously instead of asynchronously.">AsyncBufferSize</a>);
                <span class="comment">//Init the cleanup strategy</span>
                <span class="keywordflow">if</span> (<a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a21e3a602d75eec0399962ae9b04b2b9b" title="If true, items from the cache folder will be automatically &#39;garbage collected&#39; if the cache size limi...">AutoClean</a> &amp;&amp; cleanupStrategy == null) cleanupStrategy = <span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a14e1a1afff8c1d086f91eb7f1d7b4060" title="Only relevant when AutoClean=true. Settings about how background cache cleanup are performed...">CleanupStrategy</a>(); <span class="comment">//Default settings if null</span>
                <span class="comment">//Init the cleanup worker</span>
                <span class="keywordflow">if</span> (<a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a21e3a602d75eec0399962ae9b04b2b9b" title="If true, items from the cache folder will be automatically &#39;garbage collected&#39; if the cache size limi...">AutoClean</a>) cleaner = <span class="keyword">new</span> CleanupManager(<span class="keyword">this</span>, cache, cleanupStrategy);
                <span class="comment">//If we&#39;re running with subfolders, enqueue the cache root for cleanup (after the 5 minute delay)</span>
                <span class="comment">//so we don&#39;t eternally &#39;skip&#39; files in the root or in other unused subfolders (since only &#39;accessed&#39; subfolders are ever cleaned ). </span>
                <span class="keywordflow">if</span> (cleaner != null) cleaner.CleanAll();

                <span class="keywordflow">if</span> (log != null) log.<a class="code" href="interface_image_resizer_1_1_configuration_1_1_logging_1_1_i_logger.html#a1f36e0d48edf1bf562408dad96dc9109" title="Writes the diagnostic message at the Info level.">Info</a>(<span class="stringliteral">&quot;DiskCache started successfully.&quot;</span>);
                <span class="comment">//Started successfully</span>
                _started = <span class="keyword">true</span>;
                <span class="keywordflow">return</span> <span class="keyword">true</span>;
            }
        }
</pre></div>
</div>
</div>
<a class="anchor" id="a5cb5580fe25f56de3d31ca75ed91fa8c"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::Stop" ref="a5cb5580fe25f56de3d31ca75ed91fa8c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a5cb5580fe25f56de3d31ca75ed91fa8c">ImageResizer.Plugins.DiskCache.DiskCache.Stop</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if stopped succesfully. Cannot be restarted. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00282">282</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>
<div class="fragment"><pre class="fragment">                           {
            <span class="keywordflow">if</span> (cleaner != null) cleaner.Dispose();
            cleaner = null;
            <span class="keywordflow">return</span> <span class="keyword">true</span>;
        }
</pre></div>
</div>
</div>
<a class="anchor" id="ad9f28854949ae77bc24aaeec231b4cd0"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::Uninstall" ref="ad9f28854949ae77bc24aaeec231b4cd0" args="(Config c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#ad9f28854949ae77bc24aaeec231b4cd0">ImageResizer.Plugins.DiskCache.DiskCache.Uninstall</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_image_resizer_1_1_configuration_1_1_config.html">Config</a>&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Uninstalls the plugin. Should reverse all changes made during Install. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

<p>Implements <a class="el" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html#a047c1f46ce451fefc5f2ba3c16b64e8f">ImageResizer.Plugins.IPlugin</a>.</p>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00216">216</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>
<div class="fragment"><pre class="fragment">                                        {
            c.<a class="code" href="class_image_resizer_1_1_configuration_1_1_config.html#aa8cdada7d657ec3078e5d16310f198f7" title="Access and modify plugins.">Plugins</a>.<a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a0aae69c8ce761b0b5869fd63e2bcb863" title="For use only by plugins during .Uninstall. Removes the specified plugin from AllPlugins, QuerystringPlugins, CachingSystems, ImageEncoders, and ImageBuiderExtensions, based on which interfaces the instance implements. Plugins may register event handlers and modify settings - thus you should use the plugin&#39;s method to uninstall them vs. using this method.">remove_plugin</a>(<span class="keyword">this</span>);
            c.<a class="code" href="class_image_resizer_1_1_configuration_1_1_config.html#ab7d8e32249817ef77f91508c087140d9" title="Access and modify settings related to the HttpModule pipline. Register URL rewriting hooks...">Pipeline</a>.<a class="code" href="class_image_resizer_1_1_configuration_1_1_pipeline_config.html#ac105b32b257375041ed2ce72c0e19291" title="Fired after all rewriting is finished. e.AllowAccess defaults to the result of the UrlAuthorization m...">AuthorizeImage</a> -= Pipeline_AuthorizeImage;
            <span class="keywordflow">return</span> this.<a class="code" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a5cb5580fe25f56de3d31ca75ed91fa8c" title="Returns true if stopped succesfully. Cannot be restarted.">Stop</a>();
        }
</pre></div>
</div>
</div>
<hr/><h2>Property Documentation</h2>
<a class="anchor" id="ad36ae61ace9fdb78f7daf1c5a672c6c4"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::AsyncBufferSize" ref="ad36ae61ace9fdb78f7daf1c5a672c6c4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#ad36ae61ace9fdb78f7daf1c5a672c6c4">ImageResizer.Plugins.DiskCache.DiskCache.AsyncBufferSize</a><code> [get, set]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>If more than this amount of memory (in bytes) is currently allocated by queued writes, the request will be processed synchronously instead of asynchronously. </p>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00117">117</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>

</div>
</div>
<a class="anchor" id="a041942b5394c38fd989fa268d69348a7"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::AsyncWrites" ref="a041942b5394c38fd989fa268d69348a7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a041942b5394c38fd989fa268d69348a7">ImageResizer.Plugins.DiskCache.DiskCache.AsyncWrites</a><code> [get, set]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>If true, writes to the disk cache will be performed outside the request thread, allowing responses to return to the client quicker. </p>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00107">107</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>

</div>
</div>
<a class="anchor" id="a21e3a602d75eec0399962ae9b04b2b9b"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::AutoClean" ref="a21e3a602d75eec0399962ae9b04b2b9b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a21e3a602d75eec0399962ae9b04b2b9b">ImageResizer.Plugins.DiskCache.DiskCache.AutoClean</a><code> [get, set]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>If true, items from the cache folder will be automatically 'garbage collected' if the cache size limits are exceeded. Defaults to false. </p>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00065">65</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>

</div>
</div>
<a class="anchor" id="ae9bd5dae4cd2ec5cfd13153386941e9b"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::CacheAccessTimeout" ref="ae9bd5dae4cd2ec5cfd13153386941e9b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#ae9bd5dae4cd2ec5cfd13153386941e9b">ImageResizer.Plugins.DiskCache.DiskCache.CacheAccessTimeout</a><code> [get, set]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>How many milliseconds to wait for a cached item to be available. Values below 0 are set to 0. Defaults to 15 seconds. Actual time spent waiting may be 2 or 3x this value, if multiple layers of synchronization require a wait. </p>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00085">85</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>

</div>
</div>
<a class="anchor" id="a14e1a1afff8c1d086f91eb7f1d7b4060"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::CleanupStrategy" ref="a14e1a1afff8c1d086f91eb7f1d7b4060" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_cleanup_strategy.html">CleanupStrategy</a> <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a14e1a1afff8c1d086f91eb7f1d7b4060">ImageResizer.Plugins.DiskCache.DiskCache.CleanupStrategy</a><code> [get, set]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Only relevant when AutoClean=true. Settings about how background cache cleanup are performed. It is best not to modify these settings. There are very complicated and non-obvious factors involved in their choice. </p>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00074">74</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>

</div>
</div>
<a class="anchor" id="a20fdd8f25afd3e712d4331a28886e7e1"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::Enabled" ref="a20fdd8f25afd3e712d4331a28886e7e1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a20fdd8f25afd3e712d4331a28886e7e1">ImageResizer.Plugins.DiskCache.DiskCache.Enabled</a><code> [get, set]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allows disk caching to be disabled for debuginng purposes. Defaults to true. </p>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00054">54</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>

</div>
</div>
<a class="anchor" id="a987835b68d3decf11ebc1865af9b2f1a"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::HashModifiedDate" ref="a987835b68d3decf11ebc1865af9b2f1a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a987835b68d3decf11ebc1865af9b2f1a">ImageResizer.Plugins.DiskCache.DiskCache.HashModifiedDate</a><code> [get, set]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>If true, when a source file is changed, a new file will be created instead of overwriting the old cached file. This helps prevent file lock contention on high-traffic servers. Defaults to true. Do NOT set this to false in a Web Garden or if you have overlapped recycle enabled, as you may risk having occasional failed requests due to write contention by separate proccesses. Changes the hash function, so you should delete the cache folder whenever this setting is modified. </p>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00098">98</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>

</div>
</div>
<a class="anchor" id="a8fed6209155c922102b9430d2f216276"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::PhysicalCacheDir" ref="a8fed6209155c922102b9430d2f216276" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a8fed6209155c922102b9430d2f216276">ImageResizer.Plugins.DiskCache.DiskCache.PhysicalCacheDir</a><code> [get]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the physical path of the cache directory specified in VirtualCacheDir. </p>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00145">145</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>

</div>
</div>
<a class="anchor" id="a32744b9ad1db64994e068f27cfe87314"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::Started" ref="a32744b9ad1db64994e068f27cfe87314" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a32744b9ad1db64994e068f27cfe87314">ImageResizer.Plugins.DiskCache.DiskCache.Started</a><code> [get]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns true if the <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html" title="Provides methods for creating, maintaining, and securing the disk cache.">DiskCache</a> instance is operational. </p>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00249">249</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>

</div>
</div>
<a class="anchor" id="ab9566bb68b57437c9dccb4c27d6397e0"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::Subfolders" ref="ab9566bb68b57437c9dccb4c27d6397e0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#ab9566bb68b57437c9dccb4c27d6397e0">ImageResizer.Plugins.DiskCache.DiskCache.Subfolders</a><code> [get, set]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="namespace_image_resizer_1_1_plugins_1_1_controls.html">Controls</a> how many subfolders to use for disk caching. Rounded to the next power of to. (1-&gt;2, 3-&gt;4, 5-&gt;8, 9-&gt;16, 17-&gt;32, 33-&gt;64, 65-&gt;128,129-&gt;256,etc.) NTFS does not handle more than 8,000 files per folder well. Larger folders also make cleanup more resource-intensive. Defaults to 32, which combined with the default setting of 400 images per folder, allows for scalability to 12,800 actively used image versions. For example, given a desired cache size of 100,000 items, this should be set to 256. </p>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00045">45</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>

</div>
</div>
<a class="anchor" id="a9107f03f8a4e721a8af66dd1bbb38eea"></a><!-- doxytag: member="ImageResizer::Plugins::DiskCache::DiskCache::VirtualCacheDir" ref="a9107f03f8a4e721a8af66dd1bbb38eea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string <a class="el" href="class_image_resizer_1_1_plugins_1_1_disk_cache_1_1_disk_cache.html#a9107f03f8a4e721a8af66dd1bbb38eea">ImageResizer.Plugins.DiskCache.DiskCache.VirtualCacheDir</a><code> [get, set]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the location of the cache directory. Can be a virtual path (like /App/imagecache) or an application-relative path (like ~/imagecache, the default). Relative paths are assummed to be relative to the application root. All values are converted to virtual path format upon assignment (/App/imagecache) Will throw an InvalidOperationException if changed after the plugin is installed. </p>

<p>Definition at line <a class="el" href="_disk_cache_8cs_source.html#l00131">131</a> of file <a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>C:/Users/Administrator/Documents/resizer/Plugins/DiskCache/<a class="el" href="_disk_cache_8cs_source.html">DiskCache.cs</a></li>
</ul>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Events</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
