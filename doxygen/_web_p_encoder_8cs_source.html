<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>ImageResizer: C:/Users/Administrator/Documents/resizer/Plugins/WebP/WebPEncoder.cs Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="imageresizer-logo-00aec4.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">ImageResizer
   &#160;<span id="projectnumber">3.3.3</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">C:/Users/Administrator/Documents/resizer/Plugins/WebP/WebPEncoder.cs</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 ï»¿using System;
<a name="l00002"></a>00002 <span class="keyword">using</span> System.Collections.Generic;
<a name="l00003"></a>00003 <span class="keyword">using</span> System.Text;
<a name="l00004"></a>00004 <span class="keyword">using</span> ImageResizer.Plugins;
<a name="l00005"></a>00005 <span class="keyword">using</span> ImageResizer.Configuration;
<a name="l00006"></a>00006 <span class="keyword">using</span> ImageResizer.Encoding;
<a name="l00007"></a>00007 <span class="keyword">using</span> System.Collections.Specialized;
<a name="l00008"></a>00008 <span class="keyword">using</span> Imazen.WebP;
<a name="l00009"></a>00009 <span class="keyword">using</span> System.Drawing;
<a name="l00010"></a>00010 
<a name="l00011"></a><a class="code" href="namespace_image_resizer_1_1_plugins_1_1_web_p_encoder.html">00011</a> <span class="keyword">namespace </span>ImageResizer.Plugins.WebPEncoder {
<a name="l00012"></a><a class="code" href="class_image_resizer_1_1_plugins_1_1_web_p_encoder_1_1_web_p_encoder_plugin.html">00012</a>     <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="class_image_resizer_1_1_plugins_1_1_web_p_encoder_1_1_web_p_encoder_plugin.html">WebPEncoderPlugin</a>:<a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html" title="All plugins must implement this. Enables web.config addition and removal.">IPlugin</a>, <a class="code" href="interface_image_resizer_1_1_encoding_1_1_i_encoder.html" title="An image encoder. Exposes methods for suitability checking, encoding, transparency compatibility chec...">IEncoder</a> {
<a name="l00013"></a>00013        
<a name="l00014"></a><a class="code" href="class_image_resizer_1_1_plugins_1_1_web_p_encoder_1_1_web_p_encoder_plugin.html#a599628223c3cbd3db3acdf04b49ec2e5">00014</a>         <span class="keyword">public</span> <a class="code" href="interface_image_resizer_1_1_plugins_1_1_i_plugin.html" title="All plugins must implement this. Enables web.config addition and removal.">IPlugin</a> <a class="code" href="class_image_resizer_1_1_plugins_1_1_web_p_encoder_1_1_web_p_encoder_plugin.html#a599628223c3cbd3db3acdf04b49ec2e5" title="Installs the plugin in the specified Config instance. The plugin must handle all the work of loading ...">Install</a>(<a class="code" href="class_image_resizer_1_1_configuration_1_1_config.html">Config</a> c) {
<a name="l00015"></a>00015             c.<a class="code" href="class_image_resizer_1_1_configuration_1_1_config.html#aa8cdada7d657ec3078e5d16310f198f7" title="Access and modify plugins.">Plugins</a>.<a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a24a5d36dc59eee7d980a8e9b4d00ead1" title="Only for use by plugins during IPlugin.Install. Call Plugin.Install instead of this method...">add_plugin</a>(<span class="keyword">this</span>);
<a name="l00016"></a>00016             <span class="keywordflow">return</span> <span class="keyword">this</span>;
<a name="l00017"></a>00017         }
<a name="l00018"></a>00018 
<a name="l00019"></a><a class="code" href="class_image_resizer_1_1_plugins_1_1_web_p_encoder_1_1_web_p_encoder_plugin.html#a0e06d67c9e54a35b6cb8c340ba3c9f3e">00019</a>         <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_image_resizer_1_1_plugins_1_1_web_p_encoder_1_1_web_p_encoder_plugin.html#a0e06d67c9e54a35b6cb8c340ba3c9f3e" title="Uninstalls the plugin. Should reverse all changes made during Install.">Uninstall</a>(<a class="code" href="class_image_resizer_1_1_configuration_1_1_config.html">Config</a> c) {
<a name="l00020"></a>00020             c.<a class="code" href="class_image_resizer_1_1_configuration_1_1_config.html#aa8cdada7d657ec3078e5d16310f198f7" title="Access and modify plugins.">Plugins</a>.<a class="code" href="class_image_resizer_1_1_configuration_1_1_plugin_config.html#a0aae69c8ce761b0b5869fd63e2bcb863" title="For use only by plugins during .Uninstall. Removes the specified plugin from AllPlugins, QuerystringPlugins, CachingSystems, ImageEncoders, and ImageBuiderExtensions, based on which interfaces the instance implements. Plugins may register event handlers and modify settings - thus you should use the plugin&#39;s method to uninstall them vs. using this method.">remove_plugin</a>(<span class="keyword">this</span>);
<a name="l00021"></a>00021             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00022"></a>00022         }
<a name="l00023"></a>00023 
<a name="l00024"></a>00024         <span class="keyword">public</span> <a class="code" href="class_image_resizer_1_1_plugins_1_1_web_p_encoder_1_1_web_p_encoder_plugin.html">WebPEncoderPlugin</a>() {
<a name="l00025"></a>00025             Quality = 90;
<a name="l00026"></a>00026             Lossless = <span class="keyword">false</span>;
<a name="l00027"></a>00027             NoAlpha = <span class="keyword">false</span>;
<a name="l00028"></a>00028         }
<a name="l00029"></a>00029         <span class="keyword">public</span> WebPEncoderPlugin(NameValueCollection args):this() {
<a name="l00030"></a>00030             Lossless = ExtensionMethods.NameValueCollectionExtensions.Get&lt;<span class="keywordtype">bool</span>&gt;(args, <span class="stringliteral">&quot;lossless&quot;</span>, Lossless);
<a name="l00031"></a>00031             Quality = ExtensionMethods.NameValueCollectionExtensions.Get&lt;<span class="keywordtype">float</span>&gt;(args, <span class="stringliteral">&quot;quality&quot;</span>, Quality);
<a name="l00032"></a>00032             NoAlpha = ExtensionMethods.NameValueCollectionExtensions.Get&lt;<span class="keywordtype">bool</span>&gt;(args, <span class="stringliteral">&quot;noalpha&quot;</span>, NoAlpha);
<a name="l00033"></a>00033             
<a name="l00034"></a>00034         }
<a name="l00035"></a>00035 
<a name="l00036"></a>00036         <span class="keyword">public</span> <span class="keywordtype">float</span> Quality { <span class="keyword">get</span>; <span class="keyword">set</span>; }
<a name="l00037"></a>00037         <span class="keyword">public</span> <span class="keywordtype">bool</span> Lossless { <span class="keyword">get</span>; <span class="keyword">set</span>; }<span class="comment"></span>
<a name="l00038"></a>00038 <span class="comment">        /// &lt;summary&gt;</span>
<a name="l00039"></a>00039 <span class="comment">        /// If true, the alpha channel will be ignored, even if present.</span>
<a name="l00040"></a>00040 <span class="comment">        /// &lt;/summary&gt;</span>
<a name="l00041"></a><a class="code" href="class_image_resizer_1_1_plugins_1_1_web_p_encoder_1_1_web_p_encoder_plugin.html#ad4bf392088da82034c09b45c64464cb9">00041</a> <span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> NoAlpha { <span class="keyword">get</span>; <span class="keyword">set</span>; }
<a name="l00042"></a>00042 
<a name="l00043"></a><a class="code" href="class_image_resizer_1_1_plugins_1_1_web_p_encoder_1_1_web_p_encoder_plugin.html#a5e2fc541cc0ac67a000e7bc890fab4bd">00043</a>         <span class="keyword">public</span> <a class="code" href="interface_image_resizer_1_1_encoding_1_1_i_encoder.html" title="An image encoder. Exposes methods for suitability checking, encoding, transparency compatibility chec...">IEncoder</a> <a class="code" href="class_image_resizer_1_1_plugins_1_1_web_p_encoder_1_1_web_p_encoder_plugin.html#a5e2fc541cc0ac67a000e7bc890fab4bd" title="If the encoder can handle the requirements specified by &#39;settings&#39; and &#39;source&#39;, it should return an ...">CreateIfSuitable</a>(<a class="code" href="class_image_resizer_1_1_resize_settings.html" title="Represents the settings which will be used to process the image. Extends NameValueCollection to provi...">ResizeSettings</a> settings, <span class="keywordtype">object</span> original) {
<a name="l00044"></a>00044             <span class="keywordflow">if</span> (<span class="stringliteral">&quot;webp&quot;</span>.Equals(settings.<a class="code" href="class_image_resizer_1_1_resize_settings.html#a0eb55968c046e198a3e7928d845316f0" title="Like this[&quot;format&quot;]. Gets or sets the output file format to use. &quot;png&quot;, &quot;jpg&quot;, and &quot;gif&quot; are valid va...">Format</a>, StringComparison.OrdinalIgnoreCase)) {
<a name="l00045"></a>00045                 <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_image_resizer_1_1_plugins_1_1_web_p_encoder_1_1_web_p_encoder_plugin.html">WebPEncoderPlugin</a>(settings);
<a name="l00046"></a>00046             }
<a name="l00047"></a>00047             <span class="keywordflow">return</span> null;
<a name="l00048"></a>00048         }
<a name="l00049"></a>00049 
<a name="l00050"></a>00050         <span class="keyword">public</span> <span class="keywordtype">void</span> Write(System.Drawing.Image i, System.IO.Stream s) {
<a name="l00051"></a>00051             <span class="keyword">using</span> (var b = <span class="keyword">new</span> Bitmap(i)){
<a name="l00052"></a>00052                 <span class="keyword">new</span> SimpleEncoder().Encode(b, s, Lossless ? -1 : Quality);
<a name="l00053"></a>00053            }
<a name="l00054"></a>00054         }
<a name="l00055"></a>00055 
<a name="l00056"></a><a class="code" href="class_image_resizer_1_1_plugins_1_1_web_p_encoder_1_1_web_p_encoder_plugin.html#a8b9d06329c78ae932a3979957ebcb554">00056</a>         <span class="keyword">public</span> <span class="keywordtype">bool</span> SupportsTransparency {
<a name="l00057"></a>00057             <span class="keyword">get</span> { <span class="keywordflow">return</span> <span class="keyword">true</span>;  }
<a name="l00058"></a>00058         }
<a name="l00059"></a>00059 
<a name="l00060"></a><a class="code" href="class_image_resizer_1_1_plugins_1_1_web_p_encoder_1_1_web_p_encoder_plugin.html#af022305bf628c1002494e15821bb72ae">00060</a>         <span class="keyword">public</span> <span class="keywordtype">string</span> MimeType {
<a name="l00061"></a>00061             <span class="keyword">get</span> { <span class="keywordflow">return</span> <span class="stringliteral">&quot;image/webp&quot;</span>; }
<a name="l00062"></a>00062         }
<a name="l00063"></a>00063 
<a name="l00064"></a><a class="code" href="class_image_resizer_1_1_plugins_1_1_web_p_encoder_1_1_web_p_encoder_plugin.html#a29d8813ce230d7c7debde3dc4a33740f">00064</a>         <span class="keyword">public</span> <span class="keywordtype">string</span> Extension {
<a name="l00065"></a>00065             <span class="keyword">get</span> { <span class="keywordflow">return</span> <span class="stringliteral">&quot;webp&quot;</span>;  }
<a name="l00066"></a>00066         }
<a name="l00067"></a>00067     }
<a name="l00068"></a>00068 }
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Events</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
